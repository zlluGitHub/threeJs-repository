(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5f791612"],{"14d9":function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"trackController-container"},[r("view-track",{scopedSlots:t._u([{key:"default",fn:function(e){var n=e.exactWidth;return[r("time-axis",{attrs:{exactWidth:n}}),r("pre-render-area",{attrs:{exactWidth:n}}),r("keyframe-track",{attrs:{scrollTop:t.scrollTop}})]}}])})],1)},i=[],o=(r("d3b7"),r("3ca3"),r("ddb0"),r("a9e3"),function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"viewTrack-container"},[r("div",{staticClass:"viewTrack-track"},[r("div",{staticClass:"track-scroll",style:{left:t.scrollBarLeft+"%",width:t.scrollBarWidth+"%"}},[r("div",{staticClass:"scroll-arrow",on:{mousedown:t.stretchLeft}}),r("div",{staticClass:"scroll-bar",on:{mousedown:t.scrollTrack}}),r("div",{staticClass:"scroll-arrow",on:{mousedown:t.stretchRight}})])]),r("div",{staticClass:"viewTrack-veiw"},[r("div",{staticClass:"viewTrack-exact",style:{width:t.exactWidth+"px",left:t.exactOffset+"px"}},[r("div",{staticClass:"viewTrack-exact-slot"},[t._t("default",null,{exactWidth:t.exactWidth})],2)])])])}),s=[],c={data:function(){var t=100,e=0;return{scrollBarLeft:e,scrollBarWidth:t,bufferScrollLeft:e,bufferScrollWidth:t,throttleTime:1e3/30,stretchLeftTimer:"",stretchLeftCanMove:!0,stretchRightTimer:"",stretchRightCanMove:!0,scrollTimer:"",scrollCanMove:!0}},computed:{trackWidth:function(){return this.$store.getters["animation/trackWidth"]},exactWidth:function(){return(this.trackWidth-20)/(this.scrollBarWidth/100)},exactOffset:function(){return-this.exactWidth*this.scrollBarLeft/100}},methods:{checkScrollWidth:function(){var t=20/this.trackWidth*100,e=100-this.scrollBarLeft;this.scrollBarWidth<t?this.scrollBarWidth=t:this.scrollBarWidth>e&&(this.scrollBarWidth=e)},checkOffset:function(){var t=0,e=100-this.scrollBarWidth;this.scrollBarLeft<t?this.scrollBarLeft=t:this.scrollBarLeft>e&&(this.scrollBarLeft=e)},stretchLeft:function(t){var e=this,r=function(r){if(document.body.style.cursor="ew-resize",!e.stretchLeftCanMove)return!1;e.stretchLeftTimer=setTimeout((function(){var n=r.clientX-t.clientX;e.scrollBarLeft=e.bufferScrollLeft+n/e.trackWidth*100,e.checkOffset(),e.scrollBarWidth=e.bufferScrollWidth-n/e.trackWidth*100,e.checkScrollWidth(),e.stretchLeftTimer=!0}),e.throttleTime)},n=function t(){document.body.style.cursor="default",e.bufferScrollWidth=e.scrollBarWidth,e.bufferScrollLeft=e.scrollBarLeft,document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",t)};document.addEventListener("mousemove",r),document.addEventListener("mouseup",n)},stretchRight:function(t){var e=this,r=function(r){if(document.body.style.cursor="ew-resize",!e.stretchRightCanMove)return!1;e.stretchRightTimer=setTimeout((function(){var n=r.clientX-t.clientX;e.scrollBarWidth=e.bufferScrollWidth+n/e.trackWidth*100,e.checkScrollWidth(),e.stretchRightTimer=!0}),e.throttleTime)},n=function t(){document.body.style.cursor="default",e.bufferScrollWidth=e.scrollBarWidth,document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",t)};document.addEventListener("mousemove",r),document.addEventListener("mouseup",n)},scrollTrack:function(t){var e=this,r=function(r){if(document.body.style.cursor="pointer",!e.scrollCanMove)return!1;e.scrollTimer=setTimeout((function(){var n=r.clientX-t.clientX;e.scrollBarLeft=e.bufferScrollLeft+n/e.trackWidth*100,e.checkOffset(),e.scrollTimer=!0}),e.throttleTime)},n=function t(){document.body.style.cursor="default",e.bufferScrollLeft=e.scrollBarLeft,document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",t)};document.addEventListener("mousemove",r),document.addEventListener("mouseup",n)}}},a=c,u=(r("4f32"),r("2877")),l=Object(u["a"])(a,o,s,!1,null,"98aed39c",null),d=l.exports,f=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"timeAxis-conatainer"},[r("div",{staticClass:"timeAxis-keyframe-list",on:{click:t.jumpTime}},t._l(t.timeKeyframeList,(function(e,n){return r("div",{key:n,staticClass:"timeAxis-keyframe",style:{left:e.position+"%"}},[r("div",{staticClass:"time",domProps:{textContent:t._s(e.text)}}),r("div",{staticClass:"axis"},[t._v("|")])])})),0),r("div",{staticClass:"timeAxis-pointer",style:{left:t.pointerPosition+"%"},on:{mousedown:t.pointerMousedown}},[r("div",{staticClass:"pointer-header"},[r("vis-icon",{attrs:{code:"#iconzhencopy",color:"yellow"}})],1)])])},m=[],h=(r("99af"),{props:{exactWidth:{type:Number,required:!0}},data:function(){return{visualMaxTimeQuantum:24,timeKeyframeList:[],timer:"",bufferCurrentFrame:0,canMove:!0}},computed:{trackWidth:function(){return this.$store.getters["animation/trackWidth"]},fps:function(){return this.$store.getters["animation/fps"]},totalDuration:function(){return this.$store.getters["animation/totalDuration"]},totalFrame:function(){return this.$store.getters["animation/totalFrame"]},currentFrame:function(){return this.$store.getters["animation/currentFrame"]},timekeyFrameMultiplyList:function(){var t=[1,2,5,10],e=t.concat([]),r=this.fps,n=r,i=60*r;return e.push(.5*n),t.forEach((function(t){e.push(t*n)})),e.push(.5*i),t.forEach((function(t){e.push(t*i)})),e},currentMutiply:function(){var t=this.timekeyFrameMultiplyList,e=this.totalDuration*this.fps,r=this.exactWidth,n=this.trackWidth/this.visualMaxTimeQuantum,i=1;return t.some((function(t){var o=e/t,s=r/o;if(s>=n)return i=t,!0})),i},pointerPosition:function(){return this.currentFrame/this.totalFrame*100}},methods:{pointerMousedown:function(t){var e=this,r=this.exactWidth/(this.totalDuration*this.fps);this.bufferCurrentFrame=this.currentFrame;var n=function(n){if(document.body.style.cursor="ew-resize",!e.canMove)return!1;e.timer=setTimeout((function(){var i=n.clientX-t.clientX,o=Math.floor(i/r),s=e.bufferCurrentFrame+o;s!==e.currentFrame&&e.$store.commit("animation/currentFrame",s),e.canMove=!0}),e.throttleTime)},i=function t(){document.body.style.cursor="default",document.removeEventListener("mousemove",n),document.removeEventListener("mouseup",t)};document.addEventListener("mousemove",n),document.addEventListener("mouseup",i)},jumpTime:function(t){var e=t.offsetX/this.exactWidth*this.totalDuration,r=Math.ceil(e*this.fps)-1;this.$store.commit("animation/currentFrame",r)}},watch:{currentMutiply:{handler:function(t,e){if(t!==e){for(var r=this.fps,n=this.currentMutiply,i=this.totalDuration*this.fps,o=Math.floor(i/n),s=[],c=function(t){var e=r,i=60*r,o=60*i,s="",c="",a="";return n<e?(s="f",a=Math.floor(t/e),c=t-a*e):n<i?(s="s",a=Math.floor(t/i),c=(t-a*i)/e):n<o&&(s="m",a=Math.floor(t/o),c=(t-a*o)/i),"".concat(a?a+":":"0:").concat(c||0).concat(s)},a=0;a<=o;a+=1)s.push({position:a/o*100,text:c(a*n),keyframe:a*n});this.timeKeyframeList=s}},immediate:!0}},created:function(){this.bufferCurrentFrame=this.currentFrame}}),v=h,p=(r("b922"),Object(u["a"])(v,f,m,!1,null,"7b6e1f59",null)),L=p.exports,b=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"preRenderArea-container"},[r("div",{staticClass:"preRenderArea-arrow",style:{left:t.arrowLeftOffset},on:{mousedown:t.stretchLeft}}),r("div",{staticClass:"preRenderArea-bar",style:{width:t.scrollBarWidth+"%",left:t.scrollBarLeft+"%"},on:{mousedown:t.scrollTrack}}),r("div",{staticClass:"preRenderArea-ready-box"},t._l(t.totalFrame,(function(e,n){return r("div",{key:n,staticClass:"area-ready",class:{ready:t.cacheSignMap[n]},attrs:{"data-ready":n}})})),0),r("div",{staticClass:"preRenderArea-arrow",style:{left:t.arrowRightOffset+"%"},on:{mousedown:t.stretchRight}})])},y=[],W={props:{exactWidth:{type:Number,required:!0}},data:function(){return{bufferRenderStart:"",bufferRenderEnd:"",bufferScrollFrame:0,throttleTime:1e3/30,stretchLeftTimer:"",stretchLeftCanMove:!0,stretchRightTimer:"",stretchRightCanMove:!0,scrollTimer:"",scrollCanMove:!0}},computed:{renderStart:function(){return this.$store.getters["preRenderArea/renderStart"]},renderEnd:function(){return this.$store.getters["preRenderArea/renderEnd"]},cacheSignMap:function(){return this.$store.getters["preRenderArea/cacheSignMap"]},scrollBarLeft:function(){return this.renderStart/this.totalFrame*100},scrollBarWidth:function(){return(this.renderEnd-this.renderStart)/this.totalFrame*100},arrowLeftOffset:function(){return"calc(".concat(this.scrollBarLeft,"% - 10px)")},arrowRightOffset:function(){return this.renderEnd/this.totalFrame*100},fps:function(){return this.$store.getters["animation/fps"]},totalFrame:function(){return this.$store.getters["animation/totalFrame"]},totalDuration:function(){return this.$store.getters["animation/totalDuration"]}},methods:{stretchLeft:function(t){var e=this;this.bufferRenderStart=this.renderStart;var r=this.exactWidth/(this.totalDuration*this.fps),n=function(n){if(document.body.style.cursor="ew-resize",!e.stretchLeftCanMove)return!1;e.stretchLeftTimer=setTimeout((function(){var i=n.clientX-t.clientX,o=Math.floor(i/r);e.$store.commit("preRenderArea/renderStart",e.bufferRenderStart+o),e.stretchLeftCanMove=!0}),e.throttleTime)},i=function t(){document.body.style.cursor="default",document.removeEventListener("mousemove",n),document.removeEventListener("mouseup",t)};document.addEventListener("mousemove",n),document.addEventListener("mouseup",i)},stretchRight:function(t){var e=this;this.bufferRenderEnd=this.renderEnd;var r=this.exactWidth/(this.totalDuration*this.fps),n=function(n){if(document.body.style.cursor="ew-resize",!e.stretchRightCanMove)return!1;e.stretchRightTimer=setTimeout((function(){var i=n.clientX-t.clientX,o=Math.floor(i/r);e.$store.commit("preRenderArea/renderEnd",e.bufferRenderEnd+o),e.stretchRightCanMove=!0}),e.throttleTime)},i=function t(){document.body.style.cursor="default",e.bufferScrollWidth=e.scrollBarWidth,document.removeEventListener("mousemove",n),document.removeEventListener("mouseup",t)};document.addEventListener("mousemove",n),document.addEventListener("mouseup",i)},scrollTrack:function(t){var e=this;this.bufferScrollFrame=0,this.bufferRenderEnd=this.renderEnd,this.bufferRenderStart=this.renderStart;var r=this.exactWidth/(this.totalDuration*this.fps),n=function(n){if(document.body.style.cursor="pointer",!e.scrollCanMove)return!1;e.scrollTimer=setTimeout((function(){var i=n.clientX-t.clientX,o=Math.floor(i/r),s=o-e.bufferScrollFrame;return!(e.renderStart<=0&&s<0)&&(!(e.renderEnd>=e.totalFrame&&s>0)&&(e.$store.commit("preRenderArea/renderStart",e.bufferRenderStart+o),e.$store.commit("preRenderArea/renderEnd",e.bufferRenderEnd+o),e.bufferScrollFrame=o,void(e.scrollCanMove=!0)))}),e.throttleTime)},i=function t(){document.body.style.cursor="default",document.removeEventListener("mousemove",n),document.removeEventListener("mouseup",t)};document.addEventListener("mousemove",n),document.addEventListener("mouseup",i)}}},T=W,k=(r("9e7d"),Object(u["a"])(T,b,y,!1,null,"05d3194d",null)),E=k.exports,C=function(){return r.e("chunk-68708483").then(r.bind(null,"af70"))},w={components:{viewTrack:d,timeAxis:L,preRenderArea:E,keyframeTrack:C},props:{scrollTop:{type:Number,default:0}}},x=w,M=(r("5e05"),Object(u["a"])(x,n,i,!1,null,"fdaf29e8",null));e["default"]=M.exports},"251d":function(t,e,r){},"4f32":function(t,e,r){"use strict";r("b4a0")},"5e05":function(t,e,r){"use strict";r("7fcd")},"6c6f":function(t,e,r){},"7fcd":function(t,e,r){},"9e7d":function(t,e,r){"use strict";r("6c6f")},b4a0:function(t,e,r){},b922:function(t,e,r){"use strict";r("251d")}}]);