(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-408cf9aa"],{"7a0c":function(e,t,n){"use strict";n("d5a2")},9309:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"material-container"},[n("div",{staticClass:"box-header"},[n("el-input",{attrs:{size:"mini","prefix-icon":"el-icon-search",placeholder:"材质筛选"}}),n("el-dropdown",{attrs:{trigger:"click"},on:{command:e.addMaterial}},[n("el-button",{attrs:{size:"mini",icon:"el-icon-circle-plus-outline",type:"primary"}},[e._v(" 添加材质 ")]),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.material,(function(t,a){return n("el-dropdown-item",{key:a,attrs:{command:t},domProps:{textContent:e._s(t.label)}})})),1)],1)],1),n("div",{staticClass:"box-container"},[n("div",{staticClass:"material-main"},e._l(e.materialList,(function(t,a){return n("div",{key:a,staticClass:"material-elem",on:{mousedown:function(){e.$store.commit("material/active",t.vid)}}},[n("div",{ref:"renderBox"+a,refInFor:!0,staticClass:"render-box",class:{active:e.activeMaterial.vid===t.vid},attrs:{draggable:"true",id:t.vid},on:{dragstart:function(n){return e.dragstart(n,t.vid)}}}),n("div",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"删除",expression:"'删除'",modifiers:{top:!0}}],staticClass:"operate-box"},[n("vis-icon",{attrs:{code:"#iconshanchu"}})],1),n("div",{directives:[{name:"tooltip",rawName:"v-tooltip.bottom",value:t.name,expression:"item.name",modifiers:{bottom:!0}}],staticClass:"element-title",domProps:{textContent:e._s(t.name)}})])})),0)])])},i=[],o=(n("159b"),n("b0c0"),n("99af"),n("fb6a"),n("28d5")),r=n("091c"),c=n("3c8e"),s=n("4da9"),l=n("9b8a"),d=[{icon:"#icondengpao",label:"标准网格材质",getConfig:function(){return JSON.parse(JSON.stringify(o["b"]))}},{icon:"#icondengpao",label:"物理网格材质",getConfig:function(){return JSON.parse(JSON.stringify(r["b"]))}},{icon:"#icondengpao",label:"卡通材质",getConfig:function(){return JSON.parse(JSON.stringify(c["b"]))}},{icon:"#icondengpao",label:"基础线条材质",getConfig:function(){return JSON.parse(JSON.stringify(s["b"]))}},{icon:"#icondengpao",label:"导入材质",fun:function(e){Object(l["a"])({request:{method:"get",url:"api/material"},type:["mtl"],confirm:function(t){var n={mtl:"VisMTLLoader"};t.loader=n[t.type],e(t)}})},getConfig:function(){return JSON.parse(JSON.stringify(o["b"]))}}],m=n("ec26"),u={components:{},data:function(){return{material:d,timer:"",throttleTime:1e3/45,canMove:!0}},computed:{materialList:function(){return this.$store.getters["material/get"]},activeMaterial:function(){return this.$store.getters["material/getActive"]}},methods:{dragstart:function(e,t){var n=this;e.preventDefault();var a=e.target,i=a.getElementsByTagName("canvas");if(i.length>0){this.$store.commit("material/dragging",!0);var o=i[0],r=new Image;r.src=o.toDataURL("image/png"),r.style.position="fixed",r.style.zIndex=20,r.style.opacity=.6,document.body.appendChild(r);var c=function(e){n.canMove&&(n.canMove=!1,n.timer=setTimeout((function(){r.style.top="".concat(e.clientY+10,"px"),r.style.left="".concat(e.clientX+10,"px"),n.canMove=!0}),n.throttleTime))},s=function e(t){n.$store.commit("material/dragging",!1),document.body.removeChild(r),document.body.removeEventListener("mousemove",c),document.body.removeEventListener("mouseup",e)};document.body.addEventListener("mousemove",c),document.body.addEventListener("mouseup",s)}else console.error("can not found canvas in this dom")},addMaterial:function(e){var t=this;if(e.fun)e.fun((function(n){t.$store.commit("loadingManager/load",{url:n.url,loader:n.loader,callBackFun:function(){var a=t.$store.getters["loadingManager/get"][n.url];a.forEach((function(a){var i=e.getConfig();i.vid=Object(m["a"])(),i.label=e.label,i.name="".concat(n.name,"-").concat(i.vid.slice(-2)),i=Object.assign(i,a),console.log(i),t.$store.commit("material/add",i)}))}})}));else{var n=e.getConfig();n.vid=Object(m["a"])(),n.label=e.label,n.name="".concat(e.label).concat(n.vid.slice(-2)),this.$store.commit("material/add",n)}}}},f=u,g=(n("7a0c"),n("2877")),v=Object(g["a"])(f,a,i,!1,null,"11c4f09d",null);t["default"]=v.exports},d5a2:function(e,t,n){}}]);