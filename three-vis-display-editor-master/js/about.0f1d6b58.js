(function(e){function t(t){for(var i,a,c=t[0],s=t[1],u=t[2],l=0,h=[];l<c.length;l++)a=c[l],Object.prototype.hasOwnProperty.call(r,a)&&r[a]&&h.push(r[a][0]),r[a]=0;for(i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i]);f&&f(t);while(h.length)h.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],i=!0,a=1;a<n.length;a++){var c=n[a];0!==r[c]&&(i=!1)}i&&(o.splice(t--,1),e=s(s.s=n[0]))}return e}var i={},a={about:0},r={about:0},o=[];function c(e){return s.p+"js/"+({}[e]||e)+"."+{"chunk-0174ac22":"e35a9ca0","chunk-03c3be08":"54e6d11f","chunk-0436b42f":"6c035e41","chunk-0c7b9806":"01c66cf5","chunk-110c62d6":"af03e299","chunk-1a8ceb6f":"2dff8a76","chunk-1aa66bfb":"6d590643","chunk-2d0b2596":"014b13a3","chunk-2dae7612":"23740e47","chunk-2ff3fcef":"68fea5b1","chunk-340f9888":"0afa9d3f","chunk-408cf9aa":"976acce4","chunk-472544cc":"e247be1c","chunk-4916ca67":"72f7f455","chunk-5f791612":"37577504","chunk-66765938":"1542fc5b","chunk-7222c48c":"a24606ec","chunk-790b698c":"e148a851","chunk-7a9d6de6":"236bb8d9","chunk-7e9b2d10":"3b8f0204","chunk-9a441ddc":"a8f6e2fa","chunk-9d7dfa2e":"a6311d53","chunk-b53a0978":"0a47ab2f","chunk-bc43beb0":"15766dc3","chunk-c710cee2":"e275c614","chunk-c8feab48":"c43f0c90","chunk-d326d4fe":"2d68ea94","chunk-f844f7a4":"29bd2e34","chunk-f9aed384":"43dfb8a7","chunk-fe190e48":"3f5bc96f","chunk-fe7f1300":"ca9ea716","chunk-68708483":"8199f814"}[e]+".js"}function s(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(e){var t=[],n={"chunk-0174ac22":1,"chunk-03c3be08":1,"chunk-0436b42f":1,"chunk-0c7b9806":1,"chunk-110c62d6":1,"chunk-1a8ceb6f":1,"chunk-1aa66bfb":1,"chunk-2dae7612":1,"chunk-2ff3fcef":1,"chunk-340f9888":1,"chunk-408cf9aa":1,"chunk-472544cc":1,"chunk-4916ca67":1,"chunk-5f791612":1,"chunk-66765938":1,"chunk-7222c48c":1,"chunk-790b698c":1,"chunk-7a9d6de6":1,"chunk-7e9b2d10":1,"chunk-9a441ddc":1,"chunk-9d7dfa2e":1,"chunk-b53a0978":1,"chunk-bc43beb0":1,"chunk-c710cee2":1,"chunk-c8feab48":1,"chunk-d326d4fe":1,"chunk-f844f7a4":1,"chunk-f9aed384":1,"chunk-fe190e48":1,"chunk-fe7f1300":1,"chunk-68708483":1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise((function(t,n){for(var i="css/"+({}[e]||e)+"."+{"chunk-0174ac22":"39ef9db0","chunk-03c3be08":"4d4f8fc6","chunk-0436b42f":"dbe20943","chunk-0c7b9806":"1bfc5624","chunk-110c62d6":"b77e65d6","chunk-1a8ceb6f":"0e9eeb22","chunk-1aa66bfb":"eb07c85b","chunk-2d0b2596":"31d6cfe0","chunk-2dae7612":"b4a0e830","chunk-2ff3fcef":"2cf6a7b7","chunk-340f9888":"07ccdbec","chunk-408cf9aa":"518e03d3","chunk-472544cc":"3bc70b05","chunk-4916ca67":"258a6c09","chunk-5f791612":"3e96f01c","chunk-66765938":"dbe20943","chunk-7222c48c":"4f748dd9","chunk-790b698c":"72b10825","chunk-7a9d6de6":"2a774e33","chunk-7e9b2d10":"4d3f45e1","chunk-9a441ddc":"751ddacd","chunk-9d7dfa2e":"4398bae0","chunk-b53a0978":"a100f38a","chunk-bc43beb0":"dbe20943","chunk-c710cee2":"2441c448","chunk-c8feab48":"dafec245","chunk-d326d4fe":"0b27c467","chunk-f844f7a4":"6999ac50","chunk-f9aed384":"b7ce53f5","chunk-fe190e48":"1bdec433","chunk-fe7f1300":"ea42a50f","chunk-68708483":"4a83dce2"}[e]+".css",r=s.p+i,o=document.getElementsByTagName("link"),c=0;c<o.length;c++){var u=o[c],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===i||l===r))return t()}var h=document.getElementsByTagName("style");for(c=0;c<h.length;c++){u=h[c],l=u.getAttribute("data-href");if(l===i||l===r)return t()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=t,f.onerror=function(t){var i=t&&t.target&&t.target.src||r,o=new Error("Loading CSS chunk "+e+" failed.\n("+i+")");o.code="CSS_CHUNK_LOAD_FAILED",o.request=i,delete a[e],f.parentNode.removeChild(f),n(o)},f.href=r;var d=document.getElementsByTagName("head")[0];d.appendChild(f)})).then((function(){a[e]=0})));var i=r[e];if(0!==i)if(i)t.push(i[2]);else{var o=new Promise((function(t,n){i=r[e]=[t,n]}));t.push(i[2]=o);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,s.nc&&l.setAttribute("nonce",s.nc),l.src=c(e);var h=new Error;u=function(t){l.onerror=l.onload=null,clearTimeout(f);var n=r[e];if(0!==n){if(n){var i=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;h.message="Loading chunk "+e+" failed.\n("+i+": "+a+")",h.name="ChunkLoadError",h.type=i,h.request=a,n[1](h)}r[e]=void 0}};var f=setTimeout((function(){u({type:"timeout",target:l})}),12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(t)},s.m=e,s.c=i,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(n,i,function(t){return e[t]}.bind(null,i));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="https://shiotsukikaedesari.gitee.io/three-vis-display-editor/",s.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=t,u=u.slice();for(var h=0;h<u.length;h++)t(u[h]);var f=l;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("44ae")},"03b8":function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return l}));var i=n("d4ec"),a=n("bee2"),r=n("262e"),o=n("2caf"),c=n("c84b"),s=n("a201"),u=Object.assign({},c["b"],{vid:"",type:"VisOcean",flow:1/60,elevation:2,azimuth:180,width:100,height:100,waterNormals:"",sunColor:"rgb(255, 255, 255)",waterColor:"rgb(0, 21, 19)",distortionScale:3.7,fog:"",rotation:{x:-.5*Math.PI,y:0,z:0}}),l=function(e){Object(r["a"])(n,e);var t=Object(o["a"])(n);function n(e){var a;Object(i["a"])(this,n),a=t.call(this,e),a.object=new s["a"](new THREE.PlaneGeometry),a.material=a.object.material,a.object.vid=e,a.azimuthBuffer=0,a.elevationBuffer=0,a.flowBuffer=0;var r=a.object.updateMatrixWorld.bind(a.object);return a.object.updateMatrixWorld=function(e){r(e),a.material.uniforms.time.value+=a.flowBuffer},a}return Object(a["a"])(n,[{key:"_setSunPosition",value:function(){var e=new THREE.Vector3,t=THREE.MathUtils.degToRad(90-this.elevationBuffer),n=THREE.MathUtils.degToRad(this.azimuthBuffer);e.setFromSphericalCoords(1,t,n),this.object.material.uniforms.sunDirection.value.copy(e).normalize()}},{key:"_setGeometry",value:function(e,t){var n=Object.assign({},this.object.geometry.parameters);n[e]=t;var i=new THREE.PlaneGeometry(n.width,n.height);this.object.geometry.dispose(),this.object.geometry=i}},{key:"width",value:function(e){this._setGeometry("width",e)}},{key:"height",value:function(e){this._setGeometry("height",e)}},{key:"elevation",value:function(e){this.elevationBuffer=e,this._setSunPosition()}},{key:"azimuth",value:function(e){this.azimuthBuffer=e,this._setSunPosition()}},{key:"waterNormals",value:function(e){e||(this.material.uniforms.normalSampler.value=new THREE.Texture),this.material.uniforms.normalSampler.value=e}},{key:"sunColor",value:function(e){this.material.uniforms.sunColor.value=new THREE.Color(e)}},{key:"waterColor",value:function(e){this.material.uniforms.waterColor.value=new THREE.Color(e)}},{key:"distortionScale",value:function(e){this.material.uniforms.distortionScale.value=e}},{key:"fog",value:function(e){this.object.material.fog=e}},{key:"flow",value:function(e){this.flowBuffer=e}},{key:"scale.x",value:function(){}},{key:"scale.y",value:function(){}},{key:"scale.z",value:function(){}}]),n}(c["a"])},"051bf":function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return u}));var i=n("d4ec"),a=n("bee2"),r=n("262e"),o=n("2caf"),c=n("6397"),s=Object.assign({},c["b"],{type:"VisBoxGeometry",width:10,height:10,depth:10}),u=function(e){Object(r["a"])(n,e);var t=Object(o["a"])(n);function n(e){var a;return Object(i["a"])(this,n),a=t.call(this,e),a.geometry.dispose(),a.geometry=new THREE.BoxBufferGeometry,a}return Object(a["a"])(n,[{key:"_setGeometry",value:function(e,t){var n=Object.assign({},this.geometry.parameters);n[e]=t;var i=new THREE.BoxBufferGeometry(n.width,n.height,n.depth);this._setAnchor(i),this.geometry.dispose(),this.geometry=i}},{key:"width",value:function(e){this._setGeometry("width",e)}},{key:"height",value:function(e){this._setGeometry("height",e)}},{key:"depth",value:function(e){this._setGeometry("depth",e)}}]),n}(c["a"])},"0845":function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return r}));var i=n("d4ec"),a={vid:"",name:"",type:"VisMaterial",alphaTest:0,depthTest:!0,depthWrite:!0,transparent:!1,opacity:0,shadowSide:null,side:THREE.FrontSide,toneMapped:!0,visible:!0},r=function e(t){Object(i["a"])(this,e),this.material=""}},"08a0":function(e,t,n){},"091c":function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return u}));var i=n("d4ec"),a=n("bee2"),r=n("262e"),o=n("2caf"),c=n("0845"),s=Object.assign({},c["b"],{type:"VisMeshPhysicalMaterial",color:"rgb(255, 255, 255)",aoMapIntensity:1,displacementScale:1,displacementBias:0,emissive:"rgb(0, 0, 0)",emissiveIntensity:1,roughness:1,metalness:0,refractionRatio:.98}),u=function(e){Object(r["a"])(n,e);var t=Object(o["a"])(n);function n(e){var a;Object(i["a"])(this,n),a=t.call(this,e);var r=JSON.parse(JSON.stringify(e));return delete r.type,delete r.vid,a.material=new THREE.MeshPhysicalMaterial(r),a}return Object(a["a"])(n,[{key:"color",value:function(e){this.material.color=new THREE.Color(e)}},{key:"emissive",value:function(e){this.material.emissive=new THREE.Color(e)}},{key:"emissiveIntensity",value:function(e){this.material.emissiveIntensity=e}},{key:"roughness",value:function(e){this.material.roughness=e}},{key:"metalness",value:function(e){this.material.metalness=e}}]),n}(c["a"])},"0a5b":function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return h}));var i=n("d4ec"),a=n("bee2"),r=n("257e"),o=n("262e"),c=n("2caf"),s=n("ade3"),u=n("c84b"),l=Object.assign({},u["b"],{type:"VisMesh",material:"",geometry:""}),h=function(e){Object(o["a"])(n,e);var t=Object(c["a"])(n);function n(e){var a;Object(i["a"])(this,n),a=t.call(this,e),a.object=new THREE.Mesh,a.target="";var o=Object(r["a"])(a),c=a.object.updateMatrixWorld.bind(a.object);return a.object.updateMatrixWorld=function(e){c(e),o.target&&o.object.lookAt(o.target)},a.helper.matrix=a.object.matrixWorld,a.helper.add(new THREE.LineSegments(a.object.geometry,n.getHelperMaterial())),a.object.vid=e,a}return Object(a["a"])(n,[{key:"geometry",value:function(e){var t=this.object,n=this.helper.children[0];t.geometry.dispose(),n.geometry.dispose(),t.geometry=e,n.geometry=new THREE.EdgesGeometry(e,5)}},{key:"material",value:function(e){this.object.material=e}},{key:"lookAt",value:function(e){e?(this.target=e.position,this["rotation.x"]=function(){},this["rotation.y"]=function(){},this["rotation.z"]=function(){}):(this.target="",this["rotation.x"]=function(e){this.object.rotation.x=e},this["rotation.y"]=function(e){this.object.rotation.y=e},this["rotation.z"]=function(e){this.object.rotation.z=e})}},{key:"dispose",value:function(){this.object.geometry.dispose();var e=this.helper.children[0];e.geometry.dispose(),e.material.dispose()}}]),n}(u["a"]);Object(s["a"])(h,"getHelperMaterial",(function(){return new THREE.LineBasicMaterial({color:"rgb(100, 100, 100)"})}))},"0dc8":function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return l}));var i=n("d4ec"),a=n("bee2"),r=n("262e"),o=n("2caf"),c=n("3ce1"),s=n("9ab2"),u=Object.assign({},c["b"],{type:"VisUnrealBloomPass",resolution:{x:1,y:1},threshold:.2,strength:.3,radius:.5}),l=function(e){Object(r["a"])(n,e);var t=Object(o["a"])(n);function n(e){var a;return Object(i["a"])(this,n),a=t.call(this,e),a.pass=new s["a"](new THREE.Vector2(e.width,e.height),e.threshold,e.strength,e.radius),a}return Object(a["a"])(n,[{key:"threshold",value:function(e){this.pass.threshold=e}},{key:"strength",value:function(e){this.pass.strength=e}},{key:"radius",value:function(e){this.pass.radius=e}}]),n}(c["a"])},"0dcc":function(e,t,n){"use strict";n("4487")},"0efb":function(e,t,n){"use strict";n("8c47")},1549:function(e,t,n){},"17a9":function(e,t,n){},"1a4b":function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return l}));var i=n("d4ec"),a=n("bee2"),r=n("262e"),o=n("2caf"),c=n("c84b"),s=n("02ba"),u=Object.assign({},c["b"],{type:"VisSky",elevation:2,azimuth:180,size:500,turbidity:3,rayleigh:2,mieCoefficient:.005,mieDirectionalG:.7}),l=function(e){Object(r["a"])(n,e);var t=Object(o["a"])(n);function n(e){var a;return Object(i["a"])(this,n),a=t.call(this,e),a.object=new s["a"],a.material=a.object.material,a.object.vid=e,a.azimuthBuffer=0,a.elevationBuffer=0,a}return Object(a["a"])(n,[{key:"_setSunPosition",value:function(){var e=new THREE.Vector3,t=THREE.MathUtils.degToRad(90-this.elevationBuffer),n=THREE.MathUtils.degToRad(this.azimuthBuffer);e.setFromSphericalCoords(1,t,n),this.material.uniforms.sunPosition.value.copy(e)}},{key:"size",value:function(e){this.object.scale.setScalar(e)}},{key:"elevation",value:function(e){this.elevationBuffer=e,this._setSunPosition()}},{key:"azimuth",value:function(e){this.azimuthBuffer=e,this._setSunPosition()}},{key:"turbidity",value:function(e){this.material.uniforms.turbidity.value=e}},{key:"rayleigh",value:function(e){this.material.uniforms.rayleigh.value=e}},{key:"mieCoefficient",value:function(e){this.material.uniforms.mieCoefficient.value=e}},{key:"mieDirectionalG",value:function(e){this.material.uniforms.mieDirectionalG.value=e}}]),n}(c["a"])},"1c8e":function(e,t,n){},"1f32":function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return l}));var i=n("d4ec"),a=n("bee2"),r=n("257e"),o=n("262e"),c=n("2caf"),s=(n("159b"),n("b64b"),n("a434"),n("caad"),n("2532"),n("c84b")),u=Object.assign({},s["b"],{type:"VisLine",material:"",pointList:[{target:"",x:0,y:5,z:-5},{target:"",x:5,y:5,z:0},{target:"",x:-5,y:-5,z:0},{target:"",x:0,y:-5,z:5}]}),l=function(e){Object(o["a"])(n,e);var t=Object(c["a"])(n);function n(e){var a;Object(i["a"])(this,n),a=t.call(this,e),a.target="",a.autoUpdateVertices=!1,a.updateVerticesMap={},a.bufferPointList=[];var o=new THREE.BufferGeometry;a.object=new THREE.Line(o);var c=Object(r["a"])(a),s=a.object.updateMatrixWorld.bind(a.object);return a.object.updateMatrixWorld=function(e){if(s(e),c.target&&c.object.lookAt(c.target),c.autoUpdateVertices){var t=c.updateVerticesMap;Object.keys(c.updateVerticesMap).forEach((function(e){c._updateVertices(e,t[e])}))}},a.object.vid=e,a.helper.add(new THREE.Points(o,new THREE.PointsMaterial({color:"rgb(100, 100, 100)"}))),a.helper.matrix=a.object.matrixWorld,a}return Object(a["a"])(n,[{key:"_generateGeometry",value:function(e){this.object.geometry.dispose();var t=[],n=new THREE.BufferGeometry;e.forEach((function(e){t.push(e.x),t.push(e.y),t.push(e.z)})),n.setAttribute("position",new THREE.Float32BufferAttribute(t,3)),this.object.geometry=n,this.helper.children[0].geometry=n}},{key:"_updateVertices",value:function(e,t){var n=this.object.geometry.attributes.position;n.setXYZ(e,t.x,t.y,t.z),n.needsUpdate=!0}},{key:"material",value:function(e){this.object.material=e}},{key:"addPoint",value:function(e){this.bufferPointList.push(e),this._generateGeometry(this.bufferPointList)}},{key:"deletePoint",value:function(e){this.bufferPointList.splice(e,1),this._generateGeometry(this.bufferPointList)}},{key:"setPoint",value:function(e,t){t.position?(this.updateVerticesMap[e]=t.position,this.autoUpdateVertices=!0):(this.updateVerticesMap[e]&&delete this.updateVerticesMap[e],0===Object.keys(this.updateVerticesMap).length&&(this.autoUpdateVertices=!1),JSON.stringify(this.bufferPointList[e]).includes(JSON.stringify(t))||(this._updateVertices(e,t),this.bufferPointList[e]=JSON.parse(JSON.stringify(t))))}},{key:"lookAt",value:function(e){e?(this.target=e.position,this["rotation.x"]=function(){},this["rotation.y"]=function(){},this["rotation.z"]=function(){}):(this.target="",this["rotation.x"]=function(e){this.object.rotation.x=e},this["rotation.y"]=function(e){this.object.rotation.y=e},this["rotation.z"]=function(e){this.object.rotation.z=e})}},{key:"dispose",value:function(){this.object.geometry.dispose();var e=this.helper.children[0];e.material.dispose()}}]),n}(s["a"])},"287b":function(e,t,n){},"28d5":function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return u}));var i=n("d4ec"),a=n("bee2"),r=n("262e"),o=n("2caf"),c=(n("d81d"),n("0845")),s=Object.assign({},c["b"],{type:"VisMeshStandardMaterial",color:"rgb(255, 255, 255)",wireframe:!1,aoMapIntensity:1,envMapIntensity:0,emissiveIntensity:1,displacementScale:1,displacementBias:0,emissive:"rgb(0, 0, 0)",roughness:1,metalness:0,refractionRatio:.98,bumpScale:1,map:"",alphaMap:"",bumpMap:"",displacementMap:"",emissiveMap:"",roughnessMap:"",metalnessMap:"",normalMap:""}),u=function(e){Object(r["a"])(n,e);var t=Object(o["a"])(n);function n(e){var a;Object(i["a"])(this,n),a=t.call(this,e);var r=JSON.parse(JSON.stringify(e));return delete r.type,delete r.vid,a.material=new THREE.MeshStandardMaterial(r),a}return Object(a["a"])(n,[{key:"wireframe",value:function(e){this.material.wireframe=e}},{key:"color",value:function(e){this.material.color=new THREE.Color(e)}},{key:"emissive",value:function(e){this.material.emissive=new THREE.Color(e)}},{key:"bumpScale",value:function(e){this.material.bumpScale=e}},{key:"displacementScale",value:function(e){this.material.displacementScale=e}},{key:"displacementBias",value:function(e){this.material.displacementBias=e}},{key:"emissiveIntensity",value:function(e){this.material.emissiveIntensity=e}},{key:"aoMapIntensity",value:function(e){this.material.aoMapIntensity=e}},{key:"envMapIntensity",value:function(e){this.material.envMapIntensity=e}},{key:"roughness",value:function(e){this.material.roughness=e}},{key:"metalness",value:function(e){this.material.metalness=e}},{key:"map",value:function(e){this.material.map=e,this.material.needsUpdate=!0}},{key:"alphaMap",value:function(e){this.material.alphaMap=e,this.material.needsUpdate=!0}},{key:"bumpMap",value:function(e){this.material.bumpMap=e,this.material.needsUpdate=!0}},{key:"displacementMap",value:function(e){this.material.displacementMap=e,this.material.needsUpdate=!0}},{key:"emissiveMap",value:function(e){this.material.emissiveMap=e,this.material.needsUpdate=!0}},{key:"roughnessMap",value:function(e){this.material.roughnessMap=e,this.material.needsUpdate=!0}},{key:"metalnessMap",value:function(e){this.material.metalnessMap=e,this.material.needsUpdate=!0}},{key:"normalMap",value:function(e){this.material.normalMap=e,this.material.needsUpdate=!0}}]),n}(c["a"])},"2c49":function(e,t,n){},"3c8e":function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return u}));var i=n("d4ec"),a=n("bee2"),r=n("262e"),o=n("2caf"),c=n("0845"),s=Object.assign({},c["b"],{type:"VisMeshToonMaterial",color:"rgb(255, 255, 255)",aoMapIntensity:1,displacementScale:1,displacementBias:0,emissive:"rgb(0, 0, 0)",emissiveIntensity:1}),u=function(e){Object(r["a"])(n,e);var t=Object(o["a"])(n);function n(e){var a;Object(i["a"])(this,n),a=t.call(this,e);var r=JSON.parse(JSON.stringify(e));return delete r.type,delete r.vid,a.material=new THREE.MeshToonMaterial(r),a}return Object(a["a"])(n,[{key:"color",value:function(e){this.material.color=new THREE.Color(e)}},{key:"emissive",value:function(e){this.material.emissive=new THREE.Color(e)}},{key:"emissiveIntensity",value:function(e){this.material.emissiveIntensity=e}}]),n}(c["a"])},"3ce1":function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return r}));var i=n("d4ec"),a={vid:"",name:"",type:"VisEffectPass"},r=function e(t){Object(i["a"])(this,e),this.pass=""}},"3e76":function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return u}));var i=n("d4ec"),a=n("bee2"),r=n("262e"),o=n("2caf"),c=n("5222"),s=Object.assign({},c["b"],{type:"VisEmpty"}),u=function(e){Object(r["a"])(n,e);var t=Object(o["a"])(n);function n(e){var a;return Object(i["a"])(this,n),a=t.call(this,e),a.object=new THREE.Object3D,a.setHelper(),a.helper.matrixAutoUpdate=!1,a.helper.matrix=a.object.matrix,a.object.vid=e.vid,a}return Object(a["a"])(n,[{key:"setHelper",value:function(){var e=new THREE.LineSegments(new THREE.EdgesGeometry(new THREE.BoxBufferGeometry(1,1,1)),new THREE.LineBasicMaterial);this.helper.add(e),delete this.setHelper}}]),n}(c["a"])},4207:function(e,t,n){},4487:function(e,t,n){},"44ae":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("b0c0");var i=n("5c96"),a=n.n(i),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"icon-container",style:{"font-size":e.size,color:e.color}},[n("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[n("use",{attrs:{"xlink:href":e.code}})])])},o=[],c={name:"vis-icon",props:{code:{type:String},size:{type:String},color:{type:String}},data:function(){return{}},mounted:function(){},beforeDestroy:function(){}},s=c,u=(n("986e"),n("2877")),l=Object(u["a"])(s,r,o,!1,null,null,null),h=l.exports,f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{"enter-active-class":"animate__animated animate__fadeIn animate__fast","leave-active-class":"animate__animated animate__fadeOut animate__fast"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.value,expression:"value"}],staticClass:"vis-popup-container"},[n("div",{ref:"main",staticClass:"popup-main",style:{width:e.width,height:e.height,minWidth:e.minWidth,minHeight:e.minHeight,marginLeft:-e.marginLeft+"px",marginTop:-e.marginTop+"px",padding:e.padding?"10px":""}},[e.showClose?n("div",{staticClass:"close-button",on:{click:e.close}},[n("vis-icon",{attrs:{code:"#iconguanbi"}})],1):e._e(),e._t("main",[n("div",{staticClass:"popup-header"},[e._t("header",[n("div",{staticClass:"title",style:{fontSize:e.fontSize},domProps:{textContent:e._s(e.title)}})])],2),n("div",{staticClass:"popup-container"},[e._t("container")],2),n("div",{staticClass:"popup-footer"},[e._t("footer")],2)])],2)])])},d=[],m={name:"vis-popup",props:{title:{type:String,default:"vis-popup弹窗"},fontSize:{type:String},size:{type:String},color:{type:String},width:{type:String,default:"30%"},height:{type:String,default:"30%"},minWidth:{type:String},minHeight:{type:String},showClose:{type:Boolean,default:!0},value:{type:Boolean,default:!1},padding:{type:Boolean,default:!0}},data:function(){return{marginLeft:0,marginTop:0}},methods:{cacleCenter:function(){var e=this.$refs.main;this.marginLeft=e.offsetWidth/2,this.marginTop=e.offsetHeight/2},close:function(){this.$emit("close"),this.$emit("input",!1)}},watch:{value:{handler:function(e){var t=this;e&&this.$nextTick((function(){t.cacleCenter()}))},immediate:!0}},mounted:function(){document.addEventListener("onresize",this.cacleCenter)},beforeDestroy:function(){document.removeEventListener("onresize",this.cacleCenter)}},p=m,v=(n("b014"),Object(u["a"])(p,f,d,!1,null,null,null)),b=v.exports,y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-image",{staticClass:"vis-image",style:{width:e.width,height:e.height},attrs:{src:e.src}},[n("div",{attrs:{slot:"placeholder"},slot:"placeholder"},[n("img",{attrs:{src:"/image/loading.gif",alt:"加载中"}})]),n("div",{attrs:{slot:"error"},slot:"error"},[n("img",{attrs:{src:"/image/error.png",alt:"加载失败"}})])])},g=[],E={name:"vis-image",props:{src:{type:String},fit:{type:String,default:"cover"},width:{type:String,default:"100%"},height:{type:String,default:"100%"}},data:function(){return{}},mounted:function(){},beforeDestroy:function(){}},k=E,j=(n("659a"),Object(u["a"])(k,y,g,!1,null,null,null)),w=j.exports,O=function(e){e.component(h.name,h),e.component(b.name,b),e.component(w.name,w)},M=(n("0fae"),n("5488")),x=n.n(M),S=(n("2c49"),n("c10c"),n("452e"),n("77ed"),n("caf9")),C=(n("b680"),{getSize:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return e=e>1048576?"".concat((e/1048576).toFixed(t),"M"):e>1024?"".concat((e/1024).toFixed(t),"kb"):"".concat(e,"B"),e}}),T=(n("d3b7"),n("99af"),n("a026")),R=n("bc3a"),H=n.n(R),_=n("a78e"),L=n.n(_),A="accessToken",P="refreshToken";H.a.defaults.headers.common[A]="",H.a.defaults.headers.common[P]="",H.a.defaults.headers.post["Content-Type"]="application/json;charset=UTF-8";var F={baseURL:Object({NODE_ENV:"production",BASE_URL:"https://shiotsukikaedesari.gitee.io/three-vis-display-editor/"}).baseURL,timeout:6e4},z=H.a.create(F);z.interceptors.request.use((function(e){return e.headers[A]=L.a.get(A)||"",e.headers[P]=L.a.get(P)||"",e}),(function(e){return i["Message"].error("请求有误！"),Promise.reject(e)})),z.interceptors.response.use((function(e){var t=A.toLocaleLowerCase(),n=P.toLocaleLowerCase();return e.headers[t]&&L.a.set(A,e.headers[t]),e.headers[n]&&L.a.set(P,e.headers[n]),200===e.status?e.data:(i["Message"].error("服务器出错：status".concat(e.status)),console.error("".concat(e.status,": ").concat(e.statusText)),!1)}),(function(e){return Promise.reject(e)})),Plugin.install=function(e,t){e.axios=z,window.axios=z,Object.defineProperties(e.prototype,{axios:{get:function(){return z}},$axios:{get:function(){return z}}})},T["default"].use(Plugin);Plugin;var V=n("e37d");T["default"].config.productionTip=!1,T["default"].use(a.a),T["default"].component(x.a.name,x.a),T["default"].use(O),T["default"].use(V["a"]),T["default"].use(S["a"],{error:"/image/error.png",loading:"/image/loading.gif",silent:!1}),T["default"].prototype.$tool=C;n("4abd");var B=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("editor-frame"),n("loading-manager",{directives:[{name:"show",rawName:"v-show",value:e.showLoading,expression:"showLoading"}]})],1)},I=[],N=(n("3ca3"),n("ddb0"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"eidtor-container"},[n("div",{staticClass:"top-area",style:{height:e.topAreaSetting.size+"px"}},[n("top-navigation")],1),n("div",{staticClass:"middle-area",style:{height:e.middleAreaHeight+"px"}},[n("drag-trans-box",{attrs:{rightDrag:"",size:e.leftAreaSetting.size},on:{draging:function(t){return e.draging(t,e.leftAreaSetting)},draged:function(){e.leftAreaSetting.bufferSize=e.leftAreaSetting.size}}},[n("object-library")],1),n("div",{staticClass:"three-vis",style:{width:e.threeVisWidth+"px",height:e.middleAreaHeight+"px"}},[n("render-area",{attrs:{top:e.topAreaSetting.size,left:e.leftAreaSetting.size,width:e.threeVisWidth,height:e.middleAreaHeight}})],1),n("drag-trans-box",{attrs:{leftDrag:"",size:e.rightAreaSetting.size},on:{draging:function(t){return e.draging(t,e.rightAreaSetting)},draged:function(){e.rightAreaSetting.bufferSize=e.rightAreaSetting.size}}},[n("function-module-library")],1)],1),n("drag-trans-box",{staticClass:"bottom-area",attrs:{topDrag:"",size:e.bottomAreaSetting.size},on:{draging:function(t){return e.draging(t,e.bottomAreaSetting)},draged:function(){e.bottomAreaSetting.bufferSize=e.bottomAreaSetting.size}}},[n("animtion-system")],1)],1)}),G=[],D=n("d4ec"),W=n("bee2"),$=(n("4ec9"),n("a15b"),n("3851")),U=n.n($),Z=function(){function e(){Object(D["a"])(this,e),this.keyboardMap=new Map}return Object(W["a"])(e,[{key:"apply",value:function(e){return U.a.bind(e.keyCombine.join(" + "),e.downFun,e.upFun),this}}]),e}(),K=new Z,J=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"dragTransBox-contaner",style:{width:e.leftDrag||e.rightDrag?e.size+"px":e.width,height:e.topDrag||e.bottomDrag?e.size+"px":e.height}},[e.topDrag?n("div",{staticClass:"dragBox-topDrag",on:{mousedown:function(t){return e.dragStart(t,"top")}}},[n("dragSignalRow")],1):e._e(),n("div",{staticClass:"dragBox-middleBox",style:{height:e.topDrag?"calc(100% - 20px)":"100%"}},[e.leftDrag?n("div",{staticClass:"dragBox-leftDrag",on:{mousedown:function(t){return e.dragStart(t,"left")}}},[n("dragSignalColumn")],1):e._e(),n("div",{staticClass:"dragBox-display"},[e._t("default")],2),e.rightDrag?n("div",{staticClass:"dragBox-rightDrag",on:{mousedown:function(t){return e.dragStart(t,"right")}}},[n("dragSignalColumn")],1):e._e()]),e.bottomDrag?n("div",{staticClass:"dragBox-bottomDrag",on:{mousedown:function(t){return e.dragStart(t,"bottom")}}},[n("dragSignalRow")],1):e._e()])},X=[],Y=(n("a9e3"),{props:{width:{type:String,default:"100%"},height:{type:String,default:"100%"},topDrag:{type:Boolean,default:!1},leftDrag:{type:Boolean,default:!1},rightDrag:{type:Boolean,default:!1},bottomDrag:{type:Boolean,default:!1},size:{type:Number,default:100},throttle:{type:Boolean,default:!0},throttleTime:{type:Number,default:1e3/30}},components:{dragSignalRow:{template:'\n      <div class="dragBox-dragSignalRow">\n        <div></div>\n        <div></div>\n        <div></div>\n      </div>\n      '},dragSignalColumn:{template:'\n      <div class="dragBox-dragSignalColumn">\n        <div></div>\n        <div></div>\n        <div></div>\n      </div>\n      '}},data:function(){return{timer:"",canMove:!0}},methods:{dragStart:function(e,t){var n=this,i=function(i){if(document.body.style.cursor=n.topDrag||n.bottomDrag?"ns-resize":"ew-resize",!n.canMove)return!1;n.timer=setTimeout((function(){var a=e.clientX,r=e.clientY,o=i.clientY,c=i.clientX,s={left:a-c,right:-(a-c),top:r-o,bottom:-(r-o)};n.$emit("draging",s[t]),n.canMove=!0}),n.throttleTime)},a=function e(){document.body.style.cursor="default",n.$emit("draged"),document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",e)};document.addEventListener("mousemove",i),document.addEventListener("mouseup",a)}}}),q=Y,Q=(n("c9a8"),Object(u["a"])(q,J,X,!1,null,"11320c39",null)),ee=Q.exports,te=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"renderArea-container",style:{width:e.width+"px",height:e.height+"px"}},[n("div",{ref:"renderAreaLeft",staticClass:"renderArea-left",style:{width:e.leftAreaWidth+"%",height:"100%"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.areaNum>0,expression:"areaNum > 0"}],ref:"leftTopWindow",staticClass:"renderWindow",style:{width:"100%",height:e.leftTopAreaHeight+"%"}},[n("render-window",{attrs:{sign:"first",render:e.areaNum>0}}),n("div",{directives:[{name:"show",rawName:"v-show",value:e.areaNum>2,expression:"areaNum > 2"}],staticClass:"bottom-drag-line",on:{mousedown:function(t){return e.dragStart(t,"bottomLeft")}}})],1),n("div",{directives:[{name:"show",rawName:"v-show",value:e.areaNum>2,expression:"areaNum > 2"}],staticClass:"renderWindow",style:{width:"100%",height:100-e.leftTopAreaHeight+"%"}},[n("render-window",{attrs:{sign:"third",viewpoint:"right",render:e.areaNum>2}})],1),n("div",{directives:[{name:"show",rawName:"v-show",value:e.areaNum>1,expression:"areaNum > 1"}],staticClass:"middle-drag-line",on:{mousedown:function(t){return e.dragStart(t,"middle")}}})]),n("div",{directives:[{name:"show",rawName:"v-show",value:e.areaNum>1,expression:"areaNum > 1"}],staticClass:"renderArea-right",style:{width:100-e.leftAreaWidth+"%",height:"100%"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.areaNum>1,expression:"areaNum > 1"}],ref:"rightTopWindow",staticClass:"renderWindow",style:{width:"100%",height:e.rightTopAreaHeight+"%"}},[n("render-window",{attrs:{sign:"second",viewpoint:"front",render:e.areaNum>1}}),n("div",{directives:[{name:"show",rawName:"v-show",value:e.areaNum>3,expression:"areaNum > 3"}],staticClass:"bottom-drag-line",on:{mousedown:function(t){return e.dragStart(t,"bottomRight")}}})],1),n("div",{directives:[{name:"show",rawName:"v-show",value:e.areaNum>3,expression:"areaNum > 3"}],staticClass:"renderWindow",style:{width:"100%",height:100-e.rightTopAreaHeight+"%"}},[n("render-window",{attrs:{sign:"fouth",viewpoint:"top",render:e.areaNum>3}})],1)])])},ne=[],ie=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"renderElement",staticClass:"renderWindow-container"},[n("iframe",{ref:"renderMask",staticClass:"render-mask",attrs:{width:"100%",height:"100%",scrolling:"no"}}),n("position-layout-box",{staticClass:"bottom-function-box",attrs:{offsetX:5,offsetY:5,isBottom:!0},scopedSlots:e._u([{key:"main",fn:function(){return[n("render-viewpoint",{directives:[{name:"show",rawName:"v-show",value:e.showRenderViewPoint,expression:"showRenderViewPoint"}],attrs:{viewpoint:e.viewpoint,connector:e.connector}}),n("auxiliary-display",{attrs:{connector:e.connector}}),n("camera-viewpoint",{ref:"cameraViewpoint",attrs:{viewpoint:e.viewpoint,connector:e.connector,cameraList:e.cameraList},on:{changeCamera:e.changeCamera}})]},proxy:!0}])}),n("position-layout-box",{staticClass:"bottom-function-box",attrs:{offsetX:5,offsetY:5,isBottom:!0,isRight:!0},scopedSlots:e._u([{key:"main",fn:function(){return[n("render-mode",{attrs:{connector:e.connector}})]},proxy:!0}])}),n("position-layout-box",{staticClass:"top-function-box",attrs:{offsetX:5,offsetY:5},scopedSlots:e._u([{key:"main",fn:function(){return[n("performance-monitor",{attrs:{connector:e.connector}})]},proxy:!0}])})],1)},ae=[],re=(n("159b"),n("fb6a"),n("b64b"),n("caad"),n("2532"),n("a434"),n("d81d"),function(){function e(){Object(D["a"])(this,e)}return Object(W["a"])(e,[{key:"apply",value:function(e,t){var n=this;t.forEach((function(t){void 0!==e[t]&&Object.defineProperty(n,t,{value:e[t],configrable:!1})}))}}]),e}()),oe=re,ce=n("53ca"),se=n("ade3"),ue=(n("6062"),n("32d9")),le=n("93e9"),he=n("4721"),fe=n("b1f1"),de=n("ef20"),me=function(){function e(t){Object(D["a"])(this,e),this.dom=t,this.stats=new de["a"];var n=this.stats,i=n.domElement.style;i.position="absolute",i.zIndex=3,i.left="50px",i.top="0px"}return Object(W["a"])(e,[{key:"show",value:function(){this.dom.appendChild(this.stats.domElement)}},{key:"dispose",value:function(){try{this.dom.removeChild(this.stats.domElement)}catch(e){}}},{key:"set",value:function(){}},{key:"update",value:function(){this.stats.update()}}]),e}(),pe=me,ve=(n("10d1"),function(){function e(t,n,i,a){Object(D["a"])(this,e),this.scene=t,this.camera=n,this.renderer=i,this.composer=a,this.mode=3,this.ambientLightBuffer="",this.fogBuffer="",this.backgroundBuffer="",this.environmentBuffer="",this.lightBuffer=new Set,this.materialBuffer=new WeakMap,this.overrideMaterial=new THREE.MeshLambertMaterial({color:"rgb(220, 220, 220)"}),this.lineOverrideMaterial=new THREE.LineBasicMaterial({color:"rgb(220, 220, 220)"}),this.basicAmbientLight=new THREE.AmbientLight("rgb(255, 255, 255)",.7),this.basicDirectionalLight=new THREE.DirectionalLight(16777215,.3),this.hasBasicLight=!1,this.hasAmbientLight=!1}return Object(W["a"])(e,[{key:"setCamera",value:function(e){this.camera=e}},{key:"setScene",value:function(e){this.scene=e}},{key:"setMode",value:function(e){this.mode=e}},{key:"render",value:function(){var e=this;this.hasAmbientLight||this.foundAmbientLight();var t={0:function(){e.geometryMode(),e.renderer.render(e.scene,e.camera)},1:function(){e.materialMode(),e.renderer.render(e.scene,e.camera)},2:function(){e.lightMode(),e.renderer.render(e.scene,e.camera)},3:function(){e.allMode(),e.composer.render()}};t[this.mode]()}},{key:"foundAmbientLight",value:function(){var e=this,t=this.scene;t.children.some((function(t){if("AmbientLight"===t.type&&t!==e.basicAmbientLight)return e.ambientLightBuffer=t,e.hasAmbientLight=!0,!0}))}},{key:"_reduceScene",value:function(){var e=this.scene;this.hasBasicLight&&(e.remove(this.basicAmbientLight),e.remove(this.basicDirectionalLight),this.hasAmbientLight&&(e.add(this.ambientLightBuffer),this.hasBasicLight=!1)),this.fogBuffer&&(e.fog=this.fogBuffer,this.fogBuffer=null),this.backgroundBuffer&&(e.background=this.backgroundBuffer,this.backgroundBuffer=null),this.environmentBuffer&&(e.environment=this.environmentBuffer,this.environmentBuffer=null)}},{key:"_filterScene",value:function(){var e=this.scene;this.hasBasicLight||(e.add(this.basicAmbientLight),e.add(this.basicDirectionalLight),this.hasAmbientLight&&(e.remove(this.ambientLightBuffer),this.hasBasicLight=!0)),e.fog&&(this.fogBuffer=e.fog,e.fog=null),e.background&&(this.backgroundBuffer=e.background,e.background=null),e.environment&&(this.environmentBuffer=e.environment,e.environment=null)}},{key:"_replaceMaterial",value:function(e){var t=this.materialBuffer;return["Mesh"].includes(e.type)?(t.has(e)?e.material!==this.overrideMaterial&&(t.set(e,e.material),e.material=this.overrideMaterial):(t.set(e,e.material),e.material=this.overrideMaterial),!1):!["Line","LineSegments"].includes(e.type)||void(t.has(e)?e.material!==this.lineOverrideMaterial&&(t.set(e,e.material),e.material=this.lineOverrideMaterial):(t.set(e,e.material),e.material=this.lineOverrideMaterial))}},{key:"_reduceMaterial",value:function(e){var t=this.materialBuffer;return!["Mesh","Line","LineSegments"].includes(e.type)||!t.has(e)||(e.material=t.get(e),t.delete(e),!1)}},{key:"_removeLight",value:function(e){var t=this.scene,n=this.lightBuffer;return!(("PointLight"===e.type||"DirectionalLight"===e.type&&e!==this.basicDirectionalLight||"SpotLight"===e.type)&&!n.has(e))||(n.add(e),t.remove(e),!1)}},{key:"_reduceLight",value:function(){var e=this.scene,t=this.lightBuffer;t.forEach((function(n){e.add(n),t.delete(n)}))}},{key:"geometryMode",value:function(){var e=this;this._filterScene();var t=function t(n){n.forEach((function(n){"Group"===n.type?t(n.children):e._replaceMaterial(n)&&e._removeLight(n)}))};t(this.scene.children)}},{key:"materialMode",value:function(){var e=this;this._filterScene();var t=function t(n){n.forEach((function(n){"Group"===n.type?t(n.children):e._reduceMaterial(n)&&e._removeLight(n)}))};t(this.scene.children)}},{key:"lightMode",value:function(){var e=this;this._filterScene();var t=function t(n){n.forEach((function(n){"Group"===n.type?t(n.children):e._reduceMaterial(n)}))};t(this.scene.children),this._reduceLight()}},{key:"allMode",value:function(){var e=this;this._reduceScene();var t=function t(n){n.forEach((function(n){"Group"===n.type?t(n.children):e._reduceMaterial(n)}))};t(this.scene.children),this._reduceLight()}}]),e}()),be=ve,ye=(n("35b3"),n("4c53"),function(){function e(t,n,i){Object(D["a"])(this,e),this.camera=t,this.scene=n,this.startPoint=new THREE.Vector3,this.endPoint=new THREE.Vector3,this.collection=new Set,this.deep=i||Number.MAX_VALUE,this.frustum=new THREE.Frustum}return Object(W["a"])(e,[{key:"select",value:function(e,t){return this.startPoint=e||this.startPoint,this.endPoint=t||this.endPoint,this.collection.clear(),this.updateFrustum(this.startPoint,this.endPoint),this.searchChildInFrustum(this.frustum,this.scene),this.collection}},{key:"updateFrustum",value:function(e,t){var n=this.frustum,i=new THREE.Vector3,a=new THREE.Vector3,r=new THREE.Vector3,o=new THREE.Vector3,c=new THREE.Vector3,s=new THREE.Vector3,u=new THREE.Vector3,l=new THREE.Vector3,h=new THREE.Vector3,f=new THREE.Vector3,d=new THREE.Vector3,m=new THREE.Vector3,p=new THREE.Vector3;if(e=e||this.startPoint,t=t||this.endPoint,e.x===t.x&&(t.x+=Number.EPSILON),e.y===t.y&&(t.y+=Number.EPSILON),this.camera.updateProjectionMatrix(),this.camera.updateMatrixWorld(),this.camera.isPerspectiveCamera){i.copy(e),i.x=Math.min(e.x,t.x),i.y=Math.max(e.y,t.y),t.x=Math.max(e.x,t.x),t.y=Math.min(e.y,t.y),a.setFromMatrixPosition(this.camera.matrixWorld),r.copy(i),o.set(t.x,i.y,0),c.copy(t),s.set(i.x,t.y,0),r.unproject(this.camera),o.unproject(this.camera),c.unproject(this.camera),s.unproject(this.camera),d.copy(r).sub(a),m.copy(o).sub(a),p.copy(c).sub(a),d.normalize(),m.normalize(),p.normalize(),d.multiplyScalar(this.deep),m.multiplyScalar(this.deep),p.multiplyScalar(this.deep),d.add(a),m.add(a),p.add(a);var v=n.planes;v[0].setFromCoplanarPoints(a,r,o),v[1].setFromCoplanarPoints(a,o,c),v[2].setFromCoplanarPoints(c,s,a),v[3].setFromCoplanarPoints(s,r,a),v[4].setFromCoplanarPoints(o,c,s),v[5].setFromCoplanarPoints(p,m,d),v[5].normal.multiplyScalar(-1)}else if(this.camera.isOrthographicCamera){var b=Math.min(e.x,t.x),y=Math.max(e.y,t.y),g=Math.max(e.x,t.x),E=Math.min(e.y,t.y);r.set(b,y,-1),o.set(g,y,-1),c.set(g,E,-1),s.set(b,E,-1),u.set(b,y,1),l.set(g,y,1),h.set(g,E,1),f.set(b,E,1),r.unproject(this.camera),o.unproject(this.camera),c.unproject(this.camera),s.unproject(this.camera),u.unproject(this.camera),l.unproject(this.camera),h.unproject(this.camera),f.unproject(this.camera);var k=n.planes;k[0].setFromCoplanarPoints(r,u,l),k[1].setFromCoplanarPoints(o,l,h),k[2].setFromCoplanarPoints(h,f,s),k[3].setFromCoplanarPoints(f,u,r),k[4].setFromCoplanarPoints(o,c,s),k[5].setFromCoplanarPoints(h,l,u),k[5].normal.multiplyScalar(-1)}else console.error("THREE.SelectionBox: Unsupported camera type.")}},{key:"searchChildInFrustum",value:function(e,t){var n=new THREE.Vector3;if("Mesh"!==t.type&&"LightMesh"!==t.type||void 0!==t.material&&(null===t.geometry.boundingSphere&&t.geometry.computeBoundingSphere(),n.copy(t.geometry.boundingSphere.center),n.applyMatrix4(t.matrixWorld),e.containsPoint(n)&&this.collection.add(t)),"Scene"===t.type&&t.children.length>0)for(var i=0;i<t.children.length;i++)this.searchChildInFrustum(e,t.children[i])}}]),e}()),ge=function(){function e(t,n){var i=this;Object(D["a"])(this,e),this.element=document.createElement("div"),this.element.classList.add(n),this.element.style.pointerEvents="none",this.dom=t,this.startPoint=new THREE.Vector2,this.pointTopLeft=new THREE.Vector2,this.pointBottomRight=new THREE.Vector2,this.isDown=!1,this.downFun=function(e){i.isDown=!0,i.onSelectStart(e)},this.moveFun=function(e){i.isDown&&i.onSelectMove(e)},this.upFun=function(e){i.isDown&&(i.isDown=!1,i.onSelectOver(e))}}return Object(W["a"])(e,[{key:"onSelectStart",value:function(e){this.dom.appendChild(this.element),this.element.style.left=e.clientX+"px",this.element.style.top=e.clientY+"px",this.element.style.width="0px",this.element.style.height="0px",this.startPoint.x=e.clientX,this.startPoint.y=e.clientY}},{key:"onSelectMove",value:function(e){this.pointBottomRight.x=Math.max(this.startPoint.x,e.clientX),this.pointBottomRight.y=Math.max(this.startPoint.y,e.clientY),this.pointTopLeft.x=Math.min(this.startPoint.x,e.clientX),this.pointTopLeft.y=Math.min(this.startPoint.y,e.clientY),this.element.style.left=this.pointTopLeft.x+"px",this.element.style.top=this.pointTopLeft.y+"px",this.element.style.width=this.pointBottomRight.x-this.pointTopLeft.x+"px",this.element.style.height=this.pointBottomRight.y-this.pointTopLeft.y+"px"}},{key:"onSelectOver",value:function(){this.dom.removeChild(this.element)}}]),e}(),Ee=function(){function e(t,n,i,a){var r=this;Object(D["a"])(this,e),this.dom=t,this.camera=n,this.scene=i,this.transformControls=a,this.raycaster=new THREE.Raycaster,this.mouse=new THREE.Vector2,this.timer="",this.canMove=!0,this.throttleTime=1e3/30,this.selectionBox=new ye(n,i),this.SelectionHelper=new ge(t,"vis-select-box"),this.selectionBox.collection=new Set,this._hoverObject="";var o=function(e){if(!r.canMove)return!1;r.canMove=!1,r.timer=setTimeout((function(){if(!r.transformControls.dragging){r.SelectionHelper.moveFun(e);var t=r.mouse;t.x=e.offsetX/r.dom.offsetWidth*2-1,t.y=-e.offsetY/r.dom.offsetHeight*2+1,r.raycaster.setFromCamera(t,r.camera);var n=r.raycaster.intersectObjects(r.scene.children);n[0]?r.hoverObject=n[0].object:r.hoverObject=""}r.canMove=!0}),r.throttleTime)},c=function(e){if(0===e.button&&!r.transformControls.dragging){r.SelectionHelper.downFun(e);var t=r.selectionBox;t.collection.clear(),t.startPoint.set(r.mouse.x,r.mouse.y,.5)}},s=function(e){if(0===e.button&&!r.transformControls.dragging&&r.SelectionHelper.isDown){r.SelectionHelper.upFun(e);var t=r.selectionBox;t.endPoint.set(r.mouse.x,r.mouse.y,.5),t.select(),r.hoverObject&&r.selectionBox.collection.add(r.hoverObject),r.active(e,r.selectionBox.collection)}else 0===e.button&&r.drop(r._hoverObject)};t.addEventListener("pointermove",o),t.addEventListener("pointerdown",c),t.addEventListener("pointerup",s)}return Object(W["a"])(e,[{key:"hoverObject",get:function(){return this._hoverObject},set:function(e){this._hoverObject=e,this.hover(e)}},{key:"hover",value:function(){}},{key:"active",value:function(){}},{key:"drop",value:function(){}},{key:"setCamera",value:function(e){this.camera=e,this.selectionBox.camera=e}}]),e}(),ke=Ee,je=function(){function e(t){Object(D["a"])(this,e),this.buffer=new Set,this.scene=t}return Object(W["a"])(e,[{key:"hideHelper",value:function(){var e=this.buffer,t=this.scene,n=function n(i){i.forEach((function(i){"Group"===i.type?n(i.children):"VisHelper"!==i.type||e.has(i)||(e.add(i),t.remove(i))}))};n(t.children)}},{key:"showHelper",value:function(){var e=this.buffer,t=this.scene;e.forEach((function(n){t.add(n),e.delete(n)}))}}]),e}(),we=je,Oe=function(){function e(t){Object(D["a"])(this,e),this.scene=t,this.map=new Map,this.broadcastSet=new Set}return Object(W["a"])(e,[{key:"apply",value:function(e){this.broadcastSet.add(e)}},{key:"cancel",value:function(e){this.broadcast.has(e)&&this.broadcastSet.delete(e)}},{key:"broadcast",value:function(){var e=this;this.broadcastSet.forEach((function(t){t(e.getList())}))}},{key:"getList",value:function(){var e=[];return this.map.forEach((function(t,n){e.push(n)})),e}},{key:"get",value:function(){return this.map}},{key:"set",value:function(e){this.map.set(e,!0),this.broadcast()}},{key:"delete",value:function(e){this.map.delete(e),this.broadcast()}}]),e}(),Me=Oe,xe=function e(t){var n=this;Object(D["a"])(this,e),Object(se["a"])(this,"setOrthographicCamera",(function(){})),Object(se["a"])(this,"setPerspectiveCamera",(function(){})),Object(se["a"])(this,"setRenderMode",(function(e){n.modeManager.setMode(e)})),Object(se["a"])(this,"setAxesHelper",(function(e){e?n.scene.add(n.axesHelper):n.scene.remove(n.axesHelper)})),Object(se["a"])(this,"setGridHelper",(function(e){var t={show:function(){e.show?(n.scene.add(n.horizontalGridHelper),n.scene.add(n.verticalGridHelper),n.scene.add(n.positiveGridHelper)):(n.scene.remove(n.horizontalGridHelper),n.scene.remove(n.verticalGridHelper),n.scene.remove(n.positiveGridHelper))}};Object.keys(e).forEach((function(e){t[e]()}))})),Object(se["a"])(this,"setObjectHelper",(function(e){e?(n.removeRender("hideObjectHelper"),n.objectHelperManager.showHelper()):n.addRender("hideObjectHelper",n.objectHelperManager.hideHelper.bind(n.objectHelperManager))})),Object(se["a"])(this,"setSize",(function(){var e=n.dom.offsetWidth,t=n.dom.offsetHeight;"PerspectiveCamera"===n.camera.type?(n.camera.aspect=e/t,n.camera.updateProjectionMatrix()):"OrthographicCamera"===n.camera.type&&(n.camera.left=e/-16,n.camera.right=e/16,n.camera.bottom=t/-16,n.camera.top=t/16,n.camera.updateProjectionMatrix()),n.renderer.setSize(e,t),n.composer.setSize(e,t)})),Object(se["a"])(this,"setCameraViewpoint",(function(t){if("object"!==Object(ce["a"])(t))e.removeRender("rendererViewpoint"),n.bufferCamera=null,delete n.bufferCamera,n.renderer.setScissorTest(!1),n.setViewpoint(t);else if(n.horizontalGridHelper.visible=!0,n.verticalGridHelper.visible=!1,n.positiveGridHelper.visible=!1,n.renderScene.camera=t,n.bufferCamera=t,n.modeManager.setCamera(t),"PerspectiveCamera"===t.type){var i=function(){var e=this.dom.offsetWidth,t=this.dom.offsetHeight,n=this.bufferCamera.aspect,i="",a="",r=0,o=0;n>=1?(i=e,a=i/n,o=t/2-a/2):(a=t,i=a*n,r=e/2-i/2);var c=this.renderer;c.setScissor(r,o,i,a),c.setScissorTest(!0),c.setViewport(r,o,i,a)};n.addRender("rendererViewpoint",i.bind(n))}})),Object(se["a"])(this,"setViewpoint",(function(e){var t={default:function(){n.camera=n.perspectiveCamera;var e=n.orbitControls;e.enablePan=!0,e.enableRotate=!0,e.enableZoom=!0,n.horizontalGridHelper.visible=!0,n.verticalGridHelper.visible=!1,n.positiveGridHelper.visible=!1},top:function(){n.camera=n.orthographicCamera;var e=n.camera;e.position.set(0,100,0),e.up.set(0,0,-1);var t=n.orbitControls;t.enablePan=!0,t.enableRotate=!1,t.enableZoom=!0,n.horizontalGridHelper.visible=!0,n.verticalGridHelper.visible=!1,n.positiveGridHelper.visible=!1},bottom:function(){n.camera=n.orthographicCamera;var e=n.camera;e.position.set(0,-100,0),e.up.set(0,0,1);var t=n.orbitControls;t.enablePan=!0,t.enableRotate=!1,t.enableZoom=!0,n.horizontalGridHelper.visible=!0,n.verticalGridHelper.visible=!1,n.positiveGridHelper.visible=!1},right:function(){n.camera=n.orthographicCamera;var e=n.camera;e.position.set(100,0,0),e.up.set(0,1,0);var t=n.orbitControls;t.enablePan=!0,t.enableRotate=!1,t.enableZoom=!0,n.horizontalGridHelper.visible=!1,n.verticalGridHelper.visible=!0,n.positiveGridHelper.visible=!1},left:function(){n.camera=n.orthographicCamera;var e=n.camera;e.position.set(-100,0,0),e.up.set(0,1,0);var t=n.orbitControls;t.enablePan=!0,t.enableRotate=!1,t.enableZoom=!0,n.horizontalGridHelper.visible=!1,n.verticalGridHelper.visible=!0,n.positiveGridHelper.visible=!1},front:function(){n.camera=n.orthographicCamera;var e=n.camera;e.position.set(0,0,100),e.up.set(0,1,0);var t=n.orbitControls;t.enablePan=!0,t.enableRotate=!1,t.enableZoom=!0,n.horizontalGridHelper.visible=!1,n.verticalGridHelper.visible=!1,n.positiveGridHelper.visible=!0},back:function(){n.camera=n.orthographicCamera;var e=n.camera;e.position.set(0,0,-100),e.up.set(0,1,0);var t=n.orbitControls;t.enablePan=!0,t.enableRotate=!1,t.enableZoom=!0,n.horizontalGridHelper.visible=!1,n.verticalGridHelper.visible=!1,n.positiveGridHelper.visible=!0}};t[e](),n.transformControls.camera=n.camera,n.renderScene.camera=n.camera,n.orbitControls.object=n.camera,n.orbitControls.target=new THREE.Vector3(0,0,0),n.orbitControls.update(),n.mouseManager.setCamera(n.camera),n.modeManager.setCamera(n.camera),n.setSize()})),Object(se["a"])(this,"setTransformControls",(function(e){n.transformControls.visible=e})),Object(se["a"])(this,"setRenderer",(function(e){n.renderer.shadowMap.enabled=e["shadowMap.enabled"],n.renderer.shadowMap.type=e["shadowMap.type"],n.renderer.toneMapping=e.toneMapping,n.renderer.toneMappingExposure=e.toneMappingExposure,n.renderer.outputEncoding=e.outputEncoding,n.renderer.setClearColor(e.bgColor)})),Object(se["a"])(this,"setStats",(function(e){e?(n.visStats.show(),n.addRender("visStats.update",n.visStats.update.bind(n.visStats))):(n.visStats.dispose(),n.removeRender("visStats.update"))})),Object(se["a"])(this,"removeState",(function(){var e=document.getElementById("".concat(n.sign,"State"));n.dom.removeChild(e),n.removeRender("state.update")})),Object(se["a"])(this,"addRender",(function(t,i){n.renderMap[t]?console.warn("this engine has already exists this ".concat(t," function")):(n.renderMap[t]=i,e.addRender(i))})),Object(se["a"])(this,"removeRender",(function(t){n.renderMap[t]?(e.removeRender(n.renderMap[t]),delete n.renderMap[t]):console.warn("this engine has not this ".concat(t," function"))})),Object(se["a"])(this,"updateRenderer",(function(){var t=n.renderMap;Object.keys(t).forEach((function(n){e.addRender(t[n])}))})),Object(se["a"])(this,"stopUpdateRenderer",(function(){var t=n.renderMap;Object.keys(t).forEach((function(n){e.removeRender(t[n])}))})),this.dom=t,this.scene=new THREE.Scene,this.visStats=new pe(t),this.objectHelperManager=new we(this.scene),this.cameraManager=new Me(this.scene),this.orthographicCamera=new THREE.OrthographicCamera(window.innerWidth/-16,window.innerWidth/16,window.innerHeight/16,window.innerHeight/-16,1,1e4),this.perspectiveCamera=new THREE.PerspectiveCamera(45,window.innerWidth/window.innerHeight,1,1e3),this.axesHelper=new THREE.Object3D,this.axesHelper.add(new THREE.AxesHelper(500));var i=function(){var e=new THREE.GridHelper(500,50,"rgb(130, 130, 130)","rgb(70, 70, 70)");return e.material.transparent=!0,e.material.opacity=.5,e.material.needsUpdate=!0,e};this.horizontalGridHelper=new THREE.Object3D,this.horizontalGridHelper.add(i()),this.verticalGridHelper=new THREE.Object3D,this.verticalGridHelper.add(i()),this.verticalGridHelper.rotation.set(0,0,90*Math.PI/180),this.positiveGridHelper=new THREE.Object3D,this.positiveGridHelper.add(i()),this.positiveGridHelper.rotation.set(90*Math.PI/180,0,0),this.perspectiveCamera.position.set(30,30,30),this.perspectiveCamera.up.set(0,1,0),this.perspectiveCamera.lookAt(0,0,0),this.orthographicCamera.position.set(0,10,0),this.orthographicCamera.up.set(0,1,0),this.orthographicCamera.lookAt(0,0,0),this.camera=this.perspectiveCamera,this.renderer=new THREE.WebGLRenderer({antialias:!0}),this.orbitControls=new he["a"](this.camera,this.renderer.domElement),this.orbitControls.mouseButtons={LEFT:null,MIDDLE:THREE.MOUSE.DOLLY,RIGHT:THREE.MOUSE.ROTATE},this.transformControls=new fe["a"](this.camera,this.renderer.domElement),this.mouseManager=new ke(t,this.camera,this.scene,this.transformControls);var a={format:THREE.RGBFormat},r=this.renderer.getDrawingBufferSize(new THREE.Vector2),o=new THREE.WebGLMultisampleRenderTarget(r.width,r.height,a);this.composer=new ue["a"](this.renderer,o),this.renderScene=new le["a"](this.scene,this.camera),this.composer.addPass(this.renderScene),this.modeManager=new be(this.scene,this.camera,this.renderer,this.composer),this.scene.add(this.camera),this.dom.appendChild(this.renderer.domElement),this.renderMap={},this.addRender("modeManager.render",this.modeManager.render.bind(this.modeManager))};Object(se["a"])(xe,"clock",new THREE.Clock),Object(se["a"])(xe,"renderSet",new Set),Object(se["a"])(xe,"addRender",(function(e){xe.renderSet.has(e)?console.warn("VisEngine has already exists this ".concat(e)):(xe.renderSet.add(e),xe.checkRender())})),Object(se["a"])(xe,"removeRender",(function(e){xe.renderSet.has(e)&&(xe.renderSet.delete(e),xe.checkRender())})),Object(se["a"])(xe,"checkRender",(function(){xe.renderSet.size>0&&!xe.animationFrame?xe.updateRenderer():xe.renderSet.size<=0&&xe.stopUpdateRenderer()})),Object(se["a"])(xe,"updateRenderer",(function(){var e=xe.clock.getDelta(),t=xe.renderSet;t.forEach((function(t){t(e)})),xe.animationFrame=requestAnimationFrame((function(){return xe.updateRenderer()}))})),Object(se["a"])(xe,"stopUpdateRenderer",(function(){cancelAnimationFrame(xe.animationFrame),xe.animationFrame=""}));var Se=xe,Ce=n("ec26"),Te=(n("5d41"),n("7ed3"),n("ac16"),n("1fe2"),function(){function e(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];Object(D["a"])(this,e),this.recursion=t,this.notice={},this.broadcastList=[],this.timer="",this.throttleTime=1e3/45,this.canBroadcast=!0}return Object(W["a"])(e,[{key:"addNotice",value:function(e){var t=e.operate,n=e.path,i=e.key,a=e.value,r={__poto__:!0,length:!0};if(r[i])return!1;var o="".concat(n.join("."),".").concat(i);this.notice[o]&&delete this.notice[o],this.notice[o]={operate:t,path:n,key:i,value:a},this.broadcast()}},{key:"broadcast",value:function(){var e=this;this.broadcastList.forEach((function(t){t(e.notice)})),this.notice={}}},{key:"apply",value:function(e){this.broadcastList.push(e)}},{key:"cancel",value:function(e){var t=this;this.broadcastList.forEach((function(n,i,a){e===n&&t.broadcastList.splice(i,1)}))}},{key:"toProxy",value:function(t,n){if(n||(n=[]),e.proxyList.has(t)||"object"!==Object(ce["a"])(t)&&null!==t)return!1;var i=this,a={get:function(e,t){return Reflect.get(e,t)},set:function(a,r,o){if(void 0===a[r]){if("object"===Object(ce["a"])(o)&&null!==o&&i.recursion){var c=n.concat([r]);o=i.toProxy(o,c)}i.addNotice({operate:"add",path:n.concat([]),key:r,value:o})}else{if("object"===Object(ce["a"])(o)&&!e.proxyList.has(t)){var s=n.concat([r]);o=i.toProxy(o,s)}i.addNotice({operate:"set",path:n.concat([]),key:r,value:o})}return Reflect.set(a,r,o)},deleteProperty:function(e,t){return i.addNotice({operate:"delete",path:n.concat([]),key:t,value:""}),Reflect.deleteProperty(e,t)}};if("object"===Object(ce["a"])(t)&&null!==t&&this.recursion)for(var r in t){var o=n.concat([r]);"object"===Object(ce["a"])(t[r])&&null!==t[r]&&(t[r]=this.toProxy(t[r],o))}return new Proxy(t,a)}}]),e}());Object(se["a"])(Te,"proxyList",new WeakSet);var Re=Te,He=function(){function e(){var t=this;Object(D["a"])(this,e),Object(se["a"])(this,"setRule",(function(e){t.rule=e})),Object(se["a"])(this,"listen",(function(e){t.outputList.forEach((function(n){t.rule(e,n)}))})),this.rule="",this.outputList=[]}return Object(W["a"])(e,[{key:"add",value:function(e){this.outputList.push(e)}},{key:"remove",value:function(e){var t=this;this.outputList.forEach((function(n,i,a){n===e&&t.outputList.splice(i,1)}))}}]),e}(),_e=He,Le=n("257e"),Ae=n("262e"),Pe=n("2caf"),Fe=function e(){Object(D["a"])(this,e),Object(se["a"])(this,"runtimeCompile",(function(){}))};Object(se["a"])(Fe,"getFunMap",(function(e){var t={},n=function e(n,i){Object.keys(n).forEach((function(a){"object"===Object(ce["a"])(n[a])&&null!==n[a]?e(n[a],i.concat([a])):t[i.concat([a]).join(".")]=n[a]}))};return n(e,[]),t}));var ze=Fe,Ve=n("051bf"),Be=n("6f97"),Ie=n("b392"),Ne=n("bf29"),Ge=n("8808"),De=function(e){Object(Ae["a"])(n,e);var t=Object(Pe["a"])(n);function n(e){var i;return Object(D["a"])(this,n),i=t.call(this),Object(se["a"])(Object(Le["a"])(i),"runtimeCompile",(function(e){var t=e.operate,n=e.vid,a=e.key,r=e.value,o={add:function(){i.add(r)},set:function(){i.set(n,a,r)},delete:function(){i.delete(n)}};o[t]()})),i.target=e,i.map={},i.loadObjectMap="",i}return Object(W["a"])(n,[{key:"applyLoadObjectMapper",value:function(e){this.loadObjectMap=e}},{key:"add",value:function(e){var t=this,n=JSON.parse(JSON.stringify(e)),i=n.vid,a={VisBoxGeometry:function(){return new Ve["a"](i)},VisConeGeometry:function(){return new Be["a"](i)},VisSphereGeometry:function(){return new Ie["a"](i)},VisLoaderGeometry:function(){return new Ge["a"](i)},VisPlaneGeometry:function(){return new Ne["a"](i)}},r=a[n.type]();this.map[i]=r;var o=ze.getFunMap(n);Object.keys(o).forEach((function(e){t.set(i,e,o[e])}))}},{key:"set",value:function(e,t,n){var i=this.map[e];if(i[t]){if("url"===t){if(!this.loadObjectMap[n])return console.error("can not found loadObject: ".concat(n)),!1;n=this.loadObjectMap[n]}i[t](n)}else console.warn("visGeometry ".concat(e," has not the set function: ").concat(t))}},{key:"delete",value:function(e){var t=this.map[e];t.dispose(),delete this.map[e]}},{key:"compileScene",value:function(){var e=this,t=this.target;Object.keys(t).forEach((function(n){var i=t[n];e.add(i)}))}},{key:"clearCompileScene",value:function(){}}]),n}(ze),We=De,$e=function(e,t){Object.keys(e).forEach((function(n){var i=e[n],a=i.path.concat([]),r="",o="";"set"===i.operate?(r=a.shift(),o=0===a.length?i.key:"".concat(a.join("."),".").concat(i.key)):"delete"===i.operate&&(r=o=i.key),t({operate:i.operate,id:r,key:o,value:i.value})}))},Ue=T["default"].observable({}),Ze=new Re(Ue);Ue=Ze.toProxy(Ue);var Ke=new _e;Ke.setRule($e),Ze.apply(Ke.listen);var Je={namespaced:!0,state:{map:Ue,module:"mesh"},getters:{get:function(e){return e.map}},mutations:{add:function(e,t){var n=t.vid,i=t.name,a=t.icon;delete t.name,delete t.icon,e.map[n]=t,this.commit("vidAttributeMapper/add",{vid:n,config:e.map[n],module:e.module,name:i,icon:a}),this.commit("sceneStructure/add",n),this.commit("modelStatus/add",n)},remove:function(e,t){delete e.map[t],this.commit("sceneStructure/remove",t),this.commit("modelStatus/remove",t),this.commit("vidAttributeMapper/remove",t)},change:function(e,t){var n=t.path,i=void 0===n?[]:n,a=t.key,r=t.value,o=e.map;i.forEach((function(e){o=o[e]})),o[a]=r}},actions:{}},Xe=function(e){Object(Ae["a"])(n,e);var t=Object(Pe["a"])(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:THREE.DefaultLoadingManager;Object(D["a"])(this,n),e=t.call(this,i);var a=e.load.bind(Object(Le["a"])(e));return e.load=function(e,t,n,i){a(e,(function(e){t({loadObject:e.image,config:{format:e.format}})}),n,i)},e}return n}(THREE.TextureLoader),Ye=Xe,qe=function(e){Object(Ae["a"])(n,e);var t=Object(Pe["a"])(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:THREE.DefaultLoadingManager;Object(D["a"])(this,n),e=t.call(this,i);var a=e.load.bind(Object(Le["a"])(e));return e.load=function(e,t,n,i){var r=["px.png","nx.png","py.png","ny.png","pz.png","nz.png"];r.forEach((function(t,n,i){i[n]="".concat(e,"/").concat(t)})),a(r,(function(e){t({loadObject:e.image,config:""})}),n,i)},e}return n}(THREE.CubeTextureLoader),Qe=qe,et=n("e642"),tt=function(e){Object(Ae["a"])(n,e);var t=Object(Pe["a"])(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:THREE.DefaultLoadingManager;Object(D["a"])(this,n),e=t.call(this,i);var a=e.load.bind(Object(Le["a"])(e));return e.load=function(e,t,n,i){a(e,(function(e){var n="",i=[];e.children&&e.children[0]&&e.children.forEach((function(e){var t=e.geometry;if(t.center(),!t.boundingSphere&&t.computeBoundingSphere(),t.boundingSphere.radius>20){var i=20/t.boundingSphere.radius;t.scale(i,i,i)}n=e.geometry,e.material.dispose()})),t({loadObject:n,config:i})}),n,i)},e}return n}(et["a"]),nt=tt,it=n("4086"),at=function(e){Object(Ae["a"])(n,e);var t=Object(Pe["a"])(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:THREE.DefaultLoadingManager;Object(D["a"])(this,n),e=t.call(this,i);var a=e.load.bind(Object(Le["a"])(e));return e.load=function(e,t,n,i){a(e,(function(e){var n="",i=[],a=e.materialsInfo;Object.keys(a).forEach((function(t){var n=e.create(t);i.push({side:n.side,color:n.color.getStyle(),specular:n.specular.getStyle(),emissive:n.emissive.getStyle(),shininess:n.shininess,opacity:n.opacity,transparent:n.transparent}),n.dispose()})),n=i,t({loadObject:n,config:i})}),n,i)},e}return n}(it["a"]),rt=at,ot={VisTextureLoader:new Ye,VisCubeTextureLoader:new Qe,VisOBJLoader:new nt,VisMTLLoader:new rt},ct=T["default"].observable({showLoading:!1,title:"",overllTotal:0,overllOver:0,messageMap:{},error:!1,map:{}});THREE.DefaultLoadingManager.onStart=function(e,t,n){ct.title=e,ct.showLoading||(ct.showLoading=!0)},THREE.DefaultLoadingManager.onLoad=function(){window.loadingManagerTimer&&clearTimeout(window.loadingManagerTimer),window.loadingManagerTimer=setTimeout((function(){ct.showLoading=!1,ct.overllOver=0,ct.overllTotal=0,ct.messageMap={},ct.title=""}),1e3)},THREE.DefaultLoadingManager.onError=function(e){ct.title=e,ct.error=!0};var st={namespaced:!0,state:ct,getters:{showLoading:function(e){return e.showLoading},title:function(e){return e.title},overllTotal:function(e){return e.overllTotal},overllOver:function(e){return e.overllOver},messageMap:function(e){return e.messageMap},error:function(e){return e.error},get:function(e){return e.map}},mutations:{showLoading:function(e,t){e.showLoading=t},load:function(e,t){var n=t.loader,i=t.url,a=t.callBackFun;if(e.map[i])a();else{var r=i;T["default"].set(e.messageMap,r,{url:r,loaded:0,total:0,error:!1,message:""}),e.overllTotal+=1;var o=e.messageMap[r];ot[n].load(i,(function(t){o.loaded=100,o.total=100,e.overllOver+=1,e.map[i]=t.loadObject,a(t.config)}),(function(e){o.loaded=e.loaded,!o.total&&(o.total=e.total)}),(function(e){o.error=!0,o.message=JSON.stringify(e),console.error(e)}))}},clear:function(e){e.messageMap={},e.overllOver=0,e.overllTotal=0,e.title=""}},actions:{}},ut=T["default"].observable({}),lt=new Re(ut);ut=lt.toProxy(ut);var ht={namespaced:!0,state:{map:ut,module:"geometry",active:""},getters:{get:function(e){return e.map},active:function(e){return e.active}},mutations:{add:function(e,t){var n=t.vid;e.map[n]=t},remove:function(e,t){delete e.map[t]},change:function(e,t){var n=t.path,i=void 0===n?[]:n,a=t.key,r=t.value,o=e.map;i.forEach((function(e){o=o[e]})),o[a]=r},active:function(e,t){e.active=e.map[t]}},actions:{}},ft=function(e,t){Object.keys(e).forEach((function(n){var i=e[n],a=i.path.concat([]),r="",o="";"set"===i.operate?(r=a.shift(),setTimeout((function(){var e=ht.state.map[r].object;Je.state.map[e].geometry=r})),o=0===a.length?i.key:"".concat(a.join("."),".").concat(i.key)):"delete"===i.operate&&(r=o=i.key),t({operate:i.operate,vid:r,key:o,value:i.value})}))},dt=new _e;dt.setRule(ft),lt.apply(dt.listen);var mt=new We(ht.state.map);mt.applyLoadObjectMapper(st.state.map),dt.add(mt.runtimeCompile);var pt=n("d9e7"),vt=n("a734"),bt=function(){function e(t){var n=this;Object(D["a"])(this,e),Object(se["a"])(this,"runtimeCompile",(function(e){var t=e.operate,i=e.id,a=e.key,r=e.value,o={add:function(){n.add(r)},set:function(){n.set(i,a,r)},delete:function(){n.delete(i)}};o[t]()})),Object(se["a"])(this,"_getFunMap",(function(e){var t={},n=function e(n,i){Object.keys(n).forEach((function(a){"object"===Object(ce["a"])(n[a])&&null!==n[a]?e(n[a],i.concat([a])):t[i.concat([a]).join(".")]=n[a]}))};return n(e,[]),t})),Object(se["a"])(this,"compileTexture",(function(){})),Object(se["a"])(this,"clearCompileTexture",(function(){})),this.target=t,this.map={},this.loadObjectMap={}}return Object(W["a"])(e,[{key:"applyLoadObjectMapper",value:function(e){this.loadObjectMap=e}},{key:"add",value:function(e){var t=this,n=JSON.parse(JSON.stringify(e)),i=n.vid,a={VisImageTexture:function(){return new pt["a"](n)},VisCubeTexture:function(){return new vt["a"](n)}},r=a[n.type]();this.map[i]=r;var o=this._getFunMap(n);Object.keys(o).forEach((function(e){t.set(i,e,o[e])}))}},{key:"set",value:function(e,t,n){var i=this.map[e];if(i[t]){if("url"===t){if(!this.loadObjectMap[n])return console.error("can not found loadObject: ".concat(n)),!1;n=this.loadObjectMap[n]}i[t](n)}else console.warn("visTexture ".concat(e," has not the set function: ").concat(t))}},{key:"delete",value:function(e){var t=this.map[e];t.dispose(),delete this.map[e]}}]),e}(),yt=bt,gt=new THREE.Mesh(new THREE.BoxBufferGeometry(80,2,80),new THREE.MeshStandardMaterial({color:"rgb(255, 255, 255)"}));gt.position.set(0,-11,0),gt.receiveShadow=!0,gt.castShadow=!0;var Et=function(){function e(t,n){var i=this;Object(D["a"])(this,e);var a=setInterval((function(){var e={ImageTexture:function(){return void 0!==n.image},CubeTexture:function(){return 6===n.image.length}};e[n.textureType]()&&(n.needsUpdate=!0,i.update(),clearInterval(a),delete i.timer)}),1e3/30),r=new THREE.Scene,o=new THREE.PerspectiveCamera(45,t.offsetWidth/t.offsetHeight,1,500),c=new THREE.Mesh(e.displayGeometry,new THREE.MeshBasicMaterial),s={ImageTexture:function(){c.material.map=n},CubeTexture:function(){r.background=n,c.material.envMap=n,c.material.combine=THREE.MultiplyOperation,c.material.reflectivity=1}};s[n.textureType](),c.material.needsUpdate=!0,c.receiveShadow=!0,c.castShadow=!0,o.position.set(0,0,40),o.up.x=0,o.up.y=1,o.up.z=0,o.lookAt(new THREE.Vector3(0,0,0)),r.add(o),r.add(c);var u=new THREE.WebGLRenderer({antialias:!0,preserveDrawingBuffer:!0});u.setSize(t.offsetWidth,t.offsetHeight),u.setPixelRatio(window.devicePixelRatio),u.setClearColor("#fff"),t.appendChild(u.domElement),this.dom=t,this.texture=n,this.renderer=u,this.scene=r,this.camera=o,this.update()}return Object(W["a"])(e,[{key:"update",value:function(){var t=this.scene;t.add(e.ambientLight),t.add(e.plane),this.renderer.render(t,this.camera)}}]),e}();Object(se["a"])(Et,"ambientLight",new THREE.AmbientLight("rgb(255, 255, 255)",1)),Object(se["a"])(Et,"displayGeometry",new THREE.BoxBufferGeometry(20,20,20)),Object(se["a"])(Et,"plane",gt);var kt=Et,jt=function(){function e(){Object(D["a"])(this,e),this.dispalyerMap={},this.textureMap={},this.frequency=1e3/60,this.timerMap={}}return Object(W["a"])(e,[{key:"applyTextureMapper",value:function(e){this.TextureMap=e}},{key:"add",value:function(e){var t=this,n=document.getElementById(e),i=this.TextureMap[e];n&&i?this.dispalyerMap[e]=new kt(n,i.texture):(this.timerMap[e]&&(clearTimeout(this.timer),delete this.timerMap[e]),this.timerMap[e]=setTimeout((function(){t.add(e),delete t.timer}),this.frequency))}},{key:"update",value:function(e){this.dispalyerMap[e]?this.dispalyerMap[e].update():console.warn("can not found displayer which vid is ".concat(e))}}]),e}(),wt=jt,Ot=new yt;Ot.applyLoadObjectMapper(st.state.map);var Mt=new wt;Mt.applyTextureMapper(Ot.map);var xt=Ot.add.bind(Ot);Ot.add=function(e){xt(e),Mt.add(e.vid)};var St=Ot.set.bind(Ot);Ot.set=function(e,t,n){St(e,t,n),Mt.update(e)};var Ct=Ot.delete.bind(Ot);Ot.delete=function(e,t,n){Ct(e,t,n),Mt.delete(e)};var Tt=function(e,t){Object.keys(e).forEach((function(n){var i=e[n],a=i.path.concat([]),r="",o="";"set"===i.operate?(r=a.shift(),o=0===a.length?i.key:"".concat(a.join("."),".").concat(i.key)):"delete"===i.operate&&(r=o=i.key),t({operate:i.operate,id:r,key:o,value:i.value})}))},Rt=T["default"].observable({}),Ht=new Re(Rt);Rt=Ht.toProxy(Rt);var _t=new _e;_t.setRule(Tt),Ht.apply(_t.listen),_t.add(Ot.runtimeCompile);var Lt={namespaced:!0,state:{map:Rt,module:"texture",active:""},getters:{get:function(e){return e.map},active:function(e){return e.active}},mutations:{add:function(e,t){var n=t.vid,i=T["default"].observable(t);e.map[n]=i,e.map.__ob__.dep.notify(),e.active=e.map[n],this.commit("vidAttributeMapper/add",{vid:n,config:e.map[n],module:e.module,name:t.name,icon:t.icon})},remove:function(e,t){delete e.map[t],this.commit("vidAttributeMapper/remove",t)},change:function(e,t){var n=t.path,i=void 0===n?[]:n,a=t.key,r=t.value,o=e.map;i.forEach((function(e){o=o[e]})),o[a]=r},active:function(e,t){e.active=e.map[t]}},actions:{}},At=n("28d5"),Pt=n("091c"),Ft=n("3c8e"),zt=n("4da9"),Vt=function(){function e(){var t=this;Object(D["a"])(this,e),Object(se["a"])(this,"runtimeCompile",(function(e){var n=e.operate,i=e.id,a=e.key,r=e.value,o={add:function(){t.add(r)},set:function(){t.set(i,a,r)},delete:function(){t.delete(i)}};o[n]()})),Object(se["a"])(this,"compileMaterial",(function(){})),Object(se["a"])(this,"clearCompileMaterial",(function(){})),this.map={},this.textureMap={}}return Object(W["a"])(e,[{key:"applyTextureMapper",value:function(e){this.textureMap=e}},{key:"add",value:function(e){var t=JSON.parse(JSON.stringify(e)),n={VisMeshStandardMaterial:function(){return new At["a"](t)},VisMeshToonMaterial:function(){return new Ft["a"](t)},VisMeshPhysicalMaterial:function(){return new Pt["a"](t)},VisLineBasicMaterial:function(){return new zt["a"](t)}},i=n[t.type]();this.map[t.vid]=i}},{key:"set",value:function(e,t,n){var i=this.map[e];i[t]?(["map","aoMap","alphaMap","emissiveMap","roughnessMap","bumpMap","displacementMap","normalMap"].includes(t)&&""!==n&&this.textureMap[n]&&(n=this.textureMap[n].texture),i[t](n)):console.warn("visMaterial ".concat(e," has not the set function: ").concat(t))}},{key:"delete",value:function(e){var t=this.map[e];t.dispose(),delete this.map[e]}}]),e}(),Bt=Vt,It=new THREE.PointLight("rgb(255, 255, 255)",.5,200,1);It.position.set(-30,5,20),It.castShadow=!0;var Nt=new THREE.Mesh(new THREE.BoxBufferGeometry(80,2,80),new THREE.MeshStandardMaterial({color:"rgb(255, 255, 255)"}));Nt.position.set(0,-11,0),Nt.receiveShadow=!0,Nt.castShadow=!0;var Gt=function(){function e(t,n){Object(D["a"])(this,e);var i=new THREE.Scene,a=new THREE.PerspectiveCamera(45,t.offsetWidth/t.offsetHeight,1,500),r="";r=["LineBasicMaterial"].includes(n.type)?new THREE.Line(e.displayGeometry,n):new THREE.Mesh(e.displayGeometry,n),r.receiveShadow=!0,r.castShadow=!0,a.position.set(0,0,35),a.up.x=0,a.up.y=1,a.up.z=0,a.lookAt(new THREE.Vector3(0,0,0)),i.add(a),i.add(r);var o=new THREE.WebGLRenderer({antialias:!0,preserveDrawingBuffer:!0});o.setSize(t.offsetWidth,t.offsetHeight),o.setPixelRatio(window.devicePixelRatio),o.setClearColor("rgb(150, 150, 150)"),o.shadowMap.enabled=!0,o.shadowMap.type=THREE.PCFSoftShadowMap,t.appendChild(o.domElement),this.dom=t,this.material=n,this.renderer=o,this.scene=i,this.camera=a,this.update()}return Object(W["a"])(e,[{key:"update",value:function(){var t=this.scene;t.add(e.ambientLight),t.add(e.pointLight),t.add(e.plane),this.renderer.render(t,this.camera)}}]),e}();Object(se["a"])(Gt,"ambientLight",new THREE.AmbientLight("rgb(255, 255, 255)",.7)),Object(se["a"])(Gt,"pointLight",It),Object(se["a"])(Gt,"displayGeometry",new THREE.SphereBufferGeometry(10,12,12)),Object(se["a"])(Gt,"plane",Nt);var Dt=Gt,Wt=function(){function e(){Object(D["a"])(this,e),this.dispalyerMap={},this.materialMap={},this.frequency=1e3/60,this.timerMap={}}return Object(W["a"])(e,[{key:"applyMaterialMapper",value:function(e){this.materialMap=e}},{key:"add",value:function(e){var t=this,n=document.getElementById(e),i=this.materialMap[e];n&&i?this.dispalyerMap[e]=new Dt(n,i.material):(this.timerMap[e]&&(clearTimeout(this.timer),delete this.timerMap[e]),this.timerMap[e]=setTimeout((function(){t.add(e),delete t.timer}),this.frequency))}},{key:"update",value:function(e){this.dispalyerMap[e]?this.dispalyerMap[e].update():console.warn("can not found displayer which vid is ".concat(e))}}]),e}(),$t=Wt,Ut=new Bt;Ut.applyTextureMapper(Ot.map);var Zt=new $t;Zt.applyMaterialMapper(Ut.map);var Kt=Ut.add.bind(Ut);Ut.add=function(e){Kt(e),Zt.add(e.vid)};var Jt=Ut.set.bind(Ut);Ut.set=function(e,t,n){Jt(e,t,n),Zt.update(e)};var Xt=Ut.delete.bind(Ut);Ut.delete=function(e,t,n){Xt(e,t,n),Zt.delete(e)};var Yt=function(e,t){Object.keys(e).forEach((function(n){var i=e[n],a=i.path.concat([]),r="",o="";"set"===i.operate?(r=a.shift(),o=0===a.length?i.key:"".concat(a.join("."),".").concat(i.key)):"delete"===i.operate&&(r=o=i.key),t({operate:i.operate,id:r,key:o,value:i.value})}))},qt=T["default"].observable({}),Qt=new Re(qt);qt=Qt.toProxy(qt);var en=new _e;en.setRule(Yt),Qt.apply(en.listen),en.add(Ut.runtimeCompile);var tn={namespaced:!0,state:{map:qt,module:"material",active:"",dragging:!1},getters:{get:function(e){return e.map},getActive:function(e){return e.active},dragging:function(e){return e.dragging}},mutations:{dragging:function(e,t){e.dragging=t},add:function(e,t){var n=t.vid,i=T["default"].observable(t);e.map[n]=i,e.map.__ob__.dep.notify(),e.active=e.map[n],this.commit("vidAttributeMapper/add",{vid:n,config:e.map[n],module:e.module,name:t.name,icon:t.icon})},remove:function(e,t){delete e.map[t],this.commit("vidAttributeMapper/remove",t)},change:function(e,t){var n=t.path,i=void 0===n?[]:n,a=t.key,r=t.value,o=e.map;i.forEach((function(e){o=o[e]})),o[a]=r},active:function(e,t){e.active=e.map[t]}},actions:{}},nn=function(){function e(t,n){var i=this;Object(D["a"])(this,e),Object(se["a"])(this,"runtimeCompile",(function(e,t){var n={"shadowMap.enabled":function(){i.renderer.shadowMap.enabled=t,i.renderer.clear()},"shadowMap.type":function(){i.renderer.shadowMap.type=t,i.renderer.clear()},physicallyCorrectLights:function(){i.renderer.physicallyCorrectLights=t,i.renderer.clear()},toneMapping:function(){i.renderer.toneMapping=t,i.renderer.clear()},toneMappingExposure:function(){i.renderer.toneMappingExposure=Math.pow(t,5),i.renderer.clear()},outputEncoding:function(){i.renderer.outputEncoding=t,i.renderer.clear()},clearColor:function(){i.renderer.setClearColor(t),i.renderer.clear()},pixelRatio:function(){i.renderer.setPixelRatio(t),i.renderer.clear()}};n[e]?n[e](t):console.warn("renderer compile has not the set function: ".concat(e))})),Object(se["a"])(this,"_getFunMap",(function(e){var t={},n=function e(n,i){Object.keys(n).forEach((function(a){"object"===Object(ce["a"])(n[a])&&null!==n[a]?e(n[a],i.concat([a])):t[i.concat([a]).join(".")]=n[a]}))};return n(e,[]),t})),this.renderer=t,this.target=n}return Object(W["a"])(e,[{key:"compileRenderer",value:function(){var e=this,t=this.target,n=this._getFunMap(t);Object.keys(n).forEach((function(t){e.runtimeCompile(t,n[t])}))}},{key:"clearCompileRenderer",value:function(){this.renderer.clear()}}]),e}(),an=nn,rn=function(){function e(t,n){var i=this;Object(D["a"])(this,e),Object(se["a"])(this,"runtimeCompile",(function(e,t){var n={color:function(e){i.ambientLight.color=new THREE.Color(e)},intensity:function(e){i.ambientLight.intensity=e}};n[e](t)})),this.scene=t,this.target=n,this.ambientLight=new THREE.AmbientLight("rgb(255, 255, 255)",1)}return Object(W["a"])(e,[{key:"compileScene",value:function(){this.ambientLight.color=new THREE.Color(this.target.color),this.ambientLight.intensity=this.target.intensity,this.scene.add(this.ambientLight)}},{key:"clearCompileScene",value:function(){this.scene.remove(this.ambientLight)}}]),e}(),on=rn,cn=function(){function e(t,n){var i=this;Object(D["a"])(this,e),Object(se["a"])(this,"runtimeCompile",(function(e,t){i[e](t)})),Object(se["a"])(this,"compileScene",(function(){})),Object(se["a"])(this,"clearCompileScene",(function(){})),this.fog=new THREE.Fog,this.scene=t,this.target=n,this.textureMap=""}return Object(W["a"])(e,[{key:"applyTextureMapper",value:function(e){this.textureMap=e}},{key:"fog.show",value:function(e){if(e){var t=this.target.fog,n=this.fog;this["fog.color"](t.color),n.near=t.near,n.far=t.far,this.scene.fog=this.fog}else this.scene.fog=null}},{key:"fog.color",value:function(e){this.fog.color=new THREE.Color(e)}},{key:"fog.near",value:function(e){this.fog.near=e}},{key:"fog.far",value:function(e){this.fog.far=e}},{key:"background",value:function(e){this.textureMap[e]?this.scene.background=this.textureMap[e].texture:console.warn("textureLibrary is not the texture which vid is ".concat(e))}},{key:"environment",value:function(e){this.textureMap[e]?this.scene.environment=this.textureMap[e].texture:console.warn("textureLibrary is not the texture which vid is ".concat(e))}}]),e}(),sn=cn,un=n("0a5b"),ln=function(e){Object(Ae["a"])(n,e);var t=Object(Pe["a"])(n);function n(e,i){var a;return Object(D["a"])(this,n),a=t.call(this),Object(se["a"])(Object(Le["a"])(a),"runtimeCompile",(function(e){var t=e.operate,n=e.id,i=e.key,r=e.value,o={add:function(){a.add(r)},set:function(){a.set(n,i,r)},delete:function(){a.delete(n)}};o[t]()})),a.scene=e,a.target=i,a.map={},a.geometryMap={},a.materialMap={},a.objectMapList=[],a}return Object(W["a"])(n,[{key:"applyGeometryMapper",value:function(e){this.geometryMap=e}},{key:"applyMaterialMapper",value:function(e){this.materialMap=e}},{key:"applyObjectMapper",value:function(e){this.objectMapList.push(e)}},{key:"add",value:function(e){var t=this,n=JSON.parse(JSON.stringify(e)),i=n.vid,a=new un["a"](i);this.map[i]=a;var r=ze.getFunMap(n);Object.keys(r).forEach((function(e){t.set(i,e,r[e])})),this.scene.add(a.object),this.scene.add(a.helper)}},{key:"set",value:function(e,t,i){var a=this,r=this.map[e];if(r[t]){var o={material:function(){i=a.materialMap[i]?a.materialMap[i].material:n.basicMaterial},geometry:function(){if(!a.geometryMap[i])return console.error("geometryMap has not this geometry vid: ".concat(i)),!1;i=a.geometryMap[i].geometry},lookAt:function(){if(i){var e="";if(a.objectMapList.forEach((function(t){if(t[i])return e=t[i].object,!0})),!e)return console.error("objectMapList has not this object vid: ".concat(i)),!1;i=e}}};o[t]&&o[t](),r[t](i)}else console.warn("visMesh ".concat(e," has not the set function: ").concat(t))}},{key:"delete",value:function(e){var t=this.map[e];this.scene.remove(t.object),this.scene.remove(t.helper),delete this.map[e]}},{key:"compileScene",value:function(){var e=this,t=this.target;Object.keys(t).forEach((function(n){var i=t[n];e.add(i);var a=ze.getFunMap(i);Object.keys(a).forEach((function(t){e.set(n,t,a[t])}))}))}},{key:"clearCompileScene",value:function(){var e=this,t=this.map;Object.keys(t).forEach((function(n){var i=t[n];e.scene.remove(i.object),e.scene.remove(i.helper)}))}}]),n}(ze);Object(se["a"])(ln,"basicMaterial",new THREE.MeshLambertMaterial({color:"rgb(200, 200, 200)"}));var hn=ln,fn=(n("f00c"),n("5b12")),dn=n("1f32"),mn=function(){function e(t,n){var i=this;Object(D["a"])(this,e),Object(se["a"])(this,"runtimeCompile",(function(e){var t=e.operate,n=e.vid,a=e.key,r=e.value,o={add:function(){i.add(r)},set:function(){i.set(n,a,r)},delete:function(){i.delete(n)},addPoint:function(){i.addPoint(n,r)},setPoint:function(){i.setPoint(n,a,r)},deletePoint:function(){i.deletePoint(n,a)}};o[t]()})),this.scene=t,this.target=n,this.map={},this.materialMap={},this.objectMapList=[]}return Object(W["a"])(e,[{key:"applyMaterialMapper",value:function(e){this.materialMap=e}},{key:"applyObjectMapper",value:function(e){this.objectMapList.push(e)}},{key:"add",value:function(e){var t=this,n=JSON.parse(JSON.stringify(e)),i=n.vid,a={VisLineSegments:function(){return new fn["a"](i)},VisLine:function(){return new dn["a"](i)}},r=a[n.type]();this.map[i]=r;var o=this._getFunList(n);o.forEach((function(e){"addPoint"===e.name?t.addPoint(i,e.value):t.set(i,e.name,e.value)})),this.scene.add(r.object),this.scene.add(r.helper)}},{key:"set",value:function(t,n,i,a){var r=this,o=this.map[t];if(!o[n])return console.warn("visLine ".concat(t," has not the set function: ").concat(n)),!1;var c=function(){if(i){var e="";if(r.objectMapList.forEach((function(t){if(t[i])return e=t[i].object,!0})),!e)return console.error("objectMapList has not this object vid: ".concat(i)),!1;i=e}},s={material:function(){i=r.materialMap[i]?r.materialMap[i].material:e.basicMaterial},lookAt:function(){if(i){var e="";if(r.objectMapList.forEach((function(t){if(t[i])return e=t[i].object,!0})),!e)return console.error("objectMapList has not this object vid: ".concat(i)),!1;i=e}},startObject:c,endObject:c};s[n]&&s[n](),o[n](i)}},{key:"delete",value:function(e){var t=this.map[e];this.scene.remove(t.object),this.scene.remove(t.helper),delete this.map[e]}},{key:"addPoint",value:function(e,t){var n=this.map[e];if(t.target){var i="";if(this.objectMapList.forEach((function(e){if(e[t])return i=e[t].object,!0})),!i)return console.error("objectMapList has not this object vid: ".concat(t)),!1;t=i,n.addPoint(t)}else n.addPoint({x:t.x,y:t.y,z:t.z})}},{key:"setPoint",value:function(e,t,n){var i=this.map[e];if(Number.isFinite(n)){var a=this.target[e].pointList[t];n={x:a.x,y:a.y,z:a.z}}else if(""===n){var r=this.target[e].pointList[t];n={x:r.x,y:r.y,z:r.z}}else{var o="";if(this.objectMapList.forEach((function(e){if(e[n])return o=e[n].object,!0})),!o)return console.error("objectMapList has not this object vid: ".concat(n)),!1;n=o}i.setPoint(t,n)}},{key:"_getFunList",value:function(e){var t=[],n=function e(n,i){Object.keys(n).forEach((function(a){"pointList"===a?n[a].forEach((function(e){t.push({name:"addPoint",value:e})})):"object"===Object(ce["a"])(n[a])&&null!==n[a]?e(n[a],i.concat([a])):t.push({name:i.concat([a]).join("."),value:n[a]})}))};return n(e,[]),t}},{key:"compileScene",value:function(){var e=this,t=this.target;Object.keys(t).forEach((function(n){var i=t[n];e.add(i)}))}},{key:"clearCompileScene",value:function(){var e=this,t=this.map;Object.keys(t).forEach((function(n){var i=t[n];e.scene.remove(i.object),e.scene.remove(i.helper)}))}}]),e}();Object(se["a"])(mn,"basicMaterial",new THREE.LineBasicMaterial({color:"rgb(200, 200, 200)"}));var pn=mn,vn=n("c84b"),bn=Object.assign({},vn["b"],{material:""}),yn=function(e){Object(Ae["a"])(n,e);var t=Object(Pe["a"])(n);function n(e){var i;return Object(D["a"])(this,n),i=t.call(this,e),i.object=new THREE.Mesh,i.helper.add(new THREE.LineSegments(new THREE.BufferGeometry,n.getHelperMaterial())),i.helper.matrixAutoUpdate=!1,i.helper.matrix=i.object.matrixWorld,i}return Object(W["a"])(n,[{key:"url",value:function(e){this._setGeometry(e)}},{key:"_setGeometry",value:function(e){console.log(e);var t=this.object,n=this.helper.children[0];t.geometry.dispose(),n.geometry.dispose(),t.geometry=e,n.geometry=new THREE.EdgesGeometry(e)}},{key:"material",value:function(e){this.object.material=e}}]),n}(vn["a"]);Object(se["a"])(yn,"getHelperMaterial",(function(){return new THREE.LineBasicMaterial({color:"rgb(100, 100, 100)"})}));Object.assign({},bn,{type:"VisObjModel",url:""});var gn=function(e){Object(Ae["a"])(n,e);var t=Object(Pe["a"])(n);function n(e){var i;return Object(D["a"])(this,n),i=t.call(this,e),i.object.vid=e.vid,i}return n}(yn),En=function(){function e(t,n){var i=this;Object(D["a"])(this,e),Object(se["a"])(this,"runtimeCompile",(function(e){var t=e.operate,n=e.id,a=e.key,r=e.value,o={add:function(){i.add(r)},set:function(){i.set(n,a,r)},delete:function(){i.delete(n)}};o[t]()})),Object(se["a"])(this,"_getFunMap",(function(e){var t={},n=function e(n,i){Object.keys(n).forEach((function(a){"object"===Object(ce["a"])(n[a])&&null!==n[a]?e(n[a],i.concat([a])):t[i.concat([a]).join(".")]=n[a]}))};return n(e,[]),t})),this.scene=t,this.target=n,this.map={},this.materialMap={}}return Object(W["a"])(e,[{key:"applyLoadObjectMapper",value:function(e){this.loadObjectMap=e}},{key:"applyMaterialMapper",value:function(e){this.materialMap=e}},{key:"add",value:function(e){var t=this,n=JSON.parse(JSON.stringify(e)),i=n.vid,a={VisObjModel:function(){return new gn(n)}},r=a[n.type](n);this.map[i]=r;var o=this._getFunMap(n);Object.keys(o).forEach((function(e){t.set(i,e,o[e])})),this.scene.add(r.object),this.scene.add(r.helper)}},{key:"set",value:function(t,n,i){var a=this,r=this.map[t];if(r[n]){var o={material:function(){i=a.materialMap[i]?a.materialMap[i].material:e.basicMaterial},url:function(){a.loadObjectMap[i]&&(i=a.loadObjectMap[i])}};o[n]&&o[n](),r[n](i)}else console.warn("Model ".concat(t," has not the set function: ").concat(n))}},{key:"delete",value:function(e){var t=this.map[e];this.scene.remove(t.object),this.scene.remove(t.helper),t.dispose(),delete this.map[e]}},{key:"compileScene",value:function(){var e=this,t=this.target;Object.keys(t).forEach((function(n){var i=t[n];e.add(i);var a=e._getFunMap(i);Object.keys(a).forEach((function(t){e.set(n,t,a[t])}))}))}},{key:"clearCompileScene",value:function(){var e=this,t=this.map;Object.keys(t).forEach((function(n){var i=t[n];e.scene.remove(i.object),e.scene.remove(i.helper)}))}}]),e}();Object(se["a"])(En,"basicMaterial",new THREE.MeshLambertMaterial({color:"rgb(200, 200, 200)"}));var kn=En,jn=n("8bde"),wn=n("3e76"),On=function(){function e(t,n){var i=this;Object(D["a"])(this,e),Object(se["a"])(this,"runtimeCompile",(function(e){var t=e.operate,n=e.id,a=e.key,r=e.value,o={add:function(){i.add(r)},set:function(){i.set(n,a,r)},delete:function(){i.delete(n)}};o[t]()})),Object(se["a"])(this,"_getFunMap",(function(e){var t={},n=function e(n,i){Object.keys(n).forEach((function(a){"object"===Object(ce["a"])(n[a])&&null!==n[a]?e(n[a],i.concat([a])):t[i.concat([a]).join(".")]=n[a]}))};return n(e,[]),t})),this.scene=t,this.target=n,this.map={}}return Object(W["a"])(e,[{key:"add",value:function(e){var t=this,n=JSON.parse(JSON.stringify(e)),i=n.vid,a={VisGroup:function(){return new jn["a"](n)},VisEmpty:function(){return new wn["a"](n)}},r=a[n.type]();this.map[i]=r;var o=this._getFunMap(n);Object.keys(o).forEach((function(e){t.set(i,e,o[e])})),this.scene.add(r.object),this.scene.add(r.helper)}},{key:"set",value:function(e,t,n){var i=this.map[e];i[t]?i[t](n):console.warn("Model ".concat(e," has not the set function: ").concat(t))}},{key:"delete",value:function(e){var t=this.map[e];this.scene.remove(t.object),this.scene.remove(t.helper),t.dispose(),delete this.map[e]}},{key:"compileScene",value:function(){var e=this,t=this.target;Object.keys(t).forEach((function(n){var i=t[n];e.add(i);var a=e._getFunMap(i);Object.keys(a).forEach((function(t){e.set(n,t,a[t])}))}))}},{key:"clearCompileScene",value:function(){var e=this,t=this.map;Object.keys(t).forEach((function(n){var i=t[n];e.scene.remove(i.object),e.scene.remove(i.helper)}))}}]),e}(),Mn=On,xn=n("4963"),Sn=n("da4b"),Cn=n("98a2"),Tn=function(){function e(t,n){var i=this;Object(D["a"])(this,e),Object(se["a"])(this,"runtimeCompile",(function(e){var t=e.operate,n=e.id,a=e.key,r=e.value,o={add:function(){i.add(r)},set:function(){i.set(n,a,r)},delete:function(){i.delete(n)}};o[t]()})),Object(se["a"])(this,"_getFunMap",(function(e){var t={},n=function e(n,i){Object.keys(n).forEach((function(a){"object"===Object(ce["a"])(n[a])&&null!==n[a]?e(n[a],i.concat([a])):t[i.concat([a]).join(".")]=n[a]}))};return n(e,[]),t})),this.scene=t,this.target=n,this.map={}}return Object(W["a"])(e,[{key:"add",value:function(e){var t=this,n=Object.assign({},e),i=n.vid,a={VisPointLight:function(){return new xn["a"](n)},VisDirectionalLight:function(){return new Sn["a"](n)},VisSpotLight:function(){return new Cn["a"](n)}},r=a[n.type]();this.map[i]=r;var o=this._getFunMap(n);Object.keys(o).forEach((function(e){t.set(i,e,o[e])})),this.scene.add(r.object),this.scene.add(r.light),this.scene.add(r.helper),r.target&&this.scene.add(r.target)}},{key:"set",value:function(e,t,n){var i=this.map[e];i[t]?i[t](n):console.warn("Model ".concat(e," has not the set function: ").concat(t))}},{key:"delete",value:function(e){var t=this.map[e];this.scene.remove(t.object),this.scene.remove(t.light),this.scene.remove(t.helper),t.target&&this.scene.remove(t.target),t.dispose(),delete this.map[e]}},{key:"compileScene",value:function(){var e=this,t=this.target;Object.keys(t).forEach((function(n){var i=t[n];e.add(i);var a=e._getFunMap(i);Object.keys(a).forEach((function(t){e.set(n,t,a[t])}))}))}},{key:"clearCompileScene",value:function(){var e=this,t=this.map;Object.keys(t).forEach((function(n){var i=t[n];e.scene.remove(i.object),e.scene.remove(i.helper),e.scene.remove(i.light)}))}}]),e}(),Rn=Tn,Hn=n("7f14"),_n=function(e){Object(Ae["a"])(n,e);var t=Object(Pe["a"])(n);function n(e,i,a){var r;return Object(D["a"])(this,n),r=t.call(this),Object(se["a"])(Object(Le["a"])(r),"runtimeCompile",(function(e){var t=e.operate,n=e.id,i=e.key,a=e.value,o={add:function(){r.add(a)},set:function(){r.set(n,i,a)},delete:function(){r.delete(n)}};o[t]()})),r.scene=e,r.target=i,r.manager=a,r.map={},r}return Object(W["a"])(n,[{key:"add",value:function(e){var t=this,n=Object.assign({},e),i=n.vid,a={VisPerspectiveCamera:function(){return new Hn["a"](i)}},r=a[n.type]();this.map[i]=r;var o=ze.getFunMap(n);Object.keys(o).forEach((function(e){t.set(i,e,o[e])})),this.scene.add(r.object),this.scene.add(r.helper),r.target&&this.scene.add(r.target),this.manager.set(r.object,!0)}},{key:"set",value:function(e,t,n){var i=this.map[e];i[t]?i[t](n):console.warn("Model ".concat(e," has not the set function: ").concat(t))}},{key:"delete",value:function(e){var t=this.map[e];this.scene.remove(t.object),this.scene.remove(t.helper),t.target&&this.scene.remove(t.target),t.dispose(),delete this.map[e],this.manager.delete(t.camera)}},{key:"compileScene",value:function(){var e=this,t=this.target;Object.keys(t).forEach((function(n){var i=t[n];e.add(i)}))}},{key:"clearCompileScene",value:function(){var e=this,t=this.map;Object.keys(t).forEach((function(n){var i=t[n];e.scene.remove(i.object),e.scene.remove(i.helper)}))}}]),n}(ze),Ln=_n,An=n("b85c"),Pn=function(){function e(t,n){var i=this;Object(D["a"])(this,e),Object(se["a"])(this,"runtimeCompile",(function(e){var t=e.dargVid,n=e.dropVid;i.attach(n,t)})),Object(se["a"])(this,"compileScene",(function(){})),Object(se["a"])(this,"clearCompileScene",(function(){})),this.scene=t,this.target=n,this.mapList=[]}return Object(W["a"])(e,[{key:"applyObjectMapper",value:function(e){this.mapList.push(e)}},{key:"_getObjectByVid",value:function(e){if("root"===e)return this.scene;var t,n=Object(An["a"])(this.mapList);try{for(n.s();!(t=n.n()).done;){var i=t.value;if(i[e])return i[e].object}}catch(a){n.e(a)}finally{n.f()}return!1}},{key:"attach",value:function(e,t){if(e&&t){var n=this._getObjectByVid(e),i=this._getObjectByVid(t);if(!n||!i)return console.error("map can not found object which vid: ".concat(n?t:e)),!1;n.attach(i)}else console.error("parentVid: ".concat(e," and childrenVid: ").concat(t," are necessary"))}}]),e}(),Fn=Pn,zn=function(){function e(t,n){var i=this;Object(D["a"])(this,e),Object(se["a"])(this,"runtimeCompile",(function(e){var t=e.operate,n=e.key,a=e.value,r={hover:function(){i.hover(n,a)},active:function(){i.active(n,a)},delete:function(){i.delete(n)}};r[t]()})),this.scene=t,this.target=n,this.mapList=[],this.bufferColorMap={},this.activeColor="rgb(230, 20, 240)",this.hoverColor="rgb(255, 158, 240)",this.localAxisLineBox=new THREE.Object3D,this.localAxisLineBox.matrixAutoUpdate=!1,this.scene.add(this.localAxisLineBox);var a=new THREE.LineBasicMaterial({vertexColors:!0,depthTest:!1,depthWrite:!1}),r=[0,0,0,5,0,0,0,0,0,0,5,0,0,0,0,0,0,5],o=[1,.5,0,1,.5,0,0,1,.5,0,1,.5,.5,0,1,.5,0,1],c=new THREE.BufferGeometry;c.setAttribute("position",new THREE.Float32BufferAttribute(r,3)),c.setAttribute("color",new THREE.Float32BufferAttribute(o,3)),this.localAxisLineModel=new THREE.LineSegments(c,a),this.hoverModelMap={},this.localAxisLineMap={},this.activeModelMap={}}return Object(W["a"])(e,[{key:"applyObjectMapper",value:function(e){this.mapList.push(e)}},{key:"getVisModelByVid",value:function(e){var t="";return this.mapList.some((function(n){if(n[e])return t=n[e],!0})),t}},{key:"hover",value:function(e,t){var n=this.getVisModelByVid(e);if(this.activeModelMap[e])return!1;t?(this._setHelperColor(e,n,this.hoverColor),this.hoverModelMap[e]=n):(this._reduceHelperColor(e,n),delete this.hoverModelMap[e])}},{key:"active",value:function(e,t){var n=this.getVisModelByVid(e);if(t){this.activeModelMap[e]=n,n.light?this._reduceHelperColor(e,n):this._setHelperColor(e,n,this.activeColor);var i=this.localAxisLineModel.clone();i.matrixAutoUpdate=!1,i.matrix=n.object.matrixWorld,this.localAxisLineMap[e]=i,this.localAxisLineBox.add(i)}else this._reduceHelperColor(e,n),delete this.activeModelMap[e],this.localAxisLineBox.remove(this.localAxisLineMap[e]),this.localAxisLineMap[e].geometry.dispose(),this.localAxisLineMap[e].material.dispose(),delete this.localAxisLineMap[e]}},{key:"delete",value:function(e){this.hoverModelMap[e]&&this.hover(e,!1),this.activeModelMap[e]&&this.active(e,!1)}},{key:"compileScene",value:function(){var e=this,t=this.target;Object.keys(t).forEach((function(n){var i=t[n];i.hover&&e.hover(n,i.hover),i.active&&e.active(n,i.active)}))}},{key:"clearCompileScene",value:function(){var e=this.localAxisLineMap;Object.keys(e).forEach((function(t){var n=e[t];n.geometry.dispose(),n.material.dispose(),delete e[t]}))}},{key:"_setHelperColor",value:function(e,t,n){var i=this;if(!t)return!1;var a=function t(a){a.children[0]?a.children.forEach((function(e){t(e)})):a.material&&(i.bufferColorMap[e]||(i.bufferColorMap[e]=a.material.color.getHex()),a.material.color=new THREE.Color(n))};a(t.helper)}},{key:"_reduceHelperColor",value:function(e,t){var n=this;if(!t)return!1;var i=function t(i){if(i.children[0])i.children.forEach((function(e){t(e)}));else if(i.material){var a=n.bufferColorMap[e];i.material.color=new THREE.Color(a)}};this.bufferColorMap[e]&&(i(t.helper),delete this.bufferColorMap[e])}}]),e}(),Vn=zn,Bn=function(){function e(t,n,i){var a=this;Object(D["a"])(this,e),Object(se["a"])(this,"runtimeCompile",(function(e){var t=e.operate,n=e.key,i=e.value,r={position:function(){a.position(n,i)},rotation:function(){a.rotation(n,i)},scale:function(){a.scale(n,i)},touch:function(){a.touch(i)},mode:function(){a.mode(i)},showX:function(){a.showX(i)},showY:function(){a.showY(i)},showZ:function(){a.showZ(i)},space:function(){a.space(i)},snapAllow:function(){a.snapAllow(i)},translationSnap:function(){a.translationSnap(i)},rotationSnap:function(){a.rotationSnap(i)},scaleSnap:function(){a.scaleSnap(i)},size:function(){a.size(i)}};r[t]()})),this.scene=t,this.target=i,this.transformControls=n,this.map={},this.transformTarget=new THREE.Object3D,this.scene.add(this.transformTarget)}return Object(W["a"])(e,[{key:"size",value:function(e){this.transformControls.setSize(e)}},{key:"snapAllow",value:function(e){e?(this.transformControls.setTranslationSnap(this.target.translationSnap),this.transformControls.setRotationSnap(this.target.rotationSnap),this.transformControls.setScaleSnap(this.target.scaleSnap)):(this.transformControls.setTranslationSnap(0),this.transformControls.setRotationSnap(0),this.transformControls.setScaleSnap(0))}},{key:"translationSnap",value:function(e){this.target.snapAllow&&"number"===typeof e&&this.transformControls.setTranslationSnap(e)}},{key:"rotationSnap",value:function(e){this.target.snapAllow&&"number"===typeof e&&this.transformControls.setRotationSnap(e)}},{key:"scaleSnap",value:function(e){this.target.snapAllow&&"number"===typeof e&&this.transformControls.setScaleSnap(e)}},{key:"showX",value:function(e){this.transformControls.showX=e}},{key:"showY",value:function(e){this.transformControls.showY=e}},{key:"showZ",value:function(e){this.transformControls.showZ=e}},{key:"mode",value:function(e){this.transformControls.mode="position"===e?"translate":"rotation"===e?"rotate":"scale"}},{key:"space",value:function(e){this.transformControls.space=e}},{key:"touch",value:function(e){e?(this.scene.add(this.transformControls),this.transformControls.object=this.transformTarget):(this.scene.remove(this.transformControls),this.transformControls.object=void 0)}},{key:"position",value:function(e,t){this.transformTarget.position[e]=t}},{key:"rotation",value:function(e,t){this.transformTarget.rotation[e]=t}},{key:"scale",value:function(e,t){this.transformTarget.scale[e]=t}},{key:"compileScene",value:function(){var e=this,t=this.target;Object.keys(t.position).forEach((function(n){e.position(n,t.position[n])})),Object.keys(t.scale).forEach((function(n){e.scale(n,t.scale[n])})),Object.keys(t.rotation).forEach((function(n){e.rotation(n,t.rotation[n])})),this.touch(t.touch)}},{key:"clearCompileScene",value:function(){}}]),e}(),In=Bn,Nn=n("1a4b"),Gn=n("03b8"),Dn=n("a660"),Wn=function(e){Object(Ae["a"])(n,e);var t=Object(Pe["a"])(n);function n(e,i){var a;return Object(D["a"])(this,n),a=t.call(this),Object(se["a"])(Object(Le["a"])(a),"runtimeCompile",(function(e){var t=e.operate,n=e.vid,i=e.key,r=e.value,o={add:function(){a.add(r)},set:function(){a.set(n,i,r)},delete:function(){a.delete(n)}};o[t]()})),a.scene=e,a.target=i,a.map={},a.textureMap={},a}return Object(W["a"])(n,[{key:"applyTextureMapper",value:function(e){this.textureMap=e}},{key:"add",value:function(e){var t=this,n=JSON.parse(JSON.stringify(e)),i=n.vid,a={VisSky:function(){return new Nn["a"](i)},VisOcean:function(){return new Gn["a"](i)},VisWater:function(){return new Dn["a"](i)}},r=a[n.type]();this.map[i]=r;var o=ze.getFunMap(n);Object.keys(o).forEach((function(e){t.set(i,e,o[e])})),["VisSky","VisOcean","VisWater"].includes(n.type)&&this.scene.add(r.object)}},{key:"set",value:function(e,t,n){var i=this.map[e];if(i[t]){if(["waterNormals","normalMap0","normalMap1"].includes(t)&&n){if(!this.textureMap[n])return console.error("can not found texture: ".concat(n)),!1;n=this.textureMap[n].texture}i[t](n)}else console.warn("VisPlugin ".concat(e," has not the set function: ").concat(t))}},{key:"delete",value:function(e){var t=this.map[e];t.dispose(),delete this.map[e]}},{key:"compileScene",value:function(){var e=this,t=this.target;Object.keys(t).forEach((function(n){var i=t[n];e.add(i);var a=ze.getFunMap(i);Object.keys(a).forEach((function(t){e.set(n,t,a[t])}))}))}},{key:"clearCompileScene",value:function(){}}]),n}(ze),$n=Wn,Un=n("0dc8"),Zn=n("eba4"),Kn=n("d3ce"),Jn=n("a1cd"),Xn=function(){function e(t,n){var i=this;Object(D["a"])(this,e),Object(se["a"])(this,"runtimeCompile",(function(e){var t=e.operate,n=e.id,a=e.key,r=e.value,o={add:function(){i.add(r)},set:function(){i.set(n,a,r)},delete:function(){i.delete(n)}};o[t]()})),Object(se["a"])(this,"_getFunMap",(function(e){var t={},n=function e(n,i){Object.keys(n).forEach((function(a){"object"===Object(ce["a"])(n[a])&&null!==n[a]?e(n[a],i.concat([a])):t[i.concat([a]).join(".")]=n[a]}))};return n(e,[]),t})),Object(se["a"])(this,"compileEffect",(function(){})),Object(se["a"])(this,"clearCompileEffect",(function(){})),this.composer=t,this.target=n,this.map={}}return Object(W["a"])(e,[{key:"add",value:function(e){var t=this,n=JSON.parse(JSON.stringify(e)),i=n.vid,a={VisUnrealBloomPass:function(){return new Un["a"](n)},VisFXAAShaderPass:function(){return new Jn["a"](n)},VisSMAAPass:function(){return new Zn["a"](n)},VisAfterimagePass:function(){return new Kn["a"](n)}},r=a[n.type]();this.map[i]=r;var o=this._getFunMap(n);Object.keys(o).forEach((function(e){t.set(i,e,o[e])})),this.composer.addPass(r.pass)}},{key:"set",value:function(e,t,n){var i=this.map[e];i[t]?("resolution.x"===t?n=n*this.composer.renderer.domElement.offsetWidth*this.composer.renderer.getPixelRatio():"resolution.y"===t&&(n=n*this.composer.renderer.domElement.offsetHeight*this.composer.renderer.getPixelRatio()),i[t](n)):console.warn("visEffectPass ".concat(e," has not the set function: ").concat(t))}},{key:"delete",value:function(e){var t=this.map[e];t.dispose(),delete this.map[e]}}]),e}(),Yn=Xn,qn=function(e,t){Object.keys(e).forEach((function(n){var i=e[n],a=i.key;i.path[0]&&(a="".concat(i.path.join("."),".").concat(i.key)),t(a,i.value)}))},Qn=T["default"].observable({shadowMap:{enabled:!0,type:THREE.PCFSoftShadowMap},toneMapping:THREE.NoToneMapping,toneMappingExposure:1,outputEncoding:THREE.LinearEncoding,pixelRatio:window.devicePixelRatio,clearColor:"rgb(20, 20, 20)",physicallyCorrectLights:!1}),ei=new Re;Qn=ei.toProxy(Qn);var ti=new _e;ti.setRule(qn),ei.apply(ti.listen);var ni={namespaced:!0,state:{config:Qn},getters:{get:function(e){return e.config}},mutations:{},actions:{}},ii=function(e,t){Object.keys(e).forEach((function(n){var i=e[n];t(i.key,i.value)}))},ai=T["default"].observable({color:"rgb(255, 255, 255)",intensity:1}),ri=new Re;ai=ri.toProxy(ai);var oi=new _e;oi.setRule(ii),ri.apply(oi.listen);var ci={namespaced:!0,state:{ambientLight:ai},getters:{get:function(e){return e.ambientLight}},mutations:{},actions:{}},si=function(e,t){for(var n in e){var i=e[n],a=i.key;i.path[0]&&(a="".concat(i.path.join("."),".").concat(i.key)),t(a,i.value)}},ui=T["default"].observable({background:"",fog:{show:!1,color:"rgb(55, 55, 55)",near:1,far:100},environment:""}),li=new Re(ui);ui=li.toProxy(ui);var hi=new _e;hi.setRule(si),li.apply(hi.listen);var fi={namespaced:!0,state:{scene:ui},getters:{get:function(e){return e.scene}},mutations:{},actions:{}},di=function(e,t){Object.keys(e).forEach((function(n){var i=e[n],a=i.path.concat([]),r="",o="",c=i.operate;a.includes("pointList")?(r=a.shift(),a.shift(),"set"===i.operate&&a.length>0&&(o=a.join(".")),c="".concat(i.operate,"Point")):"set"===i.operate?(r=a.shift(),o=0===a.length?i.key:"".concat(a.join("."),".").concat(i.key)):"delete"===i.operate&&(r=o=i.key),t({operate:c,vid:r,key:o,value:i.value})}))},mi=T["default"].observable({}),pi=new Re(mi);mi=pi.toProxy(mi);var vi=new _e;vi.setRule(di),pi.apply(vi.listen);var bi={namespaced:!0,state:{map:mi,module:"line"},getters:{get:function(e){return e.map}},mutations:{add:function(e,t){var n=t.vid,i=t.name,a=t.icon;delete t.name,delete t.icon;var r=T["default"].observable(t);e.map[n]=r,e.map.__ob__.dep.notify(),e.active=e.map[n],console.log(),this.commit("vidAttributeMapper/add",{vid:n,config:e.map[n],module:e.module,name:i,icon:a}),this.commit("sceneStructure/add",n),this.commit("modelStatus/add",n)},remove:function(e,t){delete e.map[t],this.commit("sceneStructure/remove",t),this.commit("modelStatus/remove",t),this.commit("vidAttributeMapper/remove",t)},change:function(e,t){var n=t.path,i=void 0===n?[]:n,a=t.key,r=t.value,o=e.map;i.forEach((function(e){o=o[e]})),o[a]=r}},actions:{}},yi=function(e,t){Object.keys(e).forEach((function(n){var i=e[n],a=i.path.concat([]),r="",o="";"set"===i.operate?(r=a.shift(),o=0===a.length?i.key:"".concat(a.join("."),".").concat(i.key)):"delete"===i.operate&&(r=o=i.key),t({operate:i.operate,id:r,key:o,value:i.value})}))},gi=T["default"].observable({}),Ei=new Re(gi);gi=Ei.toProxy(gi);var ki=new _e;ki.setRule(yi),Ei.apply(ki.listen);var ji={namespaced:!0,state:{map:gi,module:"loaderModel"},getters:{get:function(e){return e.map}},mutations:{add:function(e,t){var n=t.vid,i=t.name,a=t.icon;delete t.name,delete t.icon,e.map[n]=t,this.commit("vidAttributeMapper/add",{vid:n,config:e.map[n],module:e.module,name:i,icon:a}),this.commit("sceneStructure/add",n),this.commit("modelStatus/add",n)},remove:function(e,t){delete e.map[t],this.commit("sceneStructure/remove",t),this.commit("modelStatus/remove",t),this.commit("vidAttributeMapper/remove",t)},change:function(e,t){var n=t.path,i=void 0===n?[]:n,a=t.key,r=t.value,o=e.map;i.forEach((function(e){o=o[e]})),o[a]=r}},actions:{}},wi=function(e,t){Object.keys(e).forEach((function(n){var i=e[n],a=i.path.concat([]),r="",o="";"set"===i.operate?(r=a.shift(),o=0===a.length?i.key:"".concat(a.join("."),".").concat(i.key)):"delete"===i.operate&&(r=o=i.key),t({operate:i.operate,id:r,key:o,value:i.value})}))},Oi=T["default"].observable({}),Mi=new Re(Oi);Oi=Mi.toProxy(Oi);var xi=new _e;xi.setRule(wi),Mi.apply(xi.listen);var Si={namespaced:!0,state:{map:Oi,module:"helperModel"},getters:{get:function(e){return e.map}},mutations:{add:function(e,t){var n=t.vid,i=t.name,a=t.icon;delete t.name,delete t.icon,e.map[n]=t,this.commit("vidAttributeMapper/add",{vid:n,config:e.map[n],module:e.module,name:i,icon:a}),this.commit("sceneStructure/add",n),this.commit("modelStatus/add",n)},remove:function(e,t){delete e.map[t],this.commit("sceneStructure/remove",t),this.commit("modelStatus/remove",t),this.commit("vidAttributeMapper/remove",t)},change:function(e,t){var n=t.path,i=void 0===n?[]:n,a=t.key,r=t.value,o=e.map;i.forEach((function(e){o=o[e]})),o[a]=r}},actions:{}},Ci=function(e,t){Object.keys(e).forEach((function(n){var i=e[n],a=i.path.concat([]),r="",o="";"set"===i.operate?(r=a.shift(),o=0===a.length?i.key:"".concat(a.join("."),".").concat(i.key)):"delete"===i.operate&&(r=o=i.key),t({operate:i.operate,id:r,key:o,value:i.value})}))},Ti=T["default"].observable({}),Ri=new Re(Ti);Ti=Ri.toProxy(Ti);var Hi=new _e;Hi.setRule(Ci),Ri.apply(Hi.listen);var _i={namespaced:!0,state:{map:Ti,module:"light"},getters:{get:function(e){return e.map}},mutations:{add:function(e,t){var n=t.vid,i=t.name,a=t.icon;delete t.name,delete t.icon,e.map[n]=t,this.commit("vidAttributeMapper/add",{vid:n,config:e.map[n],module:e.module,name:i,icon:a}),this.commit("sceneStructure/add",n),this.commit("modelStatus/add",n)},remove:function(e,t){delete e.map[t],this.commit("sceneStructure/remove",t),this.commit("modelStatus/remove",t),this.commit("vidAttributeMapper/remove",t)},change:function(e,t){var n=t.path,i=void 0===n?[]:n,a=t.key,r=t.value,o=e.map;i.forEach((function(e){o=o[e]})),o[a]=r}},actions:{}},Li=function(e,t){Object.keys(e).forEach((function(n){var i=e[n],a=i.path.concat([]),r="",o="";"set"===i.operate?(r=a.shift(),o=0===a.length?i.key:"".concat(a.join("."),".").concat(i.key)):"delete"===i.operate&&(r=o=i.key),t({operate:i.operate,id:r,key:o,value:i.value})}))},Ai=T["default"].observable({}),Pi=new Re(Ai);Ai=Pi.toProxy(Ai);var Fi=new _e;Fi.setRule(Li),Pi.apply(Fi.listen);var zi={namespaced:!0,state:{map:Ai,module:"camera"},getters:{get:function(e){return e.map}},mutations:{add:function(e,t){var n=t.vid,i=t.name,a=t.icon;delete t.name,delete t.icon;var r=T["default"].observable(t);this.commit("vidAttributeMapper/setName",{vid:n,name:i}),e.map[t.vid]=r,e.map.__ob__.dep.notify(),this.commit("vidAttributeMapper/add",{vid:n,config:e.map[n],module:e.module,name:i,icon:a}),this.commit("sceneStructure/add",n),this.commit("modelStatus/add",n)},remove:function(e,t){delete e.map[t],this.commit("sceneStructure/remove",t),this.commit("modelStatus/remove",t),this.commit("vidAttributeMapper/remove",t)},change:function(e,t){var n=t.path,i=void 0===n?[]:n,a=t.key,r=t.value,o=e.map;i.forEach((function(e){o=o[e]})),o[a]=r}},actions:{}},Vi=function(e,t){t(e)},Bi=T["default"].observable([]),Ii=new _e;Ii.setRule(Vi);var Ni={namespaced:!0,state:{scene:Bi,vidMap:{}},getters:{get:function(e){return e.scene}},mutations:{add:function(e,t){e.scene.push({vid:t}),T["default"].set(e.vidMap,t,e.scene.length-1)},remove:function(e,t){e.scene.splice(e.vidMap[t],1)},change:function(e,t){var n=t.dargVid,i=t.dropVid;Ii.listen({dargVid:n,dropVid:i})}},actions:{}},Gi=function(e,t){for(var n in e){var i=e[n];if("add"!==i.operate&&("set"!==i.operate||"object"!==Object(ce["a"])(i.value))){var a="",r="";"set"===i.operate&&"hover"===i.key?(a="hover",r=i.path[0]):"set"===i.operate&&"active"===i.key?(a="active",r=i.path[0]):"delete"===i.operate&&(a="delete",r=i.key),t({operate:a,key:r,value:i.value})}}},Di=T["default"].observable({}),Wi=new Re(Di);Di=Wi.toProxy(Di);var $i=new _e;$i.setRule(Gi),Wi.apply($i.listen);var Ui={namespaced:!0,state:{modelStatusMap:Di,hoverBuffer:"",activeBuffer:new Set,activeHelper:0},getters:{get:function(e){return e.modelStatusMap},getActive:function(e){return function(){var t=[];return e.activeBuffer.forEach((function(e){t.push(e)})),t}},activeHelper:function(e){return e.activeHelper}},mutations:{add:function(e,t){var n=T["default"].observable({hover:!1,active:!1});e.modelStatusMap[t]=n},remove:function(e,t){delete e.modelStatusMap[t]},hover:function(e,t){return(!e.hoverBuffer||e.hoverBuffer!==t)&&(e.hoverBuffer&&(e.modelStatusMap[e.hoverBuffer].hover=!1,e.hoverBuffer=""),!!t&&(e.modelStatusMap[t].hover=!0,void(e.hoverBuffer=t)))},active:function(e,t){if(t[0]){var n={};t.forEach((function(t){n[t]=!0,e.activeBuffer.has(t)||(e.modelStatusMap[t].active=!0,e.activeBuffer.add(t))})),e.activeBuffer.forEach((function(t){n[t]||(e.modelStatusMap[t]&&(e.modelStatusMap[t].active=!1),e.activeBuffer.delete(t))}))}else e.activeBuffer.forEach((function(t){e.modelStatusMap[t].active=!1})),e.activeBuffer.clear();e.activeHelper+=1}},actions:{}},Zi=function(e,t){Object.keys(e).forEach((function(n){var i=e[n];t({operate:i.path[0]||i.key,key:i.key,value:i.value})}))},Ki=T["default"].observable({showX:!0,showY:!0,showZ:!0,mode:"position",touch:!1,space:"world",snapAllow:!1,translationSnap:10,rotationSnap:10*Math.PI/180,scaleSnap:.5,size:1.2,position:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0},scale:{x:1,y:1,z:1}}),Ji=new Re(Ki);Ki=Ji.toProxy(Ki);var Xi=new _e;Xi.setRule(Zi),Ji.apply(Xi.listen);var Yi={namespaced:!0,state:{config:Ki},getters:{get:function(e){return e.config},size:function(e){return e.config.size},showX:function(e){return e.config.showX},showY:function(e){return e.config.showY},showZ:function(e){return e.config.showZ},mode:function(e){return e.config.mode},space:function(e){return e.config.space},position:function(e){return e.config.position},scale:function(e){return e.config.scale},rotation:function(e){return e.config.rotation},positionX:function(e){return e.config.position.x},positionY:function(e){return e.config.position.y},positionZ:function(e){return e.config.position.z},rotationX:function(e){return e.config.rotation.x},rotationY:function(e){return e.config.rotation.y},rotationZ:function(e){return e.config.rotation.z},scaleX:function(e){return e.config.scale.x},scaleY:function(e){return e.config.scale.y},scaleZ:function(e){return e.config.scale.z},snapAllow:function(e){return e.config.snapAllow},translationSnap:function(e){return e.config.translationSnap},rotationSnap:function(e){return e.config.rotationSnap},scaleSnap:function(e){return e.config.scaleSnap}},mutations:{touch:function(e,t){e.config.touch=t},size:function(e,t){e.config.size=t},transform:function(e,t){var n=t.mode,i=t.key,a=t.value;e.config[n][i]=a},mode:function(e,t){e.config.mode=t},space:function(e,t){e.config.space=t},showX:function(e,t){e.config.showX=t},showY:function(e,t){e.config.showY=t},showZ:function(e,t){e.config.showZ=t},snapAllow:function(e,t){e.config.snapAllow=t},translationSnap:function(e,t){e.config.translationSnap=t},rotationSnap:function(e,t){e.config.rotationSnap=t},scaleSnap:function(e,t){e.config.scaleSnap=t}},actions:{}},qi=function(e,t){Object.keys(e).forEach((function(n){var i=e[n],a=i.path.concat([]),r="",o="";"set"===i.operate?(r=a.shift(),o=0===a.length?i.key:"".concat(a.join("."),".").concat(i.key)):"delete"===i.operate&&(r=o=i.key),t({operate:i.operate,vid:r,key:o,value:i.value})}))},Qi=T["default"].observable({}),ea=new Re(Qi);Qi=ea.toProxy(Qi);var ta=new _e;ta.setRule(qi),ea.apply(ta.listen);var na={namespaced:!0,state:{map:Qi,module:"plugin"},getters:{get:function(e){return e.map}},mutations:{add:function(e,t){var n=t.vid,i=t.name,a=t.icon;delete t.name,delete t.icon;var r=T["default"].observable(t);e.map[n]=r,e.map.__ob__.dep.notify(),e.active=e.map[n],this.commit("vidAttributeMapper/add",{vid:n,config:e.map[n],module:e.module,name:i,icon:a}),this.commit("sceneStructure/add",n),this.commit("modelStatus/add",n)},remove:function(e,t){delete e.map[t],this.commit("sceneStructure/remove",t),this.commit("modelStatus/remove",t),this.commit("vidAttributeMapper/remove",t)},change:function(e,t){var n=t.path,i=void 0===n?[]:n,a=t.key,r=t.value,o=e.map;i.forEach((function(e){o=o[e]})),o[a]=r}},actions:{}},ia=function(e,t){Object.keys(e).forEach((function(n){var i=e[n],a=i.path.concat([]),r="",o="";"set"===i.operate?(r=a.shift(),o=0===a.length?i.key:"".concat(a.join("."),".").concat(i.key)):"delete"===i.operate&&(r=o=i.key),t({operate:i.operate,id:r,key:o,value:i.value})}))},aa=T["default"].observable({}),ra=new Re(aa);aa=ra.toProxy(aa);var oa=new _e;oa.setRule(ia),ra.apply(oa.listen);var ca,sa,ua={namespaced:!0,state:{map:aa,module:"effectPass",active:""},getters:{get:function(e){return e.map},active:function(e){return e.active}},mutations:{add:function(e,t){var n=t.vid,i=T["default"].observable(t);e.map[n]=i,e.map.__ob__.dep.notify(),e.active=e.map[n],this.commit("vidAttributeMapper/add",{vid:n,config:e.map[n],module:e.module,name:t.name,icon:t.icon})},remove:function(e,t){delete e.map[t],this.commit("vidAttributeMapper/remove",t)},change:function(e,t){var n=t.path,i=void 0===n?[]:n,a=t.key,r=t.value,o=e.map;i.forEach((function(e){o=o[e]})),o[a]=r},active:function(e,t){e.active=e.map[t]}},actions:{}},la=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"positionLayoutBox-container",style:{top:e.top,left:e.left,right:e.right,bottom:e.bottom}},[e._t("main",[e._v("布局盒子")])],2)},ha=[],fa={props:{offsetX:{type:Number,default:0},offsetY:{type:Number,default:0},isBottom:{type:Boolean,default:!1},isRight:{type:Boolean,default:!1}},computed:{top:function(){return this.isBottom?"unset":"".concat(this.offsetY,"px")},bottom:function(){return this.isBottom?"".concat(this.offsetY,"px"):"unset"},left:function(){return this.isRight?"unset":"".concat(this.offsetX,"px")},right:function(){return this.isRight?"".concat(this.offsetX,"px"):"unset"}}},da=fa,ma=(n("d4dc"),Object(u["a"])(da,la,ha,!1,null,"1ee9fe72",null)),pa=ma.exports,va=function(){return n.e("chunk-d326d4fe").then(n.bind(null,"0608"))},ba=function(){return n.e("chunk-790b698c").then(n.bind(null,"71d9"))},ya=function(){return n.e("chunk-472544cc").then(n.bind(null,"f533"))},ga=function(){return n.e("chunk-1aa66bfb").then(n.bind(null,"5742"))},Ea=function(){return n.e("chunk-7a9d6de6").then(n.bind(null,"2938"))},ka={components:{positionLayoutBox:pa,renderViewpoint:va,cameraViewpoint:ba,auxiliaryDisplay:ya,renderMode:ga,performanceMonitor:Ea},props:{sign:{type:String,required:!0},render:{type:Boolean,default:!1},viewpoint:{type:String,default:"default"}},data:function(){return{timer:"",canResize:!0,throttleTime:1e3/60,width:"",height:"",connector:"",showRenderViewPoint:!0,cameraList:[{label:"默认相机",value:this.viewpoint}]}},methods:{setResize:function(){var e=this,t=this.$refs.renderMask;t.contentWindow.addEventListener("resize",(function(t){if(!e.canResize)return!1;e.canResize=!1,e.timer=setTimeout((function(){e.connector.setSize(),e.canResize=!0}),e.throttleTime)})),delete this.setResize},setTransformControlsEvent:function(e){var t=this,n=[],i="",a="",r={},o={},c="",s="",u="",l="",h=function(e,t){var n=t[e];return"rotation"===e&&(n={x:n.x,y:n.y,z:n.z}),n=Object.assign({},n),n},f=!1,d={},m={},p={},v=function(e){if(e.preventDefault(),e.preventRepeat(),!e.altKey||f)return!1;f=!0,n.forEach((function(e){var n=t.$store.getters["vidAttributeMapper/getModule"](e),i=Object.assign({},d[e]);i.vid=Object(Ce["a"])(),i.name="".concat(t.$store.getters["vidAttributeMapper/getName"](e),"复制-").concat(i.vid.slice(-2)),i.icon=t.$store.getters["vidAttributeMapper/getIcon"](e),p[i.vid]=e,m[i.vid]=i,t.$store.commit("".concat(n,"/add"),i)}))},b=function(e){e.preventDefault(),f=!1,Object.keys(p).forEach((function(e){var n=t.$store.getters["vidAttributeMapper/getModule"](e);t.$store.commit("".concat(n,"/remove"),e)})),p={}};e.addEventListener("mouseDown",(function(e){a=e.target.axis,i="translate"===e.target.mode?"position":"rotate"===e.target.mode?"rotation":"scale";var o=e.target.object;c=h(i,o),u=Object.assign({},c),n=t.$store.getters["modelStatus/getActive"](),n.length>1&&t.$store.commit("transformControls/space","world"),n.forEach((function(e){var n=t.$store.getters["vidAttributeMapper/getConfig"](e);r[e]=Object.assign({},n[i]),d[e]=JSON.parse(JSON.stringify(n))})),l=t.$store.getters["transformControls/space"],document.addEventListener("keydown",v),document.addEventListener("keyup",b)})),e.addEventListener("objectChange",(function(e){var r=e.target.object,o=h(i,r);n.forEach((function(e){var n=t.$store.getters["vidAttributeMapper/getConfig"](e),r=t.$store.getters["vidAttributeMapper/getModule"](e);Object.keys(o).forEach((function(c){if("rotation"===i||"local"===l&&"position"===i){var s=o[c]-u[c],h=n[i][c]+s;t.$store.commit("".concat(r,"/change"),{path:[e,i],key:c,value:h})}else if(a.includes(c.toUpperCase())){var f=o[c]-u[c],d=n[i][c]+f;t.$store.commit("".concat(r,"/change"),{path:[e,i],key:c,value:d})}}))})),Object.keys(o).forEach((function(e){("rotation"===i||"local"===l&&"position"===i)&&t.$store.commit("transformControls/transform",{mode:i,key:e,value:o[e]}),a.includes(e.toUpperCase())&&t.$store.commit("transformControls/transform",{mode:i,key:e,value:o[e]})})),u=Object.assign({},o)})),e.addEventListener("mouseUp",(function(e){if(f)t.$store.commit("action/altKeyAdd",{mode:i,map:p,copyConfigMap:m});else{var u=e.target.object;s=h(i,u),n.forEach((function(e){var n=t.$store.getters["vidAttributeMapper/getConfig"](e);o[e]=Object.assign({},n[i])})),t.$store.commit("action/transform",{axis:a,mode:i,oldData:c,newData:s,oldModelDataMap:r,newModelDataMap:o})}a="",i="",c="",s="",l="",n=[],r={},o={},f=!1,p={},d={},m={},document.removeEventListener("keydown",v),document.removeEventListener("keyup",b)})),delete this.setTransformControlsEvent},setMouseEvent:function(e){var t=this;e.hover=function(e){return t.$store.commit("modelStatus/hover",e.vid)},e.active=function(e,n){var i=t.$store.getters["modelStatus/getActive"](),a=[],r={};if(n.forEach((function(e,t,n){a.push(e.vid),r[e.vid]=t})),e.ctrlKey&&i.forEach((function(e){"undefined"!==typeof r[e]?a.splice(r[e],1):a.push(e)})),!i[0]&&!a[0])return!1;t.$store.commit("action/modelStatusActive",{newList:a,oldList:i})},e.drop=function(e){if(t.$store.getters["material/dragging"]){var n=t.$store.getters["material/getActive"];e.vid&&n&&t.$store.commit("action/replaceMaterial",{objectVid:e.vid,materialVid:n.vid})}},delete this.setMouseEvent},setConnector:function(e){var t=new oe;t.apply(e,["setSize","updateRenderer","stopUpdateRenderer","setViewpoint","setAxesHelper","setGridHelper","setRenderMode","setStats","setObjectHelper","setCameraViewpoint","setTransformControls"]),this.connector=t,delete this.setConnector},watchCamera:function(e){var t=this,n=[{label:"默认相机",value:this.viewpoint}];e.forEach((function(e){console.log(t.$store.getters["vidAttributeMapper/nameMap"]),console.log(t.$store.getters["vidAttributeMapper/nameMap"][e.vid]),n.push({label:t.$store.getters["vidAttributeMapper/nameMap"][e.vid],value:function(){return e}})})),this.cameraList=n},changeCamera:function(e){this.showRenderViewPoint="string"===typeof e}},mounted:function(){this.setResize();var e=new Se(this.$refs.renderElement);e.cameraManager.apply(this.watchCamera),this.setConnector(e),this.setTransformControlsEvent(e.transformControls),this.setMouseEvent(e.mouseManager);var t=e.scene,n=new an(e.renderer,this.$store.getters["renderer/get"]),i=new on(t,this.$store.getters["ambientLight/get"]),a=new hn(t,this.$store.getters["mesh/get"]),r=new pn(t,this.$store.getters["line/get"]),o=new Mn(t,this.$store.getters["helperModel/get"]),c=new kn(t,this.$store.getters["loaderModel/get"]),s=new Rn(t,this.$store.getters["light/get"]),u=new Ln(t,this.$store.getters["camera/get"],e.cameraManager),l=new Vn(t,this.$store.getters["modelStatus/get"]),h=new sn(t,this.$store.getters["scene/get"]),f=new Fn(t,this.$store.getters["sceneStructure/get"]),d=new In(t,e.transformControls,this.$store.getters["transformControls/get"]),m=new $n(t,this.$store.getters["plugin/get"]),p=new Yn(e.composer,this.$store.getters["effectPass/get"]);a.applyGeometryMapper(mt.map),c.applyLoadObjectMapper(this.$store.getters["loadingManager/get"]),h.applyTextureMapper(Ot.map),m.applyTextureMapper(Ot.map),r.applyMaterialMapper(Ut.map),a.applyMaterialMapper(Ut.map),c.applyMaterialMapper(Ut.map);var v=[a.map,o.map,s.map,u.map,c.map,m.map,r.map];v.forEach((function(e){a.applyObjectMapper(e),r.applyObjectMapper(e),f.applyObjectMapper(e),l.applyObjectMapper(e)})),this.$watch("render",(function(t){t?(e.updateRenderer(),n.compileRenderer(),i.compileScene(),r.compileScene(),a.compileScene(),o.compileScene(),s.compileScene(),u.compileScene(),m.compileScene(),h.compileScene(),l.compileScene(),d.compileScene(),p.compileEffect(),ti.add(n.runtimeCompile),oi.add(i.runtimeCompile),vi.add(r.runtimeCompile),Ke.add(a.runtimeCompile),hi.add(h.runtimeCompile),xi.add(o.runtimeCompile),ki.add(c.runtimeCompile),Hi.add(s.runtimeCompile),Fi.add(u.runtimeCompile),$i.add(l.runtimeCompile),Ii.add(f.runtimeCompile),Xi.add(d.runtimeCompile),ta.add(m.runtimeCompile),oa.add(p.runtimeCompile)):(e.stopUpdateRenderer(),n.clearCompileRenderer(),i.clearCompileScene(),a.clearCompileScene(),r.clearCompileScene(),s.clearCompileScene(),u.clearCompileScene(),h.clearCompileScene(),l.clearCompileScene(),d.clearCompileScene(),m.clearCompileScene(),p.clearCompileEffect(),ti.remove(n.runtimeCompile),oi.remove(i.runtimeCompile),vi.remove(r.runtimeCompile),Ke.remove(a.runtimeCompile),hi.remove(h.runtimeCompile),xi.remove(o.runtimeCompile),ki.remove(c.runtimeCompile),Hi.remove(s.runtimeCompile),Fi.remove(u.runtimeCompile),$i.remove(l.runtimeCompile),Ii.remove(f.runtimeCompile),Xi.remove(d.runtimeCompile),ta.remove(m.runtimeCompile),oa.remove(p.runtimeCompile))}),{immediate:!0})}},ja=ka,wa=(n("4cf4"),Object(u["a"])(ja,ie,ae,!1,null,"609dc6db",null)),Oa=wa.exports,Ma={components:{renderWindow:Oa},props:{top:{type:Number,require:!0},left:{type:Number,require:!0},width:{type:Number,require:!0},height:{type:Number,require:!0}},data:function(){return{areaWidth:50,leftAreaHeight:50,rightAreaHeight:50,timer:"",canMove:!0,throttleTime:1e3/30,limitMin:10,limitMax:90,areaNum:1}},computed:{leftAreaWidth:function(){return this.areaNum>1?this.areaWidth:100},leftTopAreaHeight:function(){return this.areaNum>2?this.leftAreaHeight:100},rightTopAreaHeight:function(){return this.areaNum>3?this.rightAreaHeight:100}},methods:{dragStart:function(e,t){var n=this,i="middle"===t?this.left:this.top,a=function(e){if(document.body.style.cursor="middle"===t?"ew-resize":"ns-resize",!n.canMove)return!1;n.canMove=!1,n.timer=setTimeout((function(){var a=e.clientY,r=e.clientX,o="middle"===t?(r-i)/n.width:(a-i)/n.height;o*=100,o>=n.limitMax?o=n.limitMax:o<=n.limitMin&&(o=n.limitMin);var c={middle:function(){n.areaWidth=o},bottomLeft:function(){n.leftAreaHeight=o},bottomRight:function(){n.rightAreaHeight=o}};c[t](),n.canMove=!0}),n.throttleTime)},r=function e(){document.body.style.cursor="default",document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",e)};document.addEventListener("mousemove",a),document.addEventListener("mouseup",r)}},mounted:function(){var e=this;K.apply({name:"changeOneWidow",desc:"1个窗口",keyCombine:["f1"],downFun:function(t){t.preventDefault(),t.stopPropagation(),t.preventRepeat(),e.areaNum=1,e.areaWidth=50,e.leftAreaHeight=50,e.rightAreaHeight=50}}).apply({name:"changeTwoWidow",desc:"2个窗口",keyCombine:["f2"],downFun:function(t){t.preventDefault(),t.stopPropagation(),t.preventRepeat(),e.areaNum=2,e.leftAreaHeight=50,e.rightAreaHeight=50}}).apply({name:"changeThridWidow",desc:"3个窗口",keyCombine:["f3"],downFun:function(t){t.preventDefault(),t.stopPropagation(),t.preventRepeat(),e.areaNum=3,e.rightAreaHeight=50}}).apply({name:"changeFourWidow",desc:"4个窗口",keyCombine:["f4"],downFun:function(t){t.preventDefault(),t.stopPropagation(),t.preventRepeat(),e.areaNum=4}}).apply({name:"visTransShowX",desc:"控件X轴",keyCombine:["x"],downFun:function(t){t.preventDefault(),t.stopPropagation(),t.preventRepeat(),e.$store.commit("transformControls/showX",!e.$store.getters["transformControls/showX"])}}).apply({name:"visTransShowY",desc:"控件Y轴",keyCombine:["y"],downFun:function(t){t.preventDefault(),t.stopPropagation(),t.preventRepeat(),e.$store.commit("transformControls/showY",!e.$store.getters["transformControls/showY"])}}).apply({name:"visTransShowZ",desc:"控件Z轴",keyCombine:["z"],downFun:function(t){t.preventDefault(),t.stopPropagation(),t.preventRepeat(),e.$store.commit("transformControls/showZ",!e.$store.getters["transformControls/showZ"])}}).apply({name:"visTranslate",desc:"模型移动",keyCombine:["t"],downFun:function(t){t.preventDefault(),t.stopPropagation(),t.preventRepeat(),e.$store.commit("transformControls/mode","position")}}).apply({name:"visTranslate",desc:"模型旋转",keyCombine:["r"],downFun:function(t){t.preventDefault(),t.stopPropagation(),t.preventRepeat(),e.$store.commit("transformControls/mode","rotation")}}).apply({name:"visTranslate",desc:"模型缩放",keyCombine:["e"],downFun:function(t){t.preventDefault(),t.stopPropagation(),t.preventRepeat(),e.$store.commit("transformControls/mode","scale")}}).apply({name:"visSpace",desc:"模型坐标空间",keyCombine:["s"],downFun:function(t){t.preventDefault(),t.stopPropagation(),t.preventRepeat(),"world"===e.$store.getters["transformControls/space"]?e.$store.commit("transformControls/space","local"):e.$store.commit("transformControls/space","world")}}).apply({name:"visSnapAllow",desc:"控制步幅",keyCombine:["shift"],downFun:function(t){t.preventDefault(),t.stopPropagation(),t.preventRepeat(),e.$store.commit("transformControls/snapAllow",!0)},upFun:function(t){t.preventDefault(),t.stopPropagation(),e.$store.commit("transformControls/snapAllow",!1)}}).apply({name:"visTransSizeAdd",desc:"变换控件增大",keyCombine:["]"],downFun:function(t){t.preventDefault(),t.stopPropagation(),t.preventRepeat(),e.$store.commit("transformControls/size",e.$store.getters["transformControls/size"]+.1)}}).apply({name:"visTransSizeReduce",desc:"变换控件减小",keyCombine:["["],downFun:function(t){t.preventDefault(),t.stopPropagation(),t.preventRepeat(),e.$store.commit("transformControls/size",e.$store.getters["transformControls/size"]-.1)}})}},xa=Ma,Sa=(n("51aa"),Object(u["a"])(xa,te,ne,!1,null,"1545fb90",null)),Ca=Sa.exports,Ta=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"objectLibrary-container"},[n("side-tabs",{attrs:{flip:"",cache:""}},[n("side-tab-item",{attrs:{icon:"#iconjihetuxing",title:"基础几何"}},[n("basic-mesh-library")],1),n("side-tab-item",{attrs:{icon:"#iconxiantiao-line",title:"基础线条"}},[n("line-library")],1),n("side-tab-item",{attrs:{icon:"#iconxiangji1",title:"相机"}},[n("camera-library")],1),n("side-tab-item",{attrs:{icon:"#icondengpao",title:"灯光"}},[n("light-library")],1),n("side-tab-item",{attrs:{icon:"#iconkucunfenxi",title:"模型"}},[n("loader-mesh-library")],1),n("side-tab-item",{attrs:{icon:"#iconhecheng",title:"辅助"}},[n("helper-library")],1),n("side-tab-item",{attrs:{icon:"#iconchajian",title:"预设"}},[n("plugin-library")],1),n("side-tab-item",{attrs:{icon:"#iconcaizhi",title:"材质"}},[n("material-library")],1),n("side-tab-item",{attrs:{icon:"#icontexture",title:"贴图"}},[n("texture-library")],1),n("side-tab-item",{attrs:{icon:"#iconhouqi",title:"后期"}},[n("effect-pass-library")],1)],1)],1)},Ra=[],Ha=(n("cb29"),{props:{flip:{type:Boolean,default:!1},cache:{type:Boolean,default:!1}},data:function(){var e=new Array(this.$slots.default.length).fill(!1);return e[0]=!0,{control:e,activePlane:0}},render:function(e){var t=this,n=this.$slots.default,i=[],a=[];return n.forEach((function(n,r,o){i.push(e("div",{class:{"tab-icon-item":!0,"active-tab-icon-item":t.control[r]},directives:[{name:"tooltip",value:"".concat(n.componentOptions.propsData.title),modifiers:{left:!t.flip,right:t.flip}}],on:{click:function(){t.control[t.activePlane]=!1,t.control[r]=!0,t.activePlane=r,t.$forceUpdate()}}},[e("vis-icon",{attrs:{code:n.componentOptions.propsData.icon}})])),t.cache?a.push(e("div",{class:"tab-container-item",style:{display:t.control[r]?"block":"none"}},[n])):t.control[r]&&a.push(e("div",{class:"tab-container-item"},[n]))})),e("div",{class:"sideTabs-container",style:{flexDirection:this.flip?"row-reverse":" row"}},[e("div",{class:"tab-icon-box"},[i]),e("div",{class:"tab-division-line"}),e("div",{class:"tab-container-box"},[a])])}}),_a=Ha,La=(n("cdba"),Object(u["a"])(_a,ca,sa,!1,null,"7242187c",null)),Aa=La.exports,Pa=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"sideTabItem-container"},[e._t("default")],2)},Fa=[],za={name:"sideTabItem",props:{icon:{type:String},title:{type:String,default:"默认"}}},Va=za,Ba=Object(u["a"])(Va,Pa,Fa,!1,null,"35099b90",null),Ia=Ba.exports,Na=function(){return n.e("chunk-0174ac22").then(n.bind(null,"ee04"))},Ga=function(){return n.e("chunk-c710cee2").then(n.bind(null,"2b66"))},Da=function(){return n.e("chunk-7e9b2d10").then(n.bind(null,"ed25"))},Wa=function(){return n.e("chunk-9d7dfa2e").then(n.bind(null,"6142"))},$a=function(){return n.e("chunk-0c7b9806").then(n.bind(null,"d9a7"))},Ua=function(){return n.e("chunk-f844f7a4").then(n.bind(null,"4681"))},Za=function(){return n.e("chunk-408cf9aa").then(n.bind(null,"9309"))},Ka=function(){return n.e("chunk-fe190e48").then(n.bind(null,"be17"))},Ja=function(){return n.e("chunk-b53a0978").then(n.bind(null,"7a69"))},Xa=function(){return n.e("chunk-03c3be08").then(n.bind(null,"878a"))},Ya={data:function(){return{activeName:"first"}},components:{sideTabs:Aa,sideTabItem:Ia,basicMeshLibrary:Ga,lineLibrary:Da,cameraLibrary:Na,lightLibrary:Wa,materialLibrary:Za,effectPassLibrary:Xa,textureLibrary:Ka,loaderMeshLibrary:$a,pluginLibrary:Ja,helperLibrary:Ua}},qa=Ya,Qa=(n("4841"),Object(u["a"])(qa,Ta,Ra,!1,null,"c987505e",null)),er=Qa.exports,tr=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"topNavigation-container"},[n("file-menu"),n("common-function-navigation"),n("div")],1)},nr=[],ir=function(){return n.e("chunk-7222c48c").then(n.bind(null,"a654"))},ar=function(){return n.e("chunk-c8feab48").then(n.bind(null,"a7cc"))},rr={components:{fileMenu:ir,commonFunctionNavigation:ar}},or=rr,cr=(n("82c7"),Object(u["a"])(or,tr,nr,!1,null,"1d61c5d2",null)),sr=cr.exports,ur=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"functionModelLibrary-container"},[n("side-tabs",[n("side-tab-item",{attrs:{icon:"#iconchangjing1",title:"渲染器设置"}},[n("renderer-setting-module")],1),n("side-tab-item",{attrs:{icon:"#iconchangjing2",title:"场景设置"}},[n("scene-setting-module")],1),n("side-tab-item",{attrs:{icon:"#iconfuji",title:"场景结构"}},[n("scene-structure-module")],1),n("side-tab-item",{attrs:{icon:"#iconjichubianhuan",title:"基础变换"}},[n("basic-transform-module")],1),n("side-tab-item",{attrs:{icon:"#iconzhuanshupeizhi",title:"物体配置"}},[n("object-setting-module")],1),n("side-tab-item",{attrs:{icon:"#iconcaizhishezhi",title:"材质配置"}},[n("material-setting-module")],1),n("side-tab-item",{attrs:{icon:"#icontietushezhi",title:"贴图配置"}},[n("texture-setting-module")],1),n("side-tab-item",{attrs:{icon:"#iconhouqishezhi",title:"后期配置"}},[n("effect-pass-setting-module")],1)],1)],1)},lr=[],hr=function(){return n.e("chunk-bc43beb0").then(n.bind(null,"8b06"))},fr=function(){return n.e("chunk-66765938").then(n.bind(null,"a4e9"))},dr=function(){return n.e("chunk-110c62d6").then(n.bind(null,"4a71"))},mr=function(){return n.e("chunk-2d0b2596").then(n.bind(null,"2475"))},pr=function(){return n.e("chunk-2ff3fcef").then(n.bind(null,"2480"))},vr=function(){return n.e("chunk-340f9888").then(n.bind(null,"4c9e"))},br=function(){return n.e("chunk-0436b42f").then(n.bind(null,"26e6"))},yr=function(){return n.e("chunk-9a441ddc").then(n.bind(null,"089a"))},gr={components:{sideTabs:Aa,sideTabItem:Ia,rendererSettingModule:hr,sceneSettingModule:fr,sceneStructureModule:dr,basicTransformModule:mr,objectSettingModule:pr,materialSettingModule:vr,textureSettingModule:br,effectPassSettingModule:yr},data:function(){return{one:!1}}},Er=gr,kr=(n("83e6"),Object(u["a"])(Er,ur,lr,!1,null,"35d699db",null)),jr=kr.exports,wr=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"animationSystem-container"},[n("drag-trans-box",{staticClass:"animationSystem-operationController",attrs:{rightDrag:"",size:e.areaSetting.size},on:{draging:function(t){return e.draging(t,e.areaSetting)},draged:function(){e.areaSetting.bufferSize=e.areaSetting.size}}},[n("operation-controller",{on:{scrollHandler:e.scrollHandler}})],1),n("div",{staticClass:"animationSystem-trackController",style:{width:e.trackControllerWidth+"px"}},[n("track-controller",{attrs:{scrollTop:e.scrollTop}})],1)],1)},Or=[],Mr=function(){return n.e("chunk-fe7f1300").then(n.bind(null,"2784"))},xr=function(){return n.e("chunk-5f791612").then(n.bind(null,"14d9"))},Sr={components:{dragTransBox:ee,operationController:Mr,trackController:xr},data:function(){var e=380;return{areaSetting:{size:e,bufferSize:e,max:600,min:200},scrollTop:0,windowInnerWidth:window.innerWidth}},computed:{trackControllerWidth:function(){return this.windowInnerWidth-this.areaSetting.size}},methods:{scrollHandler:function(e){this.scrollTop=e},draging:function(e,t){var n=t.bufferSize+e;n<=t.min?n=t.min:n>=t.max&&(n=t.max),t.size=n}},watch:{trackControllerWidth:{handler:function(e){this.$store.commit("animation/trackWidth",e-10)},immediate:!0}},mounted:function(){var e=this;window.addEventListener("resize",(function(){e.windowInnerWidth=window.innerWidth}))}},Cr=Sr,Tr=(n("6940"),Object(u["a"])(Cr,wr,Or,!1,null,"61a6f9d5",null)),Rr=Tr.exports,Hr={components:{dragTransBox:ee,renderArea:Ca,objectLibrary:er,topNavigation:sr,functionModuleLibrary:jr,animtionSystem:Rr},data:function(){return{topAreaSetting:{size:60},rightAreaSetting:{size:322,bufferSize:322,max:600,min:130},leftAreaSetting:{size:322,bufferSize:322,max:600,min:130},bottomAreaSetting:{size:200,bufferSize:250,max:500,min:150}}},computed:{middleAreaHeight:function(){return window.innerHeight-(this.topAreaSetting.size+this.bottomAreaSetting.size)},threeVisWidth:function(){return window.innerWidth-(this.rightAreaSetting.size+this.leftAreaSetting.size)}},watch:{},methods:{draging:function(e,t){var n=t.bufferSize+e;n<=t.min?n=t.min:n>=t.max&&(n=t.max),t.size=n},resetWindow:function(){this.rightAreaSetting={size:300,bufferSize:300,max:600,min:130},this.leftAreaSetting={size:300,bufferSize:300,max:600,min:130},this.bottomAreaSetting={size:200,bufferSize:250,max:600,min:150}}},mounted:function(){var e=this;K.apply({name:"resetWidow",desc:"重置窗口",keyCombine:["ctrl","r"],downFun:function(t){t.preventDefault(),t.stopPropagation(),t.preventRepeat(),e.resetWindow()}}),window.onresize=function(t){e.resetWindow()}}},_r=Hr,Lr=(n("0dcc"),Object(u["a"])(_r,N,G,!1,null,"794dd6fa",null)),Ar=Lr.exports,Pr=function(){return n.e("chunk-1a8ceb6f").then(n.bind(null,"87dc"))},Fr={components:{editorFrame:Ar,loadingManager:Pr},data:function(){return{activeColor:"red",oldColor:"",oldTarget:""}},computed:{showLoading:function(){return this.$store.getters["loadingManager/showLoading"]}},methods:{click:function(e){this.oldTarget&&this.oldColor&&(this.oldTarget.material.color=new THREE.Color(this.oldColor),this.oldTarget.material.needsUpdate=!0),this.oldColor=e.material.color,e.material.color=new THREE.Color(this.activeColor),e.material.needsUpdate=!0,this.oldTarget=e}},mounted:function(){var e=this;NProgress.done(),K.apply({name:"undo",desc:"撤销",keyCombine:["ctrl","z"],downFun:function(t){t.preventDefault(),t.stopPropagation(),t.preventRepeat(),e.$store.commit("history/undoStatus",!0),e.$store.commit("history/undo")},upFun:function(t){t.preventDefault(),t.stopPropagation(),e.$store.commit("history/undoStatus",!1)}}).apply({name:"redo",desc:"恢复",keyCombine:["ctrl","y"],downFun:function(t){t.preventDefault(),t.stopPropagation(),e.$store.commit("history/redoStatus",!0),e.$store.commit("history/redo")},upFun:function(t){t.preventDefault(),t.stopPropagation(),e.$store.commit("history/redoStatus",!1)}}),this.$store.commit("animation/fps",60),this.$store.commit("animation/totalDuration",3),this.$store.commit("preRenderArea/renderEnd",180)}},zr=Fr,Vr=(n("6a36"),Object(u["a"])(zr,B,I,!1,null,"735fa422",null)),Br=Vr.exports,Ir=n("8c4f");T["default"].use(Ir["a"]);var Nr=[],Gr=new Ir["a"]({routes:Nr}),Dr=Gr,Wr=n("2f62"),$r={namespaced:!0,state:{actionList:[],index:-1,step:6,redoStatus:!1,undoStatus:!1},getters:{redoStatus:function(e){return e.redoStatus},undoStatus:function(e){return e.undoStatus}},mutations:{apply:function(e,t){e.index===e.actionList.length-1&&e.actionList.length>=e.step?(e.actionList.shift(),e.index=e.actionList.length-1):-1!==e.index?e.actionList.splice(e.index+1,e.actionList.length-1):-1===e.index&&(e.actionList=[]),e.actionList.push(t),this.commit("history/redo")},redo:function(e){if(e.index+=1,e.index>e.actionList.length-1)return e.index=e.actionList.length-1,!1;this.commit("history/do","next")},undo:function(e){if(e.index<0)return!1;this.commit("history/do","prev"),e.index-=1},do:function(e,t){e.actionList[e.index][t]()},clear:function(e){e.actionList=[]},redoStatus:function(e,t){e.redoStatus=t},undoStatus:function(e,t){e.undoStatus=t}},actions:{}},Ur={namespaced:!0,state:{fps:0,totalDuration:0,currentTime:0,totalFrame:0,currentFrame:0,play:!1,map:{},update:"",statisticDelta:0,trackWidth:0},getters:{map:function(e){return e.map},fps:function(e){return e.fps},totalDuration:function(e){return e.totalDuration},totalFrame:function(e){return e.totalFrame},currentTime:function(e){return e.currentTime},currentFrame:function(e){return e.currentFrame},play:function(e){return e.play},trackWidth:function(e){return e.trackWidth}},mutations:{add:function(e,t){var n=function(){var e=65,t="",n="",i="",a=Math.random(),r=Math.random(),o=function(e,t){return Math.floor(Math.random()*(t-e+1))+e};return a<1/3?(t=e,n=r>.5?o(180,250):o(80,150),i=r<.5?o(180,250):o(80,150)):a>=1/3&&a<2/3?(n=e,t=r>.5?o(180,250):o(80,150),i=r<.5?o(180,250):o(80,150)):(i=e,n=r>.5?o(180,250):o(80,150),t=r<.5?o(180,250):o(80,150)),"rgb(".concat(t,", ").concat(n,", ").concat(i,")")};T["default"].set(e.map,t,{duration:e.totalDuration,offset:0,trackColor:n(),open:!1})},remove:function(e,t){T["default"].delete(e.map,t)},change:function(e,t){t.dargVid,t.dropVid},trackWidth:function(e,t){e.trackWidth=t},totalFrame:function(e){e.totalFrame=Math.ceil(e.totalDuration*e.fps),this.getters["preRenderArea/renderEnd"]>e.totalFrame&&this.commit("preRenderArea/renderEnd",e.totalFrame),this.commit("preRenderArea/generateCacheSignMap")},fps:function(e,t){e.fps=t,e.totalFrame=Math.ceil(e.totalDuration*t),this.commit("animation/totalFrame")},totalDuration:function(e,t){e.totalDuration=t,e.totalFrame=Math.ceil(e.fps*t),this.commit("animation/totalFrame")},currentFrame:function(e,t){t>=0&&t<=e.totalFrame&&(e.currentFrame=t,this.dispatch("preRenderArea/previewChache",t))},play:function(e,t){var n=this;t?(this.commit("animation/currentFrame",e.currentFrame),e.update=function(t){if(e.statisticDelta+=t,e.statisticDelta>=1/e.fps){var i=e.currentFrame+Math.round(e.statisticDelta*e.fps);i>e.totalFrame&&(i=0),n.commit("animation/currentFrame",i),e.statisticDelta=0}},Se.addRender(e.update)):(Se.removeRender(e.update),e.update=""),e.play=t},lastFrame:function(e){this.commit("animation/currentFrame",e.currentFrame-1)},nextFrame:function(e){this.commit("animation/currentFrame",e.currentFrame+1)}},actions:{}},Zr={namespaced:!0,state:{map:{}},getters:{get:function(e){return e.map}},mutations:{add:function(e,t){var n=t.vid,i=t.attribute,a=t.config,r=t.value;e.map[n]||(T["default"].set(e.map,n,{}),this.commit("animation/add",n)),a.keyframe={};var o=e.map[n];T["default"].set(o,i,a),this.commit("keyframeTrack/addKeyframe",{vid:n,attribute:i,value:r})},remove:function(e,t){var n=t.vid,i=t.attribute;T["default"].delete(e.map[n],i);var a=Object.keys(e.map[n]);0===a.length&&(T["default"].delete(e.map,n),this.commit("animation/remove",n))},addKeyframe:function(e,t){var n=t.vid,i=t.attribute,a=t.frame,r=t.value;a=a||this.getters["animation/currentFrame"];var o=e.map[n][i].keyframe;T["default"].set(o,a,r),this.commit("keyframeTrack/notifiePreRenderChache",{vid:n,attribute:i,frame:a,value:r})},removeKeyframe:function(e,t){var n=t.vid,i=t.attribute,a=t.frame;a=a||this.getters["animation/currentFrame"];var r=e.map[n][i].keyframe;T["default"].delete(r,a)},setKeyframe:function(e,t){var n=t.vid,i=t.attribute,a=t.frame,r=t.value,o=e.map[n][i].keyframe;void 0!==o[a]?(o[a]=r,this.commit("keyframeTrack/notifiePreRenderChache",{vid:n,attribute:i,frame:a,value:r})):this.commit("keyframeTrack/addKeyframe",{vid:n,attribute:i,frame:a,value:r})},notifiePreRenderChache:function(e,t){var n=t.vid,i=t.attribute,a=t.frame,r=t.value,o=e.map[n][i].keyframe,c=Object.keys(o).map((function(e){return Number(e)}));c.sort((function(e,t){return e-t}));var s=null,u=null;c.forEach((function(e,t,n){e===a&&(s=void 0===n[t-1]?null:n[t-1],u=void 0===n[t+1]?null:n[t+1])}));var l=e.map[n][i];this.dispatch("preRenderArea/generateKeyframeChache",{frame:a,lastFrame:s,nextFrame:u,vid:n,attribute:i,value:r,type:l.type,interpolate:l.interpolate})}}},Kr=n("3835"),Jr=(n("ac1f"),n("1276"),n("498a"),function(){function e(){Object(D["a"])(this,e)}return Object(W["a"])(e,null,[{key:"get",value:function(t){var n=t.interpolate,i=t.beginValue,a=t.endValue,r=t.number,o=t.type,c={};return c[THREE.InterpolateLinear]=function(){return e.interpolateLinear({beginValue:i,endValue:a,number:r,type:o})},c[n]()}},{key:"interpolateLinear",value:function(e){var t=e.beginValue,n=e.endValue,i=e.number,a=e.type,r=function(e,t,n){var i=new Array(n).fill(e),a=(t-e)/n;return i.forEach((function(t,n,i){i[n]=e+a*n})),i},o=new Array(i).fill(t),c={number:function(){o=r(t,n,i)},color:function(){var e=t.slice(4,-1).split(",").map((function(e){return Number(e.trim())})),a=Object(Kr["a"])(e,3),c=a[0],s=a[1],u=a[2],l=n.slice(4,-1).split(",").map((function(e){return Number(e.trim())})),h=Object(Kr["a"])(l,3),f=h[0],d=h[1],m=h[2],p=r(c,f,i),v=r(s,d,i),b=r(u,m,i);p.forEach((function(e,t,n){o[t]="rgb(".concat(Math.round(p[t]),", ").concat(Math.round(v[t]),", ").concat(Math.round(b[t]),")")}))},vector3:function(){var e=r(t.x,n.x,i),a=r(t.y,n.y,i),c=r(t.z,n.z,i);e.forEach((function(t,n,i){o[n]={x:e[n],y:a[n],z:c[n]}}))}};return c[a](),o}}]),e}()),Xr={namespaced:!0,state:{renderStart:0,renderEnd:150,map:{},cacheMap:{},cacheSignMap:""},getters:{renderStart:function(e){return e.renderStart},renderEnd:function(e){return e.renderEnd},cacheSignMap:function(e){return e.cacheSignMap}},mutations:{renderStart:function(e,t){t<0?e.renderStart=0:t>e.renderEnd?e.renderStart=e.renderEnd:e.renderStart=t},renderEnd:function(e,t){var n=this.getters["animation/totalFram"];t>n?e.renderEnd=n:t<e.renderStart?e.renderEnd=e.renderStart:e.renderEnd=t},previewChache:function(e,t){if(e.cacheSignMap[t]){var n=e.cacheMap[t];n.forEach((function(e){if(e.attribute.includes(".")){var t=e.attribute.split("."),n=t.pop(),i=e.target;t.forEach((function(e){i=i[e]})),i[n]=e.value}else e.target[e.attribute]=e.value}))}else this.commit("preRenderArea/generateFrameChache",t),this.dispatch("preRenderArea/previewChache",t)},generateCacheSignMap:function(e){var t=T["default"].observable(new Array(this.getters["animation/totalFrame"]+1).fill(!1));e.cacheSignMap=t},generateFrameChache:function(e,t){var n=this;e.cacheMap[t]||(e.cacheMap[t]=[]);var i=e.cacheMap[t],a=e.map;Object.keys(a).forEach((function(e){var r=a[e],o=n.getters["vidAttributeMapper/getConfig"](e);Object.keys(r).forEach((function(e){var n=r[e];n[t]&&i.push({target:o,attribute:e,value:n[t]})}))})),T["default"].set(e.cacheSignMap,t,!0)},clearFrameChache:function(e,t){delete e.cacheMap[t],T["default"].set(e.cacheSignMap,t,!1)},clearFrameRangeChache:function(e,t){var n=t.beginFrame,i=t.endFrame;i===this.getters["animation/totalFrame"]&&(i+=1);for(var a=i-n,r=0;r<a;r+=1)T["default"].delete(e.cacheMap,n+r),T["default"].set(e.cacheSignMap,n+r,!1)},generateKeyframeChache:function(e,t){var n=t.frame,i=t.lastFrame,a=t.nextFrame,r=t.vid,o=t.attribute,c=t.value,s=t.type,u=t.interpolate,l=u,h=u;null===i&&(i=0,l=THREE.InterpolateDiscrete),null===a&&(a=this.getters["animation/totalFrame"],h=THREE.InterpolateDiscrete),e.map[r]||T["default"].set(e.map,r,{}),e.map[r][o]||T["default"].set(e.map[r],o,new Array(this.getters["animation/totalFrame"]+1).fill(null)),e.map[r][o][n]=JSON.parse(JSON.stringify(c)),l!==THREE.InterpolateDiscrete&&this.commit("preRenderArea/keyframeInterpolation",{vid:r,attribute:o,beginFrame:i,endFrame:n,interpolate:l,type:s}),h!==THREE.InterpolateDiscrete&&this.commit("preRenderArea/keyframeInterpolation",{vid:r,attribute:o,beginFrame:n,endFrame:a,interpolate:h,type:s}),this.commit("preRenderArea/clearFrameRangeChache",{beginFrame:i,endFrame:a})},removeKeyframeChache:function(e,t){t.frame,t.vid,t.attribute},keyframeInterpolation:function(e,t){for(var n=t.vid,i=t.attribute,a=t.beginFrame,r=t.endFrame,o=t.interpolate,c=t.type,s=e.map[n][i],u=r-a,l=Jr.get({beginValue:s[a],endValue:s[r],number:u,type:c,interpolate:o}),h=0;h<u;h+=1)s[a+h]=l[h]}},actions:{generateKeyframeChache:function(e,t){var n=t.frame,i=t.lastFrame,a=t.nextFrame,r=t.vid,o=t.attribute,c=t.value,s=t.interpolate,u=t.type;e.commit("generateKeyframeChache",{frame:n,lastFrame:i,nextFrame:a,vid:r,attribute:o,value:c,interpolate:s,type:u})},generateFrameChache:function(e,t){e.commit("generateFrameChache",t)},previewChache:function(e,t){e.commit("previewChache",t)}}},Yr={namespaced:!0,state:{moduleMap:{},configMap:{},nameMap:{},iconMap:{}},getters:{nameMap:function(e){return e.nameMap},iconMap:function(e){return e.iconMap},configMap:function(e){return e.configMap},moduleMap:function(e){return e.moduleMap},getName:function(e){return function(t){return e.nameMap[t]}},getIcon:function(e){return function(t){return e.iconMap[t]}},getModule:function(e){return function(t){return e.moduleMap[t]}},getConfig:function(e){return function(t){return e.configMap[t]}}},mutations:{add:function(e,t){var n=t.vid,i=t.module,a=t.config,r=t.name,o=t.icon;e.moduleMap[n]=i,e.configMap[n]=a,T["default"].set(e.nameMap,n,r),T["default"].set(e.iconMap,n,o)},remove:function(e,t){delete e.map[t],delete e.moduleMap[t],delete e.configMap[t],T["default"].delete(e.nameMap,t),T["default"].delete(e.iconMap,t)},setName:function(e,t){var n=t.vid,i=t.name;e.nameMap[n]=i}},actions:{}};Yr.mutations.add(Yr.state,{vid:"ambientLight",module:"ambientLight",config:ci.state.ambientLight,name:"环境光",icon:"#iconchangjing2"}),Yr.mutations.add(Yr.state,{vid:"scene",module:"scene",config:fi.state.scene,name:"场景",icon:"#iconchangjing2"});var qr=Yr,Qr={namespaced:!0,state:{},getters:{get:function(){return 1}},mutations:{transform:function(e,t){var n=this,i=t.axis,a=t.mode,r=t.oldData,o=t.newData,c=t.oldModelDataMap,s=t.newModelDataMap,u=function(e){Object.keys(e).forEach((function(t){var r=n.getters["vidAttributeMapper/getModule"](t),o=e[t];Object.keys(o).forEach((function(e){("rotation"===a||i.includes(e.toUpperCase()))&&n.commit("".concat(r,"/change"),{path:[t,a],key:e,value:o[e]})}))}))},l=function(e){Object.keys(e).forEach((function(t){i.includes(t.toUpperCase())&&n.commit("transformControls/transform",{mode:a,key:t,value:e[t]})})),n.commit("transformControls/mode",a)},h=function(e){var t=n.getters["keyframeTrack/get"],i=n.getters["animation/currentFrame"];Object.keys(e).forEach((function(r){t[r]&&t[r][a]&&n.commit("keyframeTrack/setKeyframe",{vid:r,attribute:a,frame:i,value:e[r]})}))};this.commit("history/apply",{next:function(){u(s),h(s),l(o)},prev:function(){u(c),h(c),l(r)}})},_initTransformControls:function(e,t){var n=this,i=t.length;if(i>0){var a=0,r=0,o=0;if(1===t.length){var c=this.getters["vidAttributeMapper/getConfig"](t[0]);this.commit("transformControls/transform",{mode:"scale",key:"x",value:c.scale.x}),this.commit("transformControls/transform",{mode:"scale",key:"y",value:c.scale.y}),this.commit("transformControls/transform",{mode:"scale",key:"z",value:c.scale.z}),this.commit("transformControls/transform",{mode:"rotation",key:"x",value:c.rotation.x}),this.commit("transformControls/transform",{mode:"rotation",key:"y",value:c.rotation.y}),this.commit("transformControls/transform",{mode:"rotation",key:"z",value:c.rotation.z})}else this.commit("transformControls/transform",{mode:"scale",key:"x",value:1}),this.commit("transformControls/transform",{mode:"scale",key:"y",value:1}),this.commit("transformControls/transform",{mode:"scale",key:"z",value:1}),this.commit("transformControls/transform",{mode:"rotation",key:"x",value:0}),this.commit("transformControls/transform",{mode:"rotation",key:"y",value:0}),this.commit("transformControls/transform",{mode:"rotation",key:"z",value:0});t.forEach((function(e){var t=n.getters["vidAttributeMapper/getConfig"](e);a+=t.position.x,r+=t.position.y,o+=t.position.z})),a/=i,r/=i,o/=i,this.commit("transformControls/transform",{mode:"position",key:"x",value:a}),this.commit("transformControls/transform",{mode:"position",key:"y",value:r}),this.commit("transformControls/transform",{mode:"position",key:"z",value:o}),this.commit("transformControls/touch",!0)}else this.commit("transformControls/touch",!1)},_changeExclusiveConfig:function(e,t){if(1===t.length){var n=this.getters["vidAttributeMapper/getConfig"](t[0]);this.commit("objectConfig/set",n),n.material&&this.commit("material/active",n.material),n.geometry&&this.commit("geometry/active",n.geometry)}},modelStatusActive:function(e,t){var n=this,i=t.newList,a=t.oldList;this.commit("history/apply",{next:function(){n.commit("modelStatus/active",i),n.commit("action/_initTransformControls",i),n.commit("action/_changeExclusiveConfig",i)},prev:function(){n.commit("modelStatus/active",a),n.commit("action/_initTransformControls",a),n.commit("action/_changeExclusiveConfig",a)}})},meshAdd:function(e,t){var n=this,i=t.geometryConfig,a=t.meshConfig,r=this.getters["modelStatus/getActive"](),o=[a.vid];this.commit("history/apply",{next:function(){n.commit("geometry/add",i),n.commit("mesh/add",a),n.commit("modelStatus/active",o),n.commit("action/_initTransformControls",o),n.commit("action/_changeExclusiveConfig",o)},prev:function(){n.commit("modelStatus/active",r),n.commit("action/_initTransformControls",r),n.commit("action/_changeExclusiveConfig",r),n.commit("mesh/remove",a.vid),n.commit("geometry/remove",i.vid)}})},helperModelAdd:function(e,t){var n=this,i=this.getters["modelStatus/getActive"](),a=[t.vid];this.commit("history/apply",{next:function(){n.commit("helperModel/add",t),n.commit("modelStatus/active",a),n.commit("action/_initTransformControls",a),n.commit("action/_changeExclusiveConfig",a)},prev:function(){n.commit("modelStatus/active",i),n.commit("action/_initTransformControls",i),n.commit("action/_changeExclusiveConfig",i),n.commit("helperModel/remove",t.vid)}})},pluginAdd:function(e,t){var n=this,i=this.getters["modelStatus/getActive"](),a=[t.vid];this.commit("history/apply",{next:function(){n.commit("plugin/add",t),n.commit("modelStatus/active",a),n.commit("action/_initTransformControls",a),n.commit("action/_changeExclusiveConfig",a)},prev:function(){n.commit("modelStatus/active",i),n.commit("action/_initTransformControls",i),n.commit("action/_changeExclusiveConfig",i),n.commit("plugin/remove",t.vid)}})},lineAdd:function(e,t){var n=this,i=this.getters["modelStatus/getActive"](),a=[t.vid];this.commit("history/apply",{next:function(){n.commit("line/add",t),n.commit("modelStatus/active",a),n.commit("action/_initTransformControls",a),n.commit("action/_changeExclusiveConfig",a)},prev:function(){n.commit("modelStatus/active",i),n.commit("action/_initTransformControls",i),n.commit("action/_changeExclusiveConfig",i),n.commit("line/remove",t.vid)}})},lightAdd:function(e,t){var n=this,i=this.getters["modelStatus/getActive"](),a=[t.vid];this.commit("history/apply",{next:function(){n.commit("light/add",t),n.commit("modelStatus/active",a),n.commit("action/_initTransformControls",a),n.commit("action/_changeExclusiveConfig",a)},prev:function(){n.commit("modelStatus/active",i),n.commit("action/_initTransformControls",i),n.commit("action/_changeExclusiveConfig",i),n.commit("light/remove",t.vid)}})},cameraAdd:function(e,t){var n=this,i=this.getters["modelStatus/getActive"](),a=[t.vid];this.commit("history/apply",{next:function(){n.commit("camera/add",t),n.commit("modelStatus/active",a),n.commit("action/_initTransformControls",a),n.commit("action/_changeExclusiveConfig",a)},prev:function(){n.commit("modelStatus/active",i),n.commit("action/_initTransformControls",i),n.commit("action/_changeExclusiveConfig",i),n.commit("camera/remove",t.vid)}})},replaceMaterial:function(e,t){var n=this,i=t.objectVid,a=t.materialVid,r=this.getters["vidAttributeMapper/getModule"](i),o=this.getters["vidAttributeMapper/getConfig"](i),c=o.material;this.commit("history/apply",{next:function(){n.commit("".concat(r,"/change"),{path:[i],key:"material",value:a})},prev:function(){n.commit("".concat(r,"/change"),{path:[i],key:"material",value:c})}})},altKeyAdd:function(e,t){var n=this,i=t.mode,a=t.map,r=t.copyConfigMap;this.commit("history/apply",{next:function(){var e=[];Object.keys(a).forEach((function(t){var o=a[t],c=n.getters["vidAttributeMapper/getModule"](t);if(c){var s=n.getters["vidAttributeMapper/getConfig"](o),u=n.getters["vidAttributeMapper/getConfig"](t),l=Object.assign({},s[i]);s[i].x=u[i].x,s[i].y=u[i].y,s[i].z=u[i].z,u[i].x=l.x,u[i].y=l.y,u[i].z=l.z}else c=n.getters["vidAttributeMapper/getModule"](o),n.commit("".concat(c,"/add"),r[t]);e.push(t)})),n.commit("modelStatus/active",e),n.commit("action/_initTransformControls",e),n.commit("action/_changeExclusiveConfig",e)},prev:function(){var e=[];Object.keys(a).forEach((function(t){var i=a[t],r=n.getters["vidAttributeMapper/getModule"](t);n.commit("".concat(r,"/remove"),t),e.push(i)})),n.commit("modelStatus/active",e),n.commit("action/_initTransformControls",e),n.commit("action/_changeExclusiveConfig",e)}})}},actions:{}},eo={namespaced:!0,state:{config:""},getters:{get:function(e){return e.config}},mutations:{set:function(e,t){e.config=t}},actions:{}};T["default"].use(Wr["a"]);var to=new Wr["a"].Store({modules:{scene:fi,history:$r,geometry:ht,helperModel:Si,ambientLight:ci,modelStatus:Ui,transformControls:Yi,vidAttributeMapper:qr,action:Qr,objectConfig:eo,light:_i,camera:zi,mesh:Je,material:tn,texture:Lt,renderer:ni,effectPass:ua,loadingManager:st,sceneStructure:Ni,loaderModel:ji,plugin:na,line:bi,animation:Ur,keyframeTrack:Zr,preRenderArea:Xr}}),no=n("4de1"),io=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("control-layout",{attrs:{keyframe:e.keyframe,label:e.label,animation:e.animation},on:{clickWatch:e.clickWatch},scopedSlots:e._u([{key:"controller",fn:function(){return[n("div",{staticClass:"color-controller"},[n("el-input",{attrs:{size:"mini"},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}}),n("el-color-picker",{attrs:{size:"mini","color-format":"rgb"},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}})],1)]},proxy:!0}])})},ao=[],ro=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"controlLayout-container"},[e.keyframe?n("div",{staticClass:"config-keyframe",class:{active:e.active},on:{click:e.clickWatch}},[n("vis-icon",{attrs:{code:"#iconziyuan29"}})],1):e._e(),n("div",{staticClass:"config-title",domProps:{textContent:e._s(e.label)}}),n("div",{staticClass:"config-component"},[e._t("controller")],2)])},oo=[],co={props:{keyframe:{type:Boolean,default:!0},animation:{type:Object},label:{type:String,default:"标签"}},data:function(){return{watcher:""}},computed:{keyframeTrack:function(){return this.$store.getters["keyframeTrack/get"]},active:function(){if(this.keyframe){var e=this.keyframeTrack[this.animation.target];if(e&&e[this.animation.attribute])return!0}return!1}},methods:{clickWatch:function(){this.$emit("clickWatch",!this.active)}}},so=co,uo=(n("a6a3"),Object(u["a"])(so,ro,oo,!1,null,"9c705854",null)),lo=uo.exports,ho={name:"de-controller-picker",components:{controlLayout:lo},props:{keyframe:{type:Boolean,default:!0},animation:{type:Object},label:{type:String,default:"标签"},value:null},data:function(){return{type:"color",active:!1}},computed:{inputValue:{get:function(){return this.value},set:function(e){this.applyKeyframe(e),this.$emit("input",e)}}},methods:{applyKeyframe:function(e){if(this.active){var t=this.animation;this.$store.commit("keyframeTrack/setKeyframe",{vid:t.target,attribute:t.attribute,frame:this.currentFrame,value:e})}},clickWatch:function(e){var t=this.animation;e?this.$store.commit("keyframeTrack/add",{vid:t.target,attribute:t.attribute,config:{name:this.label,interpolate:t.interpolate||THREE.InterpolateLinear,type:this.type},value:this.value}):this.$store.commit("keyframeTrack/remove",{vid:t.target,attribute:t.attribute}),this.active=e}}},fo=ho,mo=(n("cbed"),Object(u["a"])(fo,io,ao,!1,null,"de1bfa8c",null)),po=mo.exports,vo=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("control-layout",{attrs:{keyframe:e.keyframe,label:e.label,animation:e.animation},on:{clickWatch:e.clickWatch},scopedSlots:e._u([{key:"controller",fn:function(){return[n("number-controller",{attrs:{step:e.step,dragMultply:e.dragMultply,min:e.min,max:e.max,unit:e.unit,displayAccuracy:e.displayAccuracy},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}})]},proxy:!0}])})},bo=[],yo=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"number-controller",class:{"draging-box":e.draging}},[e.showButton?n("div",{directives:[{name:"show",rawName:"v-show",value:!e.draging,expression:"!draging"}],staticClass:"operate-button reduce-button",on:{click:function(){e.calcValue(-1)}}},[n("vis-icon",{attrs:{code:"#iconbianjiantouzuo"}})],1):e._e(),n("div",{staticClass:"input-box",on:{mousedown:function(t){return t.stopPropagation(),e.mousedown(t)}}},[e.editing?n("input",{ref:"input",staticClass:"input-elem",attrs:{type:"text"},domProps:{value:e.inputValue},on:{change:e.inputChange}}):n("span",{staticClass:"input-elem",domProps:{textContent:e._s(""+e.inputValue+e.unit)}})]),e.showButton?n("div",{directives:[{name:"show",rawName:"v-show",value:!e.draging,expression:"!draging"}],staticClass:"operate-button add-button",on:{click:function(){e.calcValue(1)}}},[n("vis-icon",{attrs:{code:"#iconbianjiantouyou"}})],1):e._e()])},go=[],Eo=(n("25f0"),{props:{step:{type:Number,default:1},dragMultply:{type:Number,default:1},min:{type:Number,default:-1/0},max:{type:Number,default:1/0},unit:{type:String,default:""},displayAccuracy:{type:Number},showButton:{type:Boolean,default:!0},throttleTime:{type:Number,default:40},value:{type:Number}},data:function(){return{editing:!1,draging:!1,throttleTimer:"",editTimer:"",editJudgeTime:300,lastPosition:"",canMove:!0}},computed:{inputValue:{get:function(){return void 0!==this.displayAccuracy?this.value.toFixed(this.displayAccuracy):this.value},set:function(e){this.$emit("input",e)}}},methods:{mousedown:function(e){var t=this;if(this.editing)return!1;if(this.editTimer){clearTimeout(this.editTimer),this.editTimer="",this.editing=!0,this.$emit("touchEdit");var n=function e(){t.editing=!1,document.removeEventListener("mousedown",e)};document.addEventListener("mousedown",n)}else this.editTimer=setTimeout((function(){t.editing=!1,t.editTimer="",t.dragStart(e)}),this.editJudgeTime)},dragStart:function(e){var t=this;this.draging=!0,document.body.style.cursor="ew-resize",this.lastPosition=e.clientX;var n=function(n){if(!t.canMove)return!1;t.canMove=!1,t.throttleTimer=setTimeout((function(){var i=n.clientX,a=i-t.lastPosition<0?-1:1;t.calcValue(a),t.lastPosition=i,t.$emit("draging",{event:e}),t.canMove=!0}),t.throttleTime)},i=function e(){document.body.style.cursor="default",t.draging=!1,t.$emit("dragEnd"),document.removeEventListener("mousemove",n),document.removeEventListener("mouseup",e)};document.addEventListener("mousemove",n),document.addEventListener("mouseup",i),this.$emit("dragStart",{event:e})},calcValue:function(e){var t=this.step<1?this.step.toString().split(".")[1].length:1,n=this.draging?e*this.step*this.dragMultply:e*this.step;this.checkValue(Number((this.value+n).toFixed(t)))},inputChange:function(e){this.checkValue(Number(this.$refs.input.value))},checkValue:function(e){Number(e)<this.min?e=this.min:Number(e)>this.max&&(e=this.max),this.inputValue=Number(e)}}}),ko=Eo,jo=(n("f1c3"),Object(u["a"])(ko,yo,go,!1,null,"36550606",null)),wo=jo.exports,Oo={name:"de-controller-number",components:{controlLayout:lo,numberController:wo},props:{keyframe:{type:Boolean,default:!0},animation:{type:Object},label:{type:String,default:"标签"},step:{type:Number,default:1},dragMultply:{type:Number,default:1},min:{type:Number,default:-1/0},max:{type:Number,default:1/0},unit:{type:String,default:""},displayAccuracy:{type:Number},throttleTime:{type:Number,default:40},value:null},data:function(){return{type:"number",active:!1}},computed:{inputValue:{get:function(){return this.value},set:function(e){this.applyKeyframe(e),this.$emit("input",e)}},currentFrame:function(){return this.$store.getters["animation/currentFrame"]}},methods:{applyKeyframe:function(e){if(this.active){var t=this.animation;this.$store.commit("keyframeTrack/setKeyframe",{vid:t.target,attribute:t.attribute,frame:this.currentFrame,value:e})}},clickWatch:function(e){var t=this.animation;e?this.$store.commit("keyframeTrack/add",{vid:t.target,attribute:t.attribute,config:{name:this.label,interpolate:t.interpolate||THREE.InterpolateLinear,type:this.type},value:this.value}):this.$store.commit("keyframeTrack/remove",{vid:t.target,attribute:t.attribute}),this.active=e}}},Mo=Oo,xo=Object(u["a"])(Mo,vo,bo,!1,null,"0404e6f4",null),So=xo.exports,Co=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("control-layout",{attrs:{keyframe:e.keyframe,label:e.label},scopedSlots:e._u([{key:"controller",fn:function(){return[n("div",{staticClass:"color-controller"},[n("el-input",{attrs:{size:"mini",disabled:e.disabled},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}})],1)]},proxy:!0}])})},To=[],Ro={name:"de-controller-input",components:{controlLayout:lo},props:{keyframe:{type:Boolean,default:!0},label:{type:String,default:"标签"},disabled:{type:Boolean,default:!1},value:null},computed:{inputValue:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}}},Ho=Ro,_o=(n("9ce8"),Object(u["a"])(Ho,Co,To,!1,null,"4c43bb16",null)),Lo=_o.exports,Ao=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("control-layout",{attrs:{keyframe:e.keyframe,label:e.label,animation:e.animation},on:{clickWatch:e.clickWatch},scopedSlots:e._u([{key:"controller",fn:function(){return[n("div",{staticClass:"switch-controller"},[n("el-switch",{attrs:{size:"mini"},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}})],1)]},proxy:!0}])})},Po=[],Fo={name:"de-controller-switch",components:{controlLayout:lo},props:{keyframe:{type:Boolean,default:!0},animation:{type:Object},label:{type:String,default:"标签"},value:null},data:function(){return{type:"boolean"}},computed:{inputValue:{get:function(){return this.value},set:function(e){this.applyKeyframe(e),this.$emit("input",e)}}},methods:{applyKeyframe:function(e){if(this.active){var t=this.animation;this.$store.commit("keyframeTrack/setKeyframe",{vid:t.target,attribute:t.attribute,frame:this.currentFrame,value:e})}},clickWatch:function(e){var t=this.animation;e?this.$store.commit("keyframeTrack/add",{vid:t.target,attribute:t.attribute,config:{name:this.label,interpolate:THREE.interpolateDiscrete,type:this.type},value:this.value}):this.$store.commit("keyframeTrack/remove",{vid:t.target,attribute:t.attribute}),this.active=e}}},zo=Fo,Vo=(n("fd6f"),Object(u["a"])(zo,Ao,Po,!1,null,"432f5d7c",null)),Bo=Vo.exports,Io=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("control-layout",{attrs:{keyframe:e.keyframe,label:e.label,animation:e.animation},on:{clickWatch:e.clickWatch},scopedSlots:e._u([{key:"controller",fn:function(){return[n("div",{staticClass:"select-controller"},[n("el-select",{attrs:{value:e.value,size:"mini",placeholder:e.placeholder},on:{change:e.change}},e._l(e.options,(function(t,i){return n("el-option",{key:i,attrs:{label:t[e.prop.label],value:e.prop.value?t[e.prop.value]:t}})})),1)],1)]},proxy:!0}])})},No=[],Go={name:"de-controller-select",components:{controlLayout:lo},props:{keyframe:{type:Boolean,default:!0},animation:{type:Object},label:{type:String,default:"标签"},placeholder:{type:String,default:"请选择"},prop:{type:Object,default:function(){return{label:"label",value:"value"}}},options:Array,value:null},data:function(){return{}},computed:{inputValue:{get:function(){return this.value},set:function(e){this.applyKeyframe(e),this.$emit("input",e)}}},methods:{change:function(e){this.inputValue=e},applyKeyframe:function(e){if(this.active){var t=this.animation;this.$store.commit("keyframeTrack/setKeyframe",{vid:t.target,attribute:t.attribute,frame:this.currentFrame,value:e})}},clickWatch:function(e){var t=this.animation;e?this.$store.commit("keyframeTrack/add",{vid:t.target,attribute:t.attribute,config:{name:this.label,interpolate:THREE.InterpolateDiscrete,type:t.type||"string"},value:this.value}):this.$store.commit("keyframeTrack/remove",{vid:t.target,attribute:t.attribute}),this.active=e}}},Do=Go,Wo=(n("8058"),Object(u["a"])(Do,Io,No,!1,null,"265cef29",null)),$o=Wo.exports,Uo=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("control-layout",{attrs:{keyframe:e.keyframe,label:e.label,animation:e.animation},on:{clickWatch:e.clickWatch},scopedSlots:e._u([{key:"controller",fn:function(){return[n("div",{staticClass:"vector3-controller"},[n("span",{domProps:{textContent:e._s(e.elemLabel.x)}}),n("number-controller",{attrs:{step:e.step,dragMultply:e.dragMultply,min:e.min,max:e.max,unit:e.unit,showButton:!1,displayAccuracy:e.displayAccuracy},model:{value:e.xValue,callback:function(t){e.xValue=t},expression:"xValue"}}),n("span",{domProps:{textContent:e._s(e.elemLabel.y)}}),n("number-controller",{attrs:{step:e.step,dragMultply:e.dragMultply,min:e.min,max:e.max,unit:e.unit,showButton:!1,displayAccuracy:e.displayAccuracy},model:{value:e.yValue,callback:function(t){e.yValue=t},expression:"yValue"}}),n("span",{domProps:{textContent:e._s(e.elemLabel.z)}}),n("number-controller",{attrs:{step:e.step,dragMultply:e.dragMultply,min:e.min,max:e.max,unit:e.unit,showButton:!1,displayAccuracy:e.displayAccuracy},model:{value:e.zValue,callback:function(t){e.zValue=t},expression:"zValue"}})],1)]},proxy:!0}])})},Zo=[],Ko={name:"de-controller-vector3",components:{controlLayout:lo,numberController:wo},props:{keyframe:{type:Boolean,default:!0},animation:{type:Object},label:{type:String,default:"标签"},elemLabel:{type:Object,default:function(){return{x:"X",y:"Y",z:"Z"}}},step:{type:Number,default:1},dragMultply:{type:Number,default:1},min:{type:Number,default:-1/0},max:{type:Number,default:1/0},unit:{type:String,default:""},displayAccuracy:{type:Number},throttleTime:{type:Number,default:40},value:null},data:function(){return{type:"vector3",active:!1}},computed:{xValue:{get:function(){return"°"===this.unit?180*this.value.x/Math.PI:this.value.x},set:function(e){this.value.x="°"===this.unit?e*Math.PI/180:e,this.applyKeyframe()}},yValue:{get:function(){return"°"===this.unit?180*this.value.y/Math.PI:this.value.y},set:function(e){this.value.y="°"===this.unit?e*Math.PI/180:e,this.applyKeyframe()}},zValue:{get:function(){return"°"===this.unit?180*this.value.z/Math.PI:this.value.z},set:function(e){this.value.z="°"===this.unit?e*Math.PI/180:e,this.applyKeyframe()}},currentFrame:function(){return this.$store.getters["animation/currentFrame"]}},methods:{applyKeyframe:function(){if(this.active){var e=this.animation;this.$store.commit("keyframeTrack/setKeyframe",{vid:e.target,attribute:e.attribute,frame:this.currentFrame,value:JSON.parse(JSON.stringify(this.value))})}},clickWatch:function(e){var t=this.animation;e?this.$store.commit("keyframeTrack/add",{vid:t.target,attribute:t.attribute,config:{name:this.label,interpolate:t.interpolate||THREE.InterpolateLinear,type:this.type},value:JSON.parse(JSON.stringify(this.value))}):this.$store.commit("keyframeTrack/remove",{vid:t.target,attribute:t.attribute}),this.active=e}}},Jo=Ko,Xo=(n("483b"),Object(u["a"])(Jo,Uo,Zo,!1,null,"7a4c4479",null)),Yo=Xo.exports,qo={color:po,number:So,input:Lo,Switch:Bo,select:$o,vector3:Yo},Qo=qo,ec=function(e){for(var t in e.component(no["a"].name,no["a"]),Qo)e.component(Qo[t].name,Qo[t])};T["default"].use(ec);var tc=n("9b8a"),nc=n("96eb"),ic=n.n(nc);ic.a.setup({timeout:"1000-1500"}),ic.a.mock(/api\/picture/,{status:200,data:{files:{url:"/rescources/texture",name:"texture",type:"dir",file:!1,children:[{url:"/rescources/texture/map",name:"map",type:"dir",file:!1,children:[{url:"/rescources/texture/map/brick.jpg",name:"brick.jpg",type:"jpg",file:!0},{url:"/rescources/texture/map/PROVIZ.INFO-001_IKEA_FALSTER_Leather_Bump.jpg",name:"PROVIZ.INFO-001_IKEA_FALSTER_Leather_Bump.jpg",type:"jpg",file:!0},{url:"/rescources/texture/map/PROVIZ.INFO-001_IKEA_FALSTER_Leather_Diffuse.jpg",name:"PROVIZ.INFO-001_IKEA_FALSTER_Leather_Diffuse.jpg",type:"jpg",file:!0},{url:"/rescources/texture/map/PROVIZ.INFO-001_IKEA_FALSTER_WOOD_Bump.jpg",name:"PROVIZ.INFO-001_IKEA_FALSTER_WOOD_Bump.jpg",type:"jpg",file:!0},{url:"/rescources/texture/map/PROVIZ.INFO-001_IKEA_FALSTER_WOOD_Diffuse.jpg",name:"PROVIZ.INFO-001_IKEA_FALSTER_WOOD_Diffuse.jpg",type:"jpg",file:!0},{url:"/rescources/texture/map/PROVIZ.INFO-001_IKEA_FALSTER_WOOD_Reflection.jpg",name:"PROVIZ.INFO-001_IKEA_FALSTER_WOOD_Reflection.jpg",type:"jpg",file:!0},{url:"/rescources/texture/map/PROVIZ.INFO_IKEA_ANGSO_Wood_Deffuse.jpg",name:"PROVIZ.INFO_IKEA_ANGSO_Wood_Deffuse.jpg",type:"jpg",file:!0},{url:"/rescources/texture/map/PROVIZ.INFO_IKEA_ANGSO_Wood_Bump.jpg",name:"PROVIZ.INFO_IKEA_ANGSO_Wood_Bump.jpg",type:"jpg",file:!0},{url:"/rescources/texture/map/PROVIZ.INFO_IKEA_ANGSO_Wood_Reflect.jpg",name:"PROVIZ.INFO_IKEA_ANGSO_Wood_Reflect.jpg",type:"jpg",file:!0},{url:"/rescources/texture/map/waternormals.jpg",name:"waternormals.jpg",type:"jpg",file:!0},{url:"/rescources/texture/map/Water_1_M_Normal.jpg",name:"Water_1_M_Normal.jpg",type:"jpg",file:!0},{url:"/rescources/texture/map/Water_2_M_Normal.jpg",name:"Water_2_M_Normal.jpg",type:"jpg",file:!0}]},{url:"/rescources/texture/envMap",name:"envMap",type:"dir",file:!1,children:[{url:"/rescources/texture/envMap/pisa",name:"pisa",type:"dir",file:!1,children:[]},{url:"/rescources/texture/envMap/starCloud",name:"starCloud",type:"dir",file:!1,children:[]}]}]}}}),ic.a.mock(/api\/model/,{status:200,data:{obj:[{poster:"/rescources/model/01.PROVIZ.INFO_FALSTER_ARMCHAIR.jpg",url:"/rescources/model/01.PROVIZ.INFO_FALSTER_ARMCHAIR.obj",name:"01.PROVIZ.INFO_FALSTER_ARMCHAIR"},{poster:"/rescources/model/02.PROVIZ.INFO_FALSTER_CHAIR.jpg",url:"/rescources/model/02.PROVIZ.INFO_FALSTER_CHAIR.obj",name:"02.PROVIZ.INFO_FALSTER_CHAIR"},{poster:"/rescources/model/03.PROVIZ.INFO_FALSTER_RECLINING CHAIR.jpg",url:"/rescources/model/03.PROVIZ.INFO_FALSTER_RECLINING CHAIR.obj",name:"03.PROVIZ.INFO_FALSTER_RECLINING CHAIR"},{poster:"/rescources/model/04.PROVIZ.INFO_FALSTER_BENCH.jpg",url:"/rescources/model/04.PROVIZ.INFO_FALSTER_BENCH.obj",name:"04.PROVIZ.INFO_FALSTER_BENCH"},{poster:"/rescources/model/05.PROVIZ.INFO_FALSTER_TABLE.jpg",url:"/rescources/model/05.PROVIZ.INFO_FALSTER_TABLE.obj",name:"05.PROVIZ.INFO_FALSTER_TABLE"},{poster:"/rescources/model/06.PROVIZ.INFO_FALSTER_TABLE.jpg",url:"/rescources/model/06.PROVIZ.INFO_FALSTER_TABLE.obj",name:"06.PROVIZ.INFO_FALSTER_TABLE"},{poster:"/rescources/model/07.PROVIZ.INFO_FALSTER_CHAISE.jpg",url:"/rescources/model/07.PROVIZ.INFO_FALSTER_CHAISE.obj",name:"07.PROVIZ.INFO_FALSTER_CHAISE"},{poster:"/rescources/model/08.PROVIZ.INFO_FALSTER_CHAISE.jpg",url:"/rescources/model/08.PROVIZ.INFO_FALSTER_CHAISE.obj",name:"08.PROVIZ.INFO_FALSTER_CHAISE"},{poster:"/rescources/model/09.PROVIZ.INFO_FALSTER_CHAISE WITH COVER.jpg",url:"/rescources/model/09.PROVIZ.INFO_FALSTER_CHAISE WITH COVER.obj",name:"09.PROVIZ.INFO_FALSTER_CHAISE WITH COVER"},{poster:"/rescources/model/10.PROVIZ.INFO_FALSTER_CHAISE WITH COVER.jpg",url:"/rescources/model/10.PROVIZ.INFO_FALSTER_CHAISE WITH COVER.obj",name:"10.PROVIZ.INFO_FALSTER_CHAISE WITH COVER"}]}}),ic.a.mock(/api\/material/,{status:200,data:{files:{url:"/rescources/material",name:"material",type:"dir",file:!1,children:[{url:"/rescources/material/mtl",name:"mtl",type:"dir",file:!1,children:[{url:"/rescources/material/mtl/01.mtl",name:"01.mtl",type:"mtl",file:!0},{url:"/rescources/material/mtl/02.mtl",name:"02.mtl",type:"mtl",file:!0},{url:"/rescources/material/mtl/03.mtl",name:"03.mtl",type:"mtl",file:!0}]}]}}});var ac=new T["default"]({router:Dr,store:to,render:function(e){return e(Br)}}).$mount("#app");ac.$fileSystem=tc["a"]},"452e":function(e,t,n){},"483b":function(e,t,n){"use strict";n("f4943")},4841:function(e,t,n){"use strict";n("a98a")},4963:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return u}));var i=n("d4ec"),a=n("bee2"),r=n("262e"),o=n("2caf"),c=(n("159b"),n("ebe2")),s=Object.assign({},c["b"],{type:"VisPointLight",color:"rgb(255, 255, 255)",intensity:1,distance:10,decay:.1}),u=function(e){Object(r["a"])(n,e);var t=Object(o["a"])(n);function n(e){var a;return Object(i["a"])(this,n),a=t.call(this,e),a.light=new THREE.PointLight(e.color,e.intensity,e.distance,e.decay),a.sourceHelper=new THREE.Object3D,a.shapeHelper="",a.setObject(),a.setHelper(),a.light.matrixAutoUpdate=!1,a.light.matrix=a.object.matrix,a.object.vid=e.vid,a.light.vid=e.vid,a}return Object(a["a"])(n,[{key:"setObject",value:function(){var e=new THREE.Object3D;e.geometry=new THREE.SphereGeometry(1),e.sphere=new THREE.Sphere,e.raycast=function(e,t){var n=this.geometry;if(!n)return!1;var i=this.matrixWorld,a=this.sphere;!n.boundingSphere&&n.computeBoundingSphere(),a.copy(n.boundingSphere),a.applyMatrix4(i),e.ray.intersectsSphere(a)&&t.push({object:this})},this.object=e,delete this.setObject}},{key:"setHelper",value:function(){var e=this,t=new THREE.BufferGeometry,n=[-1,0,0,1,0,0];t.setAttribute("position",new THREE.Float32BufferAttribute(n,3));var i=new THREE.Line(t,c["a"].getLineMaterial()),a=[45,90,135],r=new THREE.Object3D;r.add(i),a.forEach((function(e){var t=i.clone();t.rotation.z=180*e/Math.PI,r.add(t)})),this.sourceHelper.add(r),a.forEach((function(t){var n=r.clone(!0);n.rotation.x=180*t/Math.PI,e.sourceHelper.add(n)})),this.helper.add(this.sourceHelper);var o=this.light,s=new THREE.Mesh(new THREE.OctahedronBufferGeometry(o.distance,0),new THREE.MeshBasicMaterial({color:o.color,wireframe:!0}));s.material.color.multiplyScalar(o.intensity),this.shapeHelper=s,this.helper.add(s),this.helper.matrixAutoUpdate=!1,this.helper.matrix=this.object.matrix,delete this.setHelper}},{key:"color",value:function(e){var t=this.light;t.color=new THREE.Color(e);var n=function e(n){n.children[0]?n.children.forEach((function(t){e(t)})):n.material&&n.material.color.copy(t.color).multiplyScalar(t.intensity)};n(this.helper)}},{key:"intensity",value:function(e){var t=this.light;t.intensity=e;var n=function e(n){n.children[0]?n.children.forEach((function(t){e(t)})):n.material&&n.material.color.copy(t.color).multiplyScalar(t.intensity)};n(this.helper)}},{key:"distance",value:function(e){this.light.distance=e,this.shapeHelper.geometry.dispose(),this.shapeHelper.geometry=new THREE.OctahedronBufferGeometry(e,0)}},{key:"decay",value:function(e){this.light.decay=e}}]),n}(c["a"])},"4abd":function(e,t,n){},"4cf4":function(e,t,n){"use strict";n("dbba")},"4da9":function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return u}));var i=n("d4ec"),a=n("bee2"),r=n("262e"),o=n("2caf"),c=n("0845"),s=Object.assign({},c["b"],{type:"VisLineBasicMaterial",color:"rgb(255, 255, 255)",linejoin:"round",linecap:"round"}),u=function(e){Object(r["a"])(n,e);var t=Object(o["a"])(n);function n(e){var a;Object(i["a"])(this,n),a=t.call(this,e);var r=JSON.parse(JSON.stringify(e));return delete r.type,delete r.vid,a.material=new THREE.LineBasicMaterial(r),a}return Object(a["a"])(n,[{key:"color",value:function(e){this.material.color=new THREE.Color(e)}},{key:"linejoin",value:function(e){this.material.linejoin=e}},{key:"linecap",value:function(e){this.material.linecap=e}}]),n}(c["a"])},"4de1":function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"collapseLayout-container"},[n("div",{staticClass:"collapseLayout-title",on:{click:e.toggle}},["left"===e.arrowPosition?n("vis-icon",{class:{"icon-open":!e.showCollapse},staticStyle:{"margin-right":"5px"},attrs:{code:"#iconjian"}}):e._e(),n("div",{staticClass:"title-box"},[e.showIcon?n("vis-icon",{attrs:{code:e.icon}}):e._e(),n("span",{domProps:{textContent:e._s(e.label)}})],1),"right"===e.arrowPosition?n("vis-icon",{class:{"icon-open":!e.showCollapse},attrs:{code:"#iconjian"}}):e._e()],1),n("el-collapse-transition",[n("div",{directives:[{name:"show",rawName:"v-show",value:e.showCollapse,expression:"showCollapse"}],staticClass:"collapseLayout-main"},[e._t("container")],2)])],1)},a=[],r={name:"de-collapse-layout",props:{icon:{type:String,default:"#iconmoxing"},showIcon:{type:Boolean,default:!0},label:{type:String,default:"折叠面板布局"},fold:{type:Boolean,default:!1},arrowPosition:{type:String,default:"right"}},data:function(){return{showCollapse:!0}},watch:{fold:{handler:function(e){this.showCollapse=!e},immediate:!0}},methods:{toggle:function(){this.showCollapse=!this.showCollapse,this.$emit("change",this.showCollapse)}}},o=r,c=(n("c626"),n("2877")),s=Object(c["a"])(o,i,a,!1,null,"09d887da",null);t["a"]=s.exports},"51aa":function(e,t,n){"use strict";n("9916")},5222:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return s}));var i=n("d4ec"),a=n("262e"),r=n("2caf"),o=n("c84b"),c=Object.assign({},o["b"],{}),s=function(e){Object(a["a"])(n,e);var t=Object(r["a"])(n);function n(e){return Object(i["a"])(this,n),t.call(this,e)}return n}(o["a"])},"5b12":function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return l}));var i=n("d4ec"),a=n("bee2"),r=n("257e"),o=n("262e"),c=n("2caf"),s=n("c84b"),u=Object.assign({},s["b"],{type:"VisLineSegments",material:"",startObject:"",startPoint:{x:-10,y:-10,z:-10},endObject:"",endPoint:{x:10,y:10,z:10}}),l=function(e){Object(o["a"])(n,e);var t=Object(c["a"])(n);function n(e){var a;Object(i["a"])(this,n),a=t.call(this,e),a.target="",a.bufferStartPoint="",a.bufferEndPoint="",a.startPoint=new THREE.Vector3,a.endPoint=new THREE.Vector3,a.autoUpdateGeometry=!1;var o=[a.startPoint.x,a.startPoint.y,a.startPoint.z,a.endPoint.x,a.endPoint.y,a.endPoint.z],c=new THREE.BufferGeometry;c.setAttribute("position",new THREE.Float32BufferAttribute(o,3)),a.object=new THREE.LineSegments(c);var s=Object(r["a"])(a),u=a.object.updateMatrixWorld.bind(a.object);return a.object.updateMatrixWorld=function(e){u(e),s.target&&s.object.lookAt(s.target),s.autoUpdateGeometry&&s._generateGeometry()},a.object.vid=e,a.helper.add(new THREE.Points(c,new THREE.PointsMaterial({color:"rgb(100, 100, 100)"}))),a.helper.matrix=a.object.matrixWorld,a}return Object(a["a"])(n,[{key:"_generateGeometry",value:function(){var e=this.object.geometry.attributes.position,t=this.startPoint;e.setXYZ(0,t.x,t.y,t.z);var n=this.endPoint;e.setXYZ(1,n.x,n.y,n.z),e.needsUpdate=!0}},{key:"material",value:function(e){this.object.material=e}},{key:"startObject",value:function(e){e?(this.bufferStartPoint=this.startPoint,this.startPoint=e.position,this.autoUpdateGeometry=!0):this.bufferStartPoint&&(this.startPoint=this.bufferStartPoint,this.bufferStartPoint="",this.bufferEndPoint||this.bufferStartPoint||(this.autoUpdateGeometry=!1))}},{key:"endObject",value:function(e){e?(this.bufferEndPoint=this.endPoint,this.endPoint=e.position,this.autoUpdateGeometry=!0):this.bufferEndPoint&&(this.endPoint=this.bufferEndPoint,this.bufferEndPoint="",this.bufferEndPoint||this.bufferStartPoint||(this.autoUpdateGeometry=!1))}},{key:"startPoint.x",value:function(e){this.startPoint.x=e,this._generateGeometry()}},{key:"startPoint.y",value:function(e){this.startPoint.y=e,this._generateGeometry()}},{key:"startPoint.z",value:function(e){this.startPoint.z=e,this._generateGeometry()}},{key:"endPoint.x",value:function(e){this.endPoint.x=e,this._generateGeometry()}},{key:"endPoint.y",value:function(e){this.endPoint.y=e,this._generateGeometry()}},{key:"endPoint.z",value:function(e){this.endPoint.z=e,this._generateGeometry()}},{key:"lookAt",value:function(e){e?(this.target=e.position,this["rotation.x"]=function(){},this["rotation.y"]=function(){},this["rotation.z"]=function(){}):(this.target="",this["rotation.x"]=function(e){this.object.rotation.x=e},this["rotation.y"]=function(e){this.object.rotation.y=e},this["rotation.z"]=function(e){this.object.rotation.z=e})}},{key:"dispose",value:function(){this.object.geometry.dispose();var e=this.helper.children[0];e.material.dispose()}}]),n}(s["a"])},"5c68":function(e,t,n){},"5fcf":function(e,t,n){},6397:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o}));var i=n("d4ec"),a=n("bee2"),r={vid:"",type:"VisGeometry",anchor:{position:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0},scale:{x:1,y:1,z:1}}},o=function(){function e(){Object(i["a"])(this,e),this.bufferAnchor={position:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0},scale:{x:1,y:1,z:1}},this.geometry=new THREE.BufferGeometry}return Object(a["a"])(e,[{key:"_setAnchor",value:function(e){var t=this.bufferAnchor;e.translate(t.position.x,t.position.y,t.position.z),e.rotateX(t.rotation.x),e.rotateY(t.rotation.y),e.rotateZ(t.rotation.z)}},{key:"_changeAnchorPosition",value:function(e,t){!this.geometry.boundingBox&&this.geometry.computeBoundingBox();var n=this.geometry.boundingBox,i=(t-this.bufferAnchor.position[e])*(n.max[e]-n.min[e])/2;this.geometry.translate("x"===e?i:0,"y"===e?i:0,"z"===e?i:0),this.bufferAnchor.position[e]=t}},{key:"_changeAnchorRotation",value:function(e,t){var n=t-this.bufferAnchor.rotation[e];this.geometry["rotate".concat(e.toLocaleUpperCase())](n),this.bufferAnchor.rotation[e]=t}},{key:"anchor.position.x",value:function(e){this._changeAnchorPosition("x",e)}},{key:"anchor.position.y",value:function(e){this._changeAnchorPosition("y",e)}},{key:"anchor.position.z",value:function(e){this._changeAnchorPosition("z",e)}},{key:"anchor.rotation.x",value:function(e){this._changeAnchorRotation("x",e)}},{key:"anchor.rotation.y",value:function(e){this._changeAnchorRotation("y",e)}},{key:"anchor.rotation.z",value:function(e){this._changeAnchorRotation("z",e)}},{key:"dispose",value:function(){this.geometry.dispose()}}]),e}()},"659a":function(e,t,n){"use strict";n("96cb")},6734:function(e,t,n){},6940:function(e,t,n){"use strict";n("5fcf")},"6a36":function(e,t,n){"use strict";n("6734")},"6f97":function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return u}));var i=n("d4ec"),a=n("bee2"),r=n("262e"),o=n("2caf"),c=n("6397"),s=Object.assign({},c["b"],{type:"VisConeGeometry",radius:5,height:10,radialSegments:8,heightSegments:1,openEnded:!1,thetaStart:0,thetaLength:2*Math.PI}),u=function(e){Object(r["a"])(n,e);var t=Object(o["a"])(n);function n(e){var a;return Object(i["a"])(this,n),a=t.call(this,e),a.geometry.dispose(),a.geometry=new THREE.ConeBufferGeometry,a}return Object(a["a"])(n,[{key:"_setGeometry",value:function(e,t){var n=Object.assign({},this.geometry.parameters);n[e]=t;var i=new THREE.ConeBufferGeometry(n.radius,n.height,n.radialSegments,n.heightSegments,n.openEnded,n.thetaStart,n.thetaLength);this._setAnchor(i),this.geometry.dispose(),this.geometry=i}},{key:"radius",value:function(e){this._setGeometry("radius",e)}},{key:"height",value:function(e){this._setGeometry("height",e)}},{key:"radialSegments",value:function(e){this._setGeometry("radialSegments",e)}},{key:"openEnded",value:function(e){this._setGeometry("openEnded",e)}},{key:"thetaStart",value:function(e){this._setGeometry("thetaStart",e)}},{key:"thetaLength",value:function(e){this._setGeometry("thetaLength",e)}}]),n}(c["a"])},"703e":function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o}));var i=n("d4ec"),a=n("bee2"),r=(n("38cf"),{vid:"",name:"",type:"VisTexture",rotation:0,format:THREE.RGBAFormat,wrapS:THREE.ClampToEdgeWrapping,wrapT:THREE.ClampToEdgeWrapping,repeat:{x:1,y:1},center:{x:0,y:0},offset:{x:0,y:0}}),o=function(){function e(t){Object(i["a"])(this,e),this.texture=""}return Object(a["a"])(e,[{key:"rotation",value:function(e){this.texture.rotation=e}},{key:"center.x",value:function(e){this.texture.center.x=e}},{key:"center.y",value:function(e){this.texture.center.y=e}},{key:"offset.x",value:function(e){this.texture.offset.x=e}},{key:"offset.y",value:function(e){this.texture.offset.y=e}},{key:"repeat.x",value:function(e){this.texture.repeat.x=e}},{key:"repeat.y",value:function(e){this.texture.repeat.y=e}},{key:"wrapS",value:function(e){this.texture.wrapS=e,this.texture.needsUpdate=!0}},{key:"wrapT",value:function(e){this.texture.wrapT=e,this.texture.needsUpdate=!0}}]),e}()},"7f14":function(e,t,n){"use strict";n.d(t,"b",(function(){return h})),n.d(t,"a",(function(){return f}));var i=n("d4ec"),a=n("bee2"),r=n("262e"),o=n("2caf"),c=n("ade3"),s=n("c84b"),u=Object.assign({},s["b"],{}),l=function(e){Object(r["a"])(n,e);var t=Object(o["a"])(n);function n(e){return Object(i["a"])(this,n),t.call(this,e)}return Object(a["a"])(n,[{key:"dispose",value:function(){}},{key:"scale",value:function(){}},{key:"scale.x",value:function(){}},{key:"scale.y",value:function(){}},{key:"scale.z",value:function(){}}]),n}(s["a"]);Object(c["a"])(l,"getLineMaterial",(function(){return new THREE.LineBasicMaterial({color:"rgb(255, 255, 255)"})}));var h=Object.assign({},u,{type:"VisPerspectiveCamera",fov:45,aspect:16/9,near:5,far:50});THREE.PerspectiveCamera.prototype.sphere=new THREE.Sphere,THREE.PerspectiveCamera.prototype.raycast=function(e,t){var n=this.geometry;if(!n)return!1;var i=this.matrixWorld,a=this.sphere;!n.boundingSphere&&n.computeBoundingSphere(),a.copy(n.boundingSphere),a.applyMatrix4(i),e.ray.intersectsSphere(a)&&t.push({object:this})};var f=function(e){Object(r["a"])(n,e);var t=Object(o["a"])(n);function n(e){var a;return Object(i["a"])(this,n),a=t.call(this,e),a.object=new THREE.PerspectiveCamera(h.fov,h.aspect,h.near,h.far),a.object.geometry=new THREE.SphereGeometry(2),a.sourceHelper=new THREE.Object3D,a.shapeHelper="",a.setHelper(),a.helper.matrixAutoUpdate=!1,a.helper.matrix=a.object.matrix,a.object.vid=e,a}return Object(a["a"])(n,[{key:"setHelper",value:function(){var e=new THREE.BufferGeometry,t=[0,0,0,-1,1,-1,0,0,0,-1,1,1,0,0,0,-1,-1,-1,0,0,0,-1,-1,1,-1,-1,1,-1,-1,-1,-1,-1,-1,-1,1,-1,-1,1,-1,-1,1,1,-1,1,1,-1,-1,1,0,0,0,0,1,1,0,0,0,0,1,-1,0,0,0,0,-1,-1,0,0,0,0,-1,1,0,1,1,0,1,-1,0,1,-1,0,-1,-1,0,-1,-1,0,-1,1,0,-1,1,0,1,1,0,-1,1,2,-1,1,0,1,-1,2,1,-1,0,-1,-1,2,-1,-1,0,1,1,2,1,1,2,1,1,2,-1,1,2,-1,1,2,-1,-1,2,-1,-1,2,1,-1,2,1,-1,2,1,1];e.setAttribute("position",new THREE.Float32BufferAttribute(t,3)),e.rotateY(-90*Math.PI/180);var n=new THREE.LineBasicMaterial;this.sourceHelper=new THREE.LineSegments(e,n),this.shapeHelper=new THREE.CameraHelper(this.object),this.shapeHelper.matrix=new THREE.Matrix4,this.helper.add(this.sourceHelper),this.helper.add(this.shapeHelper),delete this.setHelper}},{key:"near",value:function(e){this.object.near=e,this.object.updateProjectionMatrix(),this.shapeHelper.update()}},{key:"far",value:function(e){this.object.far=e,this.object.updateProjectionMatrix(),this.shapeHelper.update()}},{key:"fov",value:function(e){this.object.fov=e,this.object.updateProjectionMatrix(),this.shapeHelper.update()}},{key:"aspect",value:function(e){this.object.aspect=e,this.object.updateProjectionMatrix(),this.shapeHelper.update()}}]),n}(l)},8058:function(e,t,n){"use strict";n("1c8e")},"82c7":function(e,t,n){"use strict";n("ddde")},"83e6":function(e,t,n){"use strict";n("945a")},8808:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return u}));var i=n("d4ec"),a=n("bee2"),r=n("262e"),o=n("2caf"),c=n("6397"),s=Object.assign({},c["b"],{type:"VisLoaderGeometry",url:""}),u=function(e){Object(r["a"])(n,e);var t=Object(o["a"])(n);function n(e){return Object(i["a"])(this,n),t.call(this,e)}return Object(a["a"])(n,[{key:"url",value:function(e){this.geometry.dispose(),this.geometry=e}}]),n}(c["a"])},"8b08":function(e,t,n){},"8bde":function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return u}));var i=n("d4ec"),a=n("bee2"),r=n("262e"),o=n("2caf"),c=n("5222"),s=Object.assign({},c["b"],{type:"VisGroup"});THREE.Group.prototype.sphere=new THREE.Sphere,THREE.Group.prototype.raycast=function(e,t){var n=this.geometry,i=this.matrixWorld,a=this.sphere;if(!n)return!1;!n.boundingSphere&&n.computeBoundingSphere(),a.copy(n.boundingSphere),a.applyMatrix4(i),e.ray.intersectsSphere(a)&&t.push({object:this})};var u=function(e){Object(r["a"])(n,e);var t=Object(o["a"])(n);function n(e){var a;return Object(i["a"])(this,n),a=t.call(this,e),a.object=new THREE.Group,a.object.geometry=new THREE.SphereGeometry(1),console.log(a.object),a.setHelper(),a.helper.matrixAutoUpdate=!1,a.helper.matrix=a.object.matrix,a.object.vid=e.vid,a}return Object(a["a"])(n,[{key:"setHelper",value:function(){var e=new THREE.LineSegments(new THREE.EdgesGeometry(new THREE.BoxBufferGeometry(1,1,1)),new THREE.LineBasicMaterial),t=e.clone(),n=e.clone();e.position.set(0,.5,0),t.position.set(.5,0,0),n.position.set(0,0,.5),this.helper.add(e),this.helper.add(t),this.helper.add(n),delete this.setHelper}}]),n}(c["a"])},"8c47":function(e,t,n){},"8e73":function(e,t,n){},"945a":function(e,t,n){},"96cb":function(e,t,n){},"986e":function(e,t,n){"use strict";n("4207")},"98a2":function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return u}));var i=n("d4ec"),a=n("bee2"),r=n("262e"),o=n("2caf"),c=(n("159b"),n("ebe2")),s=Object.assign({},c["b"],{type:"VisSpotLight",color:"rgb(255, 255, 255)",intensity:1,distance:30,angle:30*Math.PI/180,penumbra:0,decay:.1,target:{vid:"",position:{x:0,y:0,z:0}}}),u=function(e){Object(r["a"])(n,e);var t=Object(o["a"])(n);function n(e){var a;return Object(i["a"])(this,n),a=t.call(this,e),a.light=new THREE.SpotLight(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),a.target=a.light.target,a.sourceHelper=new THREE.Object3D,a.shapeHelper="",a.targetHelper="",a.setObject(),a.setHelper(),a.light.matrixAutoUpdate=!1,a.light.matrix=a.object.matrix,a.object.vid=e.vid,a.light.vid=e.vid,a}return Object(a["a"])(n,[{key:"setObject",value:function(){var e=new THREE.Object3D;e.geometry=new THREE.SphereGeometry(1),e.sphere=new THREE.Sphere,e.raycast=function(e,t){var n=this.geometry;if(!n)return!1;var i=this.matrixWorld,a=this.sphere;!n.boundingSphere&&n.computeBoundingSphere(),a.copy(n.boundingSphere),a.applyMatrix4(i),e.ray.intersectsSphere(a)&&t.push({object:this})},this.object=e,delete this.setObject}},{key:"setHelper",value:function(){var e=this,t=this.light,n=t.target,i=new THREE.BufferGeometry,a=[-1,0,0,1,0,0];i.setAttribute("position",new THREE.Float32BufferAttribute(a,3));var r=new THREE.Line(i,c["a"].getLineMaterial()),o=[45,90,135],s=new THREE.Object3D;s.add(r),o.forEach((function(e){var t=r.clone();t.rotation.z=180*e/Math.PI,s.add(t)})),this.sourceHelper.add(s),o.forEach((function(t){var n=s.clone(!0);n.rotation.x=180*t/Math.PI,e.sourceHelper.add(n)})),this.helper.add(this.sourceHelper);for(var u=new THREE.BufferGeometry,l=[0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],h=0,f=1,d=32;h<d;h++,f++){var m=h/d*Math.PI*2,p=f/d*Math.PI*2;l.push(Math.cos(m),Math.sin(m),1,Math.cos(p),Math.sin(p),1)}u.setAttribute("position",new THREE.Float32BufferAttribute(l,3));var v=new THREE.LineBasicMaterial,b=new THREE.LineSegments(u,v);b.material.color.copy(t.color).multiplyScalar(t.intensity);var y=t.distance?t.distance:1e3,g=y*Math.tan(t.angle);b.scale.set(g,g,y);var E=b.updateMatrixWorld.bind(b);b.updateMatrixWorld=function(e){E(e),b.lookAt(n.position)},this.shapeHelper=b,this.helper.add(b);var k=[t.position.x,t.position.y,t.position.z,n.position.x,n.position.y,n.position.z],j=new THREE.BufferGeometry;j.setAttribute("position",new THREE.Float32BufferAttribute(k,3));var w=new THREE.Line(j,new THREE.LineBasicMaterial({color:t.color}));w.updateMatrixWorld=function(){},this.targetHelper=w,this.helper.add(w),this.helper.matrixAutoUpdate=!1,this.helper.matrix=this.object.matrix,delete this.setHelper}},{key:"_setTargetHelper",value:function(){var e=this.targetHelper,t=e.geometry.attributes.position,n=this.object.position;t.setXYZ(0,n.x,n.y,n.z);var i=this.light.target.position;t.setXYZ(1,i.x,i.y,i.z),t.needsUpdate=!0}},{key:"_setShapeHelper",value:function(){var e=this.shapeHelper,t=this.light.distance?this.light.distance:1e3,n=t*Math.tan(this.light.angle);e.scale.set(n,n,t)}},{key:"color",value:function(e){var t=this.light;t.color=new THREE.Color(e);var n=function e(n){n.children[0]?n.children.forEach((function(t){e(t)})):n.material&&n.material.color.copy(t.color).multiplyScalar(t.intensity)};n(this.helper)}},{key:"intensity",value:function(e){var t=this.light;t.intensity=e;var n=function e(n){n.children[0]?n.children.forEach((function(t){e(t)})):n.material&&n.material.color.copy(t.color).multiplyScalar(t.intensity)};n(this.helper)}},{key:"distance",value:function(e){this.light.distance=e,this.shapeHelper.scale.z=this.light.distance?this.light.distance:1e3}},{key:"angle",value:function(e){var t=this.light;t.angle=e;var n=t.distance?t.distance:1e3,i=n*Math.tan(t.angle);this.shapeHelper.scale.x=i,this.shapeHelper.scale.y=i}},{key:"penumbra",value:function(e){this.light.penumbra=e}},{key:"decay",value:function(e){this.light.decay=e}},{key:"position.x",value:function(e){this.object.position.x=e,this._setTargetHelper()}},{key:"position.y",value:function(e){this.object.position.y=e,this._setTargetHelper()}},{key:"position.z",value:function(e){this.object.position.z=e,this._setTargetHelper()}},{key:"target.position",value:function(e){this.target.position.x=e.x,this.target.position.y=e.y,this.target.position.z=e.z,this._setTargetHelper()}},{key:"target.position.x",value:function(e){this.target.position.x=e,this._setTargetHelper()}},{key:"target.position.y",value:function(e){this.target.position.y=e,this._setTargetHelper()}},{key:"target.position.z",value:function(e){this.target.position.z=e,this._setTargetHelper()}}]),n}(c["a"])},9916:function(e,t,n){},"9b8a":function(e,t,n){"use strict";var i=n("a026"),a=(n("4ec9"),n("d3b7"),n("3ca3"),n("ddb0"),n("159b"),n("caad"),n("2532"),n("2f62"));i["default"].use(a["a"]);var r=new a["a"].Store({state:{loading:!1,fileTree:"",currentFloder:"",selectMap:new Map,history:[],selectType:[],historyPointer:"",show:!1,multiple:!1,currentSelect:"",closeCallback:function(){},confirmCallback:function(){},cancelCallback:function(){}},getters:{fileTree:function(e){return e.fileTree},currentFloder:function(e){return e.currentFloder},currentSelect:function(e){return e.currentSelect},selectType:function(e){return e.selectType},show:function(e){return e.show},loading:function(e){return e.loading}},mutations:{request:function(e,t){var n=this,i=t.method,a=t.url,r=t.params,o=t.data;e.loading=!0,window.axios({method:i,url:a,params:r,data:o}).then((function(t){e.loading=!1;var i=t.data,a=function e(t,n){t.forEach((function(t){t.parent=n,t.select=!1,!t.file&&t.children&&e(t.children,t)}))};a(i.files.children,i.files),e.fileTree=i.files,e.currentFloder=i.files,n.commit("addHistory",i.files)}))},currentFloder:function(e,t){e.currentFloder=t},addHistory:function(e,t){e.history.push(t),e.historyPointer=e.history.length-1},select:function(e,t){e.selectType.includes(t.type)&&(t.select=!t.select,t.select?(e.multiple||(e.selectMap.forEach((function(e,t){t.select=!1})),e.selectMap.clear()),e.selectMap.set(t,!0),e.currentSelect=t):e.selectMap.has(t)&&e.selectMap.delete(t))},backOffHistory:function(e){if(e.historyPointer-=1,e.historyPointer<0)return e.historyPointer=0,!1;this.commit("currentFloder",e.history[e.historyPointer])},forwardHistory:function(e){if(e.historyPointer+=1,e.historyPointer>e.history.length-1)return e.historyPointer=e.history.length-1,!1;this.commit("currentFloder",e.history[e.historyPointer])},show:function(e,t){e.show=t},type:function(e,t){e.selectType=t},multiple:function(e,t){e.multiple=t},closeCallback:function(e,t){e.closeCallback=t},cancelCallback:function(e,t){e.cancelCallback=t},confirmCallback:function(e,t){e.confirmCallback=t},close:function(e){e.show=!1,e.closeCallback(),this.commit("clear")},cancel:function(e){e.show=!1,e.cancelCallback(),this.commit("clear")},confirm:function(e){e.show=!1;var t=[];e.selectMap.forEach((function(e,n){t.push(n)})),e.multiple||(t=t[0]),e.confirmCallback(t),this.commit("clear")},clear:function(e){e.fileTree="",e.currentFloder="",e.selectMap=new Map,e.history=[],e.historyPointer="",e.currentSelect=""}},actions:{}}),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticClass:"pictureLibrary-container"},[n("div",{staticClass:"pictureLibrary-main"},[n("header-operation"),n("container-operation"),n("footer-operation")],1)])},c=[],s=function(){return n.e("chunk-f9aed384").then(n.bind(null,"c01f"))},u=function(){return n.e("chunk-4916ca67").then(n.bind(null,"a6eb"))},l=function(){return n.e("chunk-2dae7612").then(n.bind(null,"ed1e"))},h={components:{headerOperation:s,containerOperation:u,footerOperation:l},computed:{show:function(){return this.$store.getters.show}},methods:{},created:function(){}},f=h,d=(n("0efb"),n("2877")),m=Object(d["a"])(f,o,c,!1,null,"1c1032af",null),p=m.exports,v=i["default"].extend(p),b=new v({el:document.createElement("div"),store:r});document.body.appendChild(b.$el);var y=function(e){var t=e.request,n=void 0===t?{method:"get",url:"",params:"",data:""}:t,i=e.multiple,a=void 0!==i&&i,r=e.type,o=void 0===r?["dir"]:r,c=e.close,s=void 0===c?function(){}:c,u=e.confirm,l=void 0===u?function(){}:u,h=e.cancel,f=void 0===h?function(){}:h;b.$store.commit("request",n),b.$store.commit("closeCallback",s),b.$store.commit("confirmCallback",l),b.$store.commit("cancelCallback",f),b.$store.commit("type",o),b.$store.commit("multiple",a),b.$store.commit("show",!0)};t["a"]=y},"9ce8":function(e,t,n){"use strict";n("9e1a")},"9e1a":function(e,t,n){},a1cd:function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return h}));var i=n("d4ec"),a=n("bee2"),r=n("262e"),o=n("2caf"),c=n("3ce1"),s=n("360d"),u=n("6c18"),l=Object.assign({},c["b"],{type:"VisFXAAShaderPass",resolution:{x:1,y:1}}),h=function(e){Object(r["a"])(n,e);var t=Object(o["a"])(n);function n(e){var a;return Object(i["a"])(this,n),a=t.call(this,e),a.pass=new s["a"](u["a"]),a}return Object(a["a"])(n,[{key:"resolution.x",value:function(e){this.pass.material.uniforms.resolution.value.x=1/e}},{key:"resolution.y",value:function(e){this.pass.material.uniforms.resolution.value.y=1/e}}]),n}(c["a"])},a660:function(e,t,n){"use strict";n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return d}));var i=n("d4ec"),a=n("bee2"),r=n("262e"),o=n("2caf"),c=(n("a15b"),n("c84b")),s=n("5a59"),u=n("9f75"),l={uniforms:{color:{type:"c",value:null},reflectivity:{type:"f",value:0},tReflectionMap:{type:"t",value:null},tRefractionMap:{type:"t",value:null},tNormalMap0:{type:"t",value:null},tNormalMap1:{type:"t",value:null},textureMatrix:{type:"m4",value:null},config:{type:"v4",value:new THREE.Vector4}},vertexShader:["#include <common>","#include <fog_pars_vertex>","#include <logdepthbuf_pars_vertex>","uniform mat4 textureMatrix;","varying vec4 vCoord;","varying vec2 vUv;","varying vec3 vToEye;","void main() {","\tvUv = uv;","\tvCoord = textureMatrix * vec4( position, 1.0 );","\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );","\tvToEye = cameraPosition - worldPosition.xyz;","\tvec4 mvPosition =  viewMatrix * worldPosition;","\tgl_Position = projectionMatrix * mvPosition;","\t#include <logdepthbuf_vertex>","\t#include <fog_vertex>","}"].join("\n"),fragmentShader:["#include <common>","#include <fog_pars_fragment>","#include <logdepthbuf_pars_fragment>","uniform sampler2D tReflectionMap;","uniform sampler2D tRefractionMap;","uniform sampler2D tNormalMap0;","uniform sampler2D tNormalMap1;","#ifdef USE_FLOWMAP","\tuniform sampler2D tFlowMap;","#else","\tuniform vec2 flowDirection;","#endif","uniform vec3 color;","uniform float reflectivity;","uniform vec4 config;","varying vec4 vCoord;","varying vec2 vUv;","varying vec3 vToEye;","void main() {","\t#include <logdepthbuf_fragment>","\tfloat flowMapOffset0 = config.x;","\tfloat flowMapOffset1 = config.y;","\tfloat halfCycle = config.z;","\tfloat scale = config.w;","\tvec3 toEye = normalize( vToEye );","\tvec2 flow;","\t#ifdef USE_FLOWMAP","\t\tflow = texture2D( tFlowMap, vUv ).rg * 2.0 - 1.0;","\t#else","\t\tflow = flowDirection;","\t#endif","\tflow.x *= - 1.0;","\tvec4 normalColor0 = texture2D( tNormalMap0, ( vUv * scale ) + flow * flowMapOffset0 );","\tvec4 normalColor1 = texture2D( tNormalMap1, ( vUv * scale ) + flow * flowMapOffset1 );","\tfloat flowLerp = abs( halfCycle - flowMapOffset0 ) / halfCycle;","\tvec4 normalColor = mix( normalColor0, normalColor1, flowLerp );","\tvec3 normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );","\tfloat theta = max( dot( toEye, normal ), 0.0 );","\tfloat reflectance = reflectivity + ( 1.0 - reflectivity ) * pow( ( 1.0 - theta ), 5.0 );","\tvec3 coord = vCoord.xyz / vCoord.w;","\tvec2 uv = coord.xy + coord.z * normal.xz * 0.05;","\tvec4 reflectColor = texture2D( tReflectionMap, vec2( 1.0 - uv.x, uv.y ) );","\tvec4 refractColor = texture2D( tRefractionMap, uv );","\tgl_FragColor = vec4( color, 1.0 ) * mix( refractColor, reflectColor, reflectance );","\t#include <tonemapping_fragment>","\t#include <encodings_fragment>","\t#include <fog_fragment>","}"].join("\n")},h=function(e){Object(r["a"])(n,e);var t=Object(o["a"])(n);function n(e,a){var r;Object(i["a"])(this,n),r=t.call(this,e),a=a||{};var o=void 0!==a.color?new THREE.Color(a.color):new THREE.Color(16777215),c=a.textureWidth||512,h=a.textureHeight||512,f=a.clipBias||0,d=a.flowDirection||new THREE.Vector2(1,0);r.flowSpeed=a.flowSpeed||.03;var m=a.reflectivity||.02,p=a.scale||1,v=a.shader||l,b=void 0!==a.encoding?a.encoding:THREE.LinearEncoding,y=a.flowMap||void 0,g=a.normalMap0||new THREE.Texture,E=a.normalMap1||new THREE.Texture;return r.cycle=.15,r.textureMatrix=new THREE.Matrix4,r.clock=new THREE.Clock,r.reflector=new s["a"](e,{textureWidth:c,textureHeight:h,clipBias:f,encoding:b}),r.refractor=new u["a"](e,{textureWidth:c,textureHeight:h,clipBias:f,encoding:b}),r.reflector.matrixAutoUpdate=!1,r.refractor.matrixAutoUpdate=!1,r.material=new THREE.ShaderMaterial({uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.fog,v.uniforms]),vertexShader:v.vertexShader,fragmentShader:v.fragmentShader,transparent:!0,fog:!0}),void 0!==y?(r.material.defines.USE_FLOWMAP="",r.material.uniforms.tFlowMap={type:"t",value:y}):r.material.uniforms.flowDirection={type:"v2",value:d},g.wrapS=g.wrapT=THREE.RepeatWrapping,E.wrapS=E.wrapT=THREE.RepeatWrapping,r.material.uniforms.tReflectionMap.value=r.reflector.getRenderTarget().texture,r.material.uniforms.tRefractionMap.value=r.refractor.getRenderTarget().texture,r.material.uniforms.tNormalMap0.value=g,r.material.uniforms.tNormalMap1.value=E,r.material.uniforms.color.value=o,r.material.uniforms.reflectivity.value=m,r.material.uniforms.textureMatrix.value=r.textureMatrix,r.material.uniforms.config.value.x=0,r.material.uniforms.config.value.y=r.halfCycle,r.material.uniforms.config.value.z=r.halfCycle,r.material.uniforms.config.value.w=p,r}return Object(a["a"])(n,[{key:"halfCycle",get:function(){return.5*this.cycle}},{key:"updateTextureMatrix",value:function(e){var t=this.textureMatrix;t.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),t.multiply(e.projectionMatrix),t.multiply(e.matrixWorldInverse),t.multiply(this.matrixWorld)}},{key:"updateFlow",value:function(){if(!this.material.uniforms)return!1;var e=this.material.uniforms.config;e.value.x+=this.flowSpeed,e.value.y=e.value.x+this.halfCycle,e.value.x>=this.cycle?(e.value.x=0,e.value.y=this.halfCycle):e.value.y>=this.cycle&&(e.value.y=e.value.y-this.cycle)}},{key:"onBeforeRender",value:function(e,t,n){this.updateTextureMatrix(n),this.updateFlow(),this.visible=!1,this.reflector.matrixWorld.copy(this.matrixWorld),this.refractor.matrixWorld.copy(this.matrixWorld),this.reflector.onBeforeRender(e,t,n),this.refractor.onBeforeRender(e,t,n),this.visible=!0}}]),n}(THREE.Mesh),f=Object.assign({},c["b"],{vid:"",type:"VisWater",rotation:{x:-.5*Math.PI,y:0,z:0},width:100,height:100,color:"rgb(255, 255 ,255)",flowDirection:{x:1,y:0},flowSpeed:10,reflectivity:.02,waterSale:1,cycle:.15,normalMap0:"",normalMap1:""}),d=function(e){Object(r["a"])(n,e);var t=Object(o["a"])(n);function n(e){var a;return Object(i["a"])(this,n),a=t.call(this,e),a.object=new h(new THREE.PlaneGeometry),a.material=a.object.material,a.object.vid=e,a}return Object(a["a"])(n,[{key:"_setGeometry",value:function(e,t){var n=Object.assign({},this.object.geometry.parameters);n[e]=t;var i=new THREE.PlaneGeometry(n.width,n.height);this.object.geometry.dispose(),this.object.geometry=i}},{key:"width",value:function(e){this._setGeometry("width",e),console.log(this.object)}},{key:"height",value:function(e){this._setGeometry("height",e)}},{key:"color",value:function(e){this.material.uniforms.color.value=new THREE.Color(e)}},{key:"flowDirection.x",value:function(e){this.material.uniforms.flowDirection.value.x=e}},{key:"flowDirection.y",value:function(e){this.material.uniforms.flowDirection.value.y=e}},{key:"flowSpeed",value:function(e){this.object.flowSpeed=1e-4*e}},{key:"reflectivity",value:function(e){this.material.uniforms.reflectivity.value=e}},{key:"waterSale",value:function(e){this.material.uniforms.config.value.w=e}},{key:"cycle",value:function(e){this.object.cycle=e}},{key:"normalMap0",value:function(e){this.material.uniforms.tNormalMap0.value=e||new THREE.Texture}},{key:"normalMap1",value:function(e){this.material.uniforms.tNormalMap1.value=e||new THREE.Texture}},{key:"scale.x",value:function(){}},{key:"scale.y",value:function(){}},{key:"scale.z",value:function(){}}]),n}(c["a"])},a6a3:function(e,t,n){"use strict";n("08a0")},a734:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return l}));var i=n("d4ec"),a=n("bee2"),r=n("262e"),o=n("2caf"),c=n("703e"),s=Object.assign({},c["b"],{type:"VisCubeTexture",url:""}),u="VisCubeTextureLoader",l=function(e){Object(r["a"])(n,e);var t=Object(o["a"])(n);function n(e){var a;return Object(i["a"])(this,n),a=t.call(this,e),a.texture=new THREE.CubeTexture,a.texture.textureType="CubeTexture",a}return Object(a["a"])(n,[{key:"url",value:function(e){this.texture.image=e}}]),n}(c["a"])},a98a:function(e,t,n){},b014:function(e,t,n){"use strict";n("c90a")},b392:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return u}));var i=n("d4ec"),a=n("bee2"),r=n("262e"),o=n("2caf"),c=n("6397"),s=Object.assign({},c["b"],{type:"VisSphereGeometry",radius:5,widthSegments:16,heightSegments:16,phiStart:0,phiLength:2*Math.PI,thetaStart:0,thetaLength:Math.PI}),u=function(e){Object(r["a"])(n,e);var t=Object(o["a"])(n);function n(e){var a;return Object(i["a"])(this,n),a=t.call(this,e),a.geometry.dispose(),a.geometry=new THREE.SphereBufferGeometry,a}return Object(a["a"])(n,[{key:"_setGeometry",value:function(e,t){var n=Object.assign({},this.geometry.parameters);n[e]=t;var i=new THREE.SphereBufferGeometry(n.radius,n.widthSegments,n.heightSegments,n.phiStart,n.phiLength,n.thetaStart,n.thetaLength);this._setAnchor(i),this.geometry.dispose(),this.geometry=i}},{key:"radius",value:function(e){this._setGeometry("radius",e)}},{key:"widthSegments",value:function(e){this._setGeometry("widthSegments",e)}},{key:"heightSegments",value:function(e){this._setGeometry("heightSegments",e)}},{key:"phiStart",value:function(e){this._setGeometry("phiStart",e)}},{key:"phiLength",value:function(e){this._setGeometry("phiLength",e)}},{key:"thetaStart",value:function(e){this._setGeometry("thetaStart",e)}},{key:"thetaLength",value:function(e){this._setGeometry("thetaLength",e)}}]),n}(c["a"])},bf29:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return u}));var i=n("d4ec"),a=n("bee2"),r=n("262e"),o=n("2caf"),c=n("6397"),s=Object.assign({},c["b"],{type:"VisPlaneGeometry",width:10,height:10}),u=function(e){Object(r["a"])(n,e);var t=Object(o["a"])(n);function n(e){var a;return Object(i["a"])(this,n),a=t.call(this,e),a.geometry.dispose(),a.geometry=new THREE.PlaneBufferGeometry,a}return Object(a["a"])(n,[{key:"_setGeometry",value:function(e,t){var n=Object.assign({},this.geometry.parameters);n[e]=t;var i=new THREE.PlaneBufferGeometry(n.width,n.height);this._setAnchor(i),this.geometry.dispose(),this.geometry=i}},{key:"width",value:function(e){this._setGeometry("width",e)}},{key:"height",value:function(e){this._setGeometry("height",e)}}]),n}(c["a"])},c10c:function(e,t,n){},c626:function(e,t,n){"use strict";n("cc02")},c84b:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o}));var i=n("d4ec"),a=n("bee2"),r={vid:"",type:"",castShadow:!0,receiveShadow:!0,showHelper:!0,lookAt:"",position:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0},scale:{x:1,y:1,z:1}},o=function(){function e(){Object(i["a"])(this,e),this.object=new THREE.Object3D,this.helper=new THREE.Object3D,this.helper.matrixAutoUpdate=!1,this.helper.type="VisHelper"}return Object(a["a"])(e,[{key:"showHelper",value:function(e){this.helper.visible=e}},{key:"position",value:function(e){this.object.position.x=e.x,this.object.position.y=e.y,this.object.position.z=e.z}},{key:"scale",value:function(e){this.object.scale.x=e.x,this.object.scale.y=e.y,this.object.scale.z=e.z}},{key:"rotation",value:function(e){this.object.rotation.x=e.x,this.object.rotation.y=e.y,this.object.rotation.z=e.z}},{key:"position.x",value:function(e){this.object.position.x=e}},{key:"position.y",value:function(e){this.object.position.y=e}},{key:"position.z",value:function(e){this.object.position.z=e}},{key:"rotation.x",value:function(e){this.object.rotation.x=e}},{key:"rotation.y",value:function(e){this.object.rotation.y=e}},{key:"rotation.z",value:function(e){this.object.rotation.z=e}},{key:"scale.x",value:function(e){this.object.scale.x=e}},{key:"scale.y",value:function(e){this.object.scale.y=e}},{key:"scale.z",value:function(e){this.object.scale.z=e}},{key:"lookAt",value:function(e){}},{key:"castShadow",value:function(e){this.object.castShadow=e}},{key:"receiveShadow",value:function(e){this.object.receiveShadow=e}}]),e}()},c90a:function(e,t,n){},c9a8:function(e,t,n){"use strict";n("287b")},cbed:function(e,t,n){"use strict";n("8e73")},cc02:function(e,t,n){},cdba:function(e,t,n){"use strict";n("1549")},d3ce:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return l}));var i=n("d4ec"),a=n("bee2"),r=n("262e"),o=n("2caf"),c=n("3ce1"),s=n("5b17"),u=Object.assign({},c["b"],{type:"VisAfterimagePass",damp:.5}),l=function(e){Object(r["a"])(n,e);var t=Object(o["a"])(n);function n(e){var a;return Object(i["a"])(this,n),a=t.call(this,e),a.pass=new s["a"],a}return Object(a["a"])(n,[{key:"damp",value:function(e){this.pass.uniforms.damp.value=e}}]),n}(c["a"])},d4dc:function(e,t,n){"use strict";n("8b08")},d9e7:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return l}));var i=n("d4ec"),a=n("bee2"),r=n("262e"),o=n("2caf"),c=n("703e"),s=Object.assign({},c["b"],{type:"VisImageTexture",url:"",rotation:0,format:THREE.RGBAFormat,wrapS:THREE.ClampToEdgeWrapping,wrapT:THREE.ClampToEdgeWrapping,repeat:{x:1,y:1},center:{x:0,y:0},offset:{x:0,y:0}}),u="VisTextureLoader",l=function(e){Object(r["a"])(n,e);var t=Object(o["a"])(n);function n(e){var a;return Object(i["a"])(this,n),a=t.call(this,e),a.texture=new THREE.Texture,a.texture.textureType="ImageTexture",a}return Object(a["a"])(n,[{key:"url",value:function(e){this.texture.image=e}}]),n}(c["a"])},da4b:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return u}));var i=n("d4ec"),a=n("bee2"),r=n("262e"),o=n("2caf"),c=(n("159b"),n("ebe2")),s=Object.assign({},c["b"],{type:"VisDirectionalLight",color:"rgb(255, 255, 255)",intensity:1,target:{vid:"",position:{x:0,y:0,z:0}}}),u=function(e){Object(r["a"])(n,e);var t=Object(o["a"])(n);function n(e){var a;return Object(i["a"])(this,n),a=t.call(this,e),a.light=new THREE.DirectionalLight(e.color,e.intensity),a.target=a.light.target,a.sourceHelper="",a.targetHelper="",a.setObject(),a.setHelper(),a.light.matrixAutoUpdate=!1,a.light.matrix=a.object.matrix,a.object.vid=e.vid,a.light.vid=e.vid,a}return Object(a["a"])(n,[{key:"setObject",value:function(){var e=new THREE.Object3D;e.geometry=new THREE.SphereGeometry(5),e.sphere=new THREE.Sphere,e.raycast=function(e,t){var n=this.geometry;if(!n)return!1;var i=this.matrixWorld,a=this.sphere;!n.boundingSphere&&n.computeBoundingSphere(),a.copy(n.boundingSphere),a.applyMatrix4(i),e.ray.intersectsSphere(a)&&t.push({object:this})},this.object=e,delete this.setObject}},{key:"setHelper",value:function(){var e=this.light,t=e.target,n=new THREE.Mesh(new THREE.PlaneGeometry(10,10,3,3),new THREE.MeshBasicMaterial({color:e.color,wireframe:!0}));n.material.color.multiplyScalar(e.intensity);var i=n.updateMatrixWorld.bind(n);n.updateMatrixWorld=function(e){i(e),n.lookAt(t.position)},this.sourceHelper=n,this.helper.add(n);var a=[e.position.x,e.position.y,e.position.z,t.position.x,t.position.y,t.position.z],r=new THREE.BufferGeometry;r.setAttribute("position",new THREE.Float32BufferAttribute(a,3));var o=new THREE.Line(r,new THREE.LineBasicMaterial({color:e.color}));o.updateMatrixWorld=function(){},this.targetHelper=o,this.helper.add(o),this.helper.matrixAutoUpdate=!1,this.helper.matrix=this.object.matrix,delete this.setHelper}},{key:"_setTargetHelper",value:function(){var e=this.targetHelper,t=e.geometry.attributes.position,n=this.object.position;t.setXYZ(0,n.x,n.y,n.z);var i=this.light.target.position;t.setXYZ(1,i.x,i.y,i.z),t.needsUpdate=!0}},{key:"color",value:function(e){var t=this.light;t.color=new THREE.Color(e);var n=function e(n){n.children[0]?n.children.forEach((function(t){e(t)})):n.material&&n.material.color.copy(t.color).multiplyScalar(t.intensity)};n(this.helper)}},{key:"intensity",value:function(e){var t=this.light;t.intensity=e;var n=function e(n){n.children[0]?n.children.forEach((function(t){e(t)})):n.material&&n.material.color.copy(t.color).multiplyScalar(t.intensity)};n(this.helper)}},{key:"position.x",value:function(e){this.object.position.x=e,this._setTargetHelper()}},{key:"position.y",value:function(e){this.object.position.y=e,this._setTargetHelper()}},{key:"position.z",value:function(e){this.object.position.z=e,this._setTargetHelper()}},{key:"target.position",value:function(e){this.target.position.x=e.x,this.target.position.y=e.y,this.target.position.z=e.z,this._setTargetHelper()}},{key:"target.position.x",value:function(e){this.target.position.x=e,this._setTargetHelper()}},{key:"target.position.y",value:function(e){this.target.position.y=e,this._setTargetHelper()}},{key:"target.position.z",value:function(e){this.target.position.z=e,this._setTargetHelper()}}]),n}(c["a"])},dbba:function(e,t,n){},ddde:function(e,t,n){},eba4:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return u}));var i=n("d4ec"),a=n("262e"),r=n("2caf"),o=n("3ce1"),c=n("f7dd"),s=Object.assign({},o["b"],{type:"VisSMAAPass",resolution:{x:1,y:1}}),u=function(e){Object(a["a"])(n,e);var t=Object(r["a"])(n);function n(e){var a;return Object(i["a"])(this,n),a=t.call(this,e),a.pass=new c["a"](e.width,e.height),a}return n}(o["a"])},ebe2:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return l}));var i=n("d4ec"),a=n("bee2"),r=n("262e"),o=n("2caf"),c=n("ade3"),s=n("c84b"),u=Object.assign({},s["b"],{}),l=function(e){Object(r["a"])(n,e);var t=Object(o["a"])(n);function n(e){return Object(i["a"])(this,n),t.call(this,e)}return Object(a["a"])(n,[{key:"dispose",value:function(){}},{key:"castShadow",value:function(e){this.light.castShadow=e}},{key:"receiveShadow",value:function(e){}}]),n}(s["a"]);Object(c["a"])(l,"getLineMaterial",(function(){return new THREE.LineBasicMaterial({color:"rgb(255, 255, 255)"})}))},f1c3:function(e,t,n){"use strict";n("5c68")},f4943:function(e,t,n){},fd6f:function(e,t,n){"use strict";n("17a9")}});